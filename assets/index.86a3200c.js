var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&l(e,n,t[n]);return e},i=(e,r)=>t(e,n(r)),c=("undefined"!=typeof require&&require,(e,t)=>{var n={};for(var l in e)o.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&r)for(var l of r(e))t.indexOf(l)<0&&a.call(e,l)&&(n[l]=e[l]);return n});import{r as p,O as u,R as d,c as m,S as f,a as g,b as h,m as b,d as w,w as y,e as v,f as x,l as E,g as k,B as C,u as A,h as N}from"./vendor.06d83442.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const M={},I=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/web-ubuntu/${e}`)in M)return;M[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},R=/macintosh|mac os x/i.test(navigator.userAgent);function P(){}function S(e){e.stopPropagation()}function D(e){return+e.slice(0,e.length-1)/100}function T(e){let{offsetTop:t,offsetLeft:n}=e,r=e.offsetParent;for(;r;)t+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent;return{offsetTop:t,offsetLeft:n}}function z(e){return(t=e)&&"object"==typeof t&&Object.keys(t).includes("current")?e.current:e;var t}function O(e,t){let n=e;for(;n;){if(t(n))return n;n=n.parentNode}return null}function j(e,t){try{return JSON.parse(e)}catch(n){return t}}function F(e,t,n,r={}){const o=p.exports.useRef();o.current=n,p.exports.useEffect((()=>{const n=z(e);if(!n)return;const a=e=>{var t;return null==(t=o.current)?void 0:t.call(o,e)};return n.addEventListener(t,a,{capture:r.capture,once:r.once,passive:r.passive}),()=>{n.removeEventListener(t,a,{capture:r.capture})}}),[e,t,...Object.values(r)])}var Y,$;($=Y||(Y={})).CREATE="CREATE",$.CREATED="CREATED",$.ACTIVE="ACTIVE",$.ACTIVATED="ACTIVATED",$.DEACTIVATED="DEACTIVATED",$.DESTROY="DESTROY";const[L,_,W]=u((e=>({addCacheElement(t,n){const r=e[t];if(r){if(r.status===Y.DESTROY){const{doms:o}=r;return o.forEach((e=>{var t;null==(t=e.parentNode)||t.removeChild(e)})),i(s({},e),{[t]:{cacheId:t,doms:[],scrolls:{x:0,y:0},element:n,status:Y.CREATE}})}return e}return i(s({},e),{[t]:{cacheId:t,doms:[],element:n,scrolls:{x:0,y:0},status:Y.CREATE}})},addCacheDoms:(t,n)=>e[t]?i(s({},e),{[t]:i(s({},e[t]),{doms:n,status:Y.CREATED})}):e,renderCacheDoms(t,{scroll:n,parentNode:r}){const o=e[t],{doms:a}=o,{scrolls:l}=o;return a.forEach((e=>r.appendChild(e))),n&&r.scrollTo(l.x,l.y),i(s({},e),{[t]:i(s({},o),{status:Y.ACTIVE})})},cacheScroll(t,n){const r=n.target;return i(s({},e),{[t]:i(s({},e[t]),{scrolls:{x:r.scrollLeft,y:r.scrollTop}})})},activate:t=>i(s({},e),{[t]:i(s({},e[t]),{status:Y.ACTIVATED})}),deactivate:t=>i(s({},e),{[t]:i(s({},e[t]),{status:Y.DEACTIVATED})}),refresh:t=>i(s({},e),{[t]:i(s({},e[t]),{status:Y.DESTROY})}),clear:()=>Object.keys(e).reduce(((t,n)=>(t[n]=i(s({},e[n]),{status:Y.DESTROY}),t)),{})})),{});function V(e){const t=p.exports.useRef(e);t.current=e,p.exports.useEffect((()=>t.current),[])}const X=({children:e,cacheId:t,className:n,style:r,scroll:o=!1})=>{const[a,l]=L(),s=p.exports.useRef(null);F(s,"scroll",(e=>{l.cacheScroll(t,e)}));const i=a[t],c=null==i?void 0:i.status,u=null==i?void 0:i.doms;return p.exports.useEffect((()=>{!u||c!==Y.CREATED&&c!==Y.ACTIVATED?c&&c!==Y.DESTROY||l.addCacheElement(t,d.createElement(d.Fragment,null,e)):l.renderCacheDoms(t,{scroll:o,parentNode:s.current})}),[u,c,l,t,o,e]),p.exports.useEffect((()=>{(null==i?void 0:i.status)===Y.DEACTIVATED&&l.activate(t)}),[c,t,l]),V((()=>{l.deactivate(t)})),d.createElement("div",{id:`keepalive-cache-${t}`,ref:s,className:n,style:r})};var B=W((({children:e})=>{const[t,n]=L(),r=p.exports.useMemo((()=>Object.values(t).filter((e=>e&&e.status!==Y.DESTROY))),[t]);return d.createElement(d.Fragment,null,e,r.map((({cacheId:e,doms:t,element:r})=>d.createElement("div",{id:`element-cache-${e}`,key:e,ref:r=>{if(r&&0===t.length){const t=[...r.childNodes];n.addCacheDoms(e,t)}}},r))))}));const U=({title:e,message:t})=>d.createElement("div",{className:"p-5 w-full h-full flex flex-col items-center justify-center bg-ub-cool-grey"},d.createElement("p",{className:"text-red-500 text-xl"},e),d.createElement("p",{className:"text-ubt-grey mt-3 text-sm"},t)),H={hasError:!1,error:null};class q extends d.Component{constructor(){var e;super(...arguments),l(this,"symbol"!=typeof(e="state")?e+"":e,H)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{fallback:e,showError:t,children:n}=this.props,{error:r,hasError:o}=this.state,a=t?null==r?void 0:r.message:"Something Wrong!",l=t?null==r?void 0:r.stack:"it looks like there are some problems, please try again later.";return o?e||d.createElement(U,{title:a,message:l}):n}}function J(e){return e.startsWith(".")?e:`/${`/web-ubuntu/${e}`.split("/").filter(Boolean).join("/")}`}var K,G;function Q(e,t=0,...n){const r=function(e,t=0){const n=p.exports.useRef(K.Free),r=p.exports.useRef(),o=p.exports.useRef(e),a=p.exports.useCallback((()=>n.current),[]),l=p.exports.useCallback(((...e)=>{n.current=K.Pending,r.current&&clearInterval(r.current),r.current=setInterval((()=>{n.current=K.Calling,o.current(...e)}),t)}),[t]),s=p.exports.useCallback((()=>{n.current=K.Canceled,r.current&&clearInterval(r.current)}),[]);return p.exports.useEffect((()=>{o.current=e}),[e]),V(s),{currentStatus:a,run:l,cancel:s}}(e,t);return p.exports.useEffect((()=>{r.run(...n)}),[t]),r}(G=K||(K={})).Free="free",G.Pending="pending",G.Canceled="cancelled",G.Calling="calling";const Z=({children:e,delay:t=500,dotNumber:n=3,className:r})=>{const[o,a]=p.exports.useState("");Q((()=>{a((e=>e===".".repeat(n)?"":`${e}.`))}),t);const l=m("ml-1",r);return d.createElement(d.Fragment,null,e,d.createElement("span",{className:l},o))},ee=({tips:e="loading",loading:t,children:n,className:r,loadingClassName:o})=>{const a=m("relative w-full h-full",r),l=m("absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center",o);return d.createElement("div",{className:a},t&&d.createElement("div",{style:{zIndex:1e4},className:l},d.createElement("img",{className:"animate-spin w-20",src:J("/themes/Yaru/status/process-working-symbolic.svg"),alt:"Loading Spinner"}),d.createElement("p",{className:"text-white"},d.createElement(Z,null,e))),n)},te=({children:e,fallback:t})=>d.createElement(q,null,d.createElement(p.exports.Suspense,{fallback:t||d.createElement(ee,{loading:!0})},e)),ne=({children:e})=>d.createElement(d.Fragment,null,e);function re(e,t,n){return e?d.createElement(f,s({},n),e.map(((e,r)=>e.redirect?d.createElement(g,{key:e.key||r,to:e.redirect}):d.createElement(h,{key:e.key||r,path:e.path,exact:e.exact,strict:e.strict,render:r=>{let o;e.routes&&(o=d.createElement(te,null,re(e.routes,t,n)));const a=()=>e.render?e.render(i(s(s({},r),t),{children:o,route:e})):d.createElement(e.component||ne,e.component?i(s(s({},r),t),{route:e}):null,o);return e.keepAlive?d.createElement(X,i(s({},e.keepAlive),{style:{width:"100%",height:"100%"}}),a()):a()}})))):null}function oe(e,t){const n=[];return e.some((e=>{const r=e.path?b(t,e):n.length?n[n.length-1].match:w.computeRootMatch(t);return r&&(n.push({route:e,match:r}),e.routes&&n.push(...oe(e.routes,t))),r})),n}const ae=({src:e})=>d.createElement("div",{style:{backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center"},className:"absolute top-0 right-0 overflow-hidden h-full w-full -z-10"}),le=y({reducerMapper:v}),se=({title:e,icon:t,img:n})=>d.createElement("div",{className:"flex-grow flex flex-col justify-center items-center h-full w-full"},d.createElement("div",{className:"w-24"},t||d.createElement("img",{className:"w-full",src:n||J("/themes/Yaru/status/empty-folder.svg"),alt:"ubuntu-empty"})),d.createElement("span",{className:"font-bold mt-4 text-xl px-1 text-gray-400"},e)),ie=["click"];function ce(e,t,n=ie){const r=p.exports.useRef(t);r.current=t,p.exports.useEffect((()=>{const t=t=>{const n=z(e);n&&!n.contains(t.target)&&r.current(t)};for(const e of n)document.addEventListener(e,t);return()=>{for(const e of n)document.removeEventListener(e,t)}}),[...n,e])}const pe={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},ue={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},de={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function me(e,t){if(!e.key)return!1;if("number"==typeof t)return e.keyCode===t;const n=t.split(".");let r=0;for(const o of n){const t=de[o],n=ue[o],a=pe[o];(t&&t(e)||(n&&Array.isArray(n)?n.includes(e.key):n===e.key)||(a&&Array.isArray(a)?a.includes(e.keyCode):a===e.keyCode)||e.key.toUpperCase()===o.toUpperCase())&&r++}return r===n.length}const fe="keydown";function ge(e,t=P,n={}){const{event:r=fe,target:o}=n;F(o||document,r,(n=>{if(function(e){return"function"==typeof e?e:"string"==typeof e||"number"==typeof e?t=>me(t,e):Array.isArray(e)?t=>e.some((e=>me(t,e))):e?()=>!0:()=>!1}(e)(n))return t(n)}))}const he=({className:e,app:t,onOpen:n,onPaste:r,onCopy:o})=>{const a=m("p-1 m-px z-10 bg-white bg-opacity-0 hover:bg-opacity-20 focus:bg-ub-orange focus:bg-opacity-50 focus:border-yellow-700 focus:border-opacity-100 border border-transparent outline-none rounded select-none w-24 flex flex-col  items-center text-center text-xs font-normal text-white",e),l=p.exports.useRef(null),s=p.exports.useCallback((()=>{null==n||n(t.id,t)}),[n,t.id,t]);return ge("enter",(()=>{null==n||n(t.id,t)}),{target:l}),ge(R?"meta.c":"ctrl.c",(e=>{e.stopPropagation(),null==o||o(t.id,t)}),{target:l}),ge(R?"meta.v":"ctrl.v",(e=>{e.stopPropagation(),null==r||r(t.id,t)}),{target:l}),d.createElement("div",{ref:l,tabIndex:0,className:a,onDoubleClick:s},d.createElement("img",{className:"mb-1 w-10",src:t.icon,alt:t.title}),d.createElement("span",{className:"mt-1"},t.title))};(async()=>{window.ResizeObserver||(window.ResizeObserver=(await I((()=>import("./ResizeObserver.es.1591e951.js")),[])).default)})();const be={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const[we,ye,ve]=u((e=>({setDragArea:t=>i(s({},e),{dragArea:t})})),{dragArea:{width:0,height:0,limitRange:{x:[0,0],y:[0,0]}}});function xe(){const e=p.exports.useRef(!1),t=p.exports.useCallback((()=>e.current),[]);return p.exports.useEffect((()=>(e.current=!0,()=>{e.current=!1})),[]),t}var Ee=ve((e=>{var t=e,{children:n,limitRange:r,className:o}=t,a=c(t,["children","limitRange","className"]);const[,l]=we(),i=p.exports.useRef(null),{width:u,height:f}=function(e){const[t,n]=p.exports.useState(be);return p.exports.useEffect((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0];if(!t)return;const{x:r,y:o,width:a,height:l,top:s,left:i,bottom:c,right:p}=t.contentRect;n({x:r,y:o,width:a,height:l,top:s,left:i,bottom:c,right:p})}));return t.observe(e.current),()=>{t.disconnect()}}),[e.current]),t}(i),g=m("relative w-full h-full left-0 top-0",o),[h]=function(e={}){const t=p.exports.useRef(e);t.current=e;const[n,r]=p.exports.useState(!1),o=p.exports.useCallback((e=>({onDragOver:e=>{var n,r;e.preventDefault(),null==(r=(n=t.current).onDragOver)||r.call(n,e)},onDragEnter:e=>{var n,o;e.preventDefault(),r(!0),null==(o=(n=t.current).onDragEnter)||o.call(n,e)},onDragLeave:e=>{var n,o;e.preventDefault(),r(!1),null==(o=(n=t.current).onDragLeave)||o.call(n,e)},onDrop:n=>{var o,a;n.preventDefault(),n.persist(),r(!1),null==(a=(o=t.current).onDrop)||a.call(o,n),e(n.dataTransfer,n)},onPaste:n=>{var r,o;n.persist(),null==(o=(r=t.current).onPaste)||o.call(r,n),e(n.clipboardData,n)}})),[r]),a=xe(),l=p.exports.useCallback(((e,n)=>{const r=e.getData("text/uri-list"),o=e.getData("custom");if(o&&t.current.onDom){let e=o;try{e=JSON.parse(o)}catch(l){e=o}t.current.onDom(e,n)}else r&&t.current.onUri?t.current.onUri(r,n):e.files&&e.files.length&&t.current.onFiles?t.current.onFiles(Array.from(e.files),n):e.items&&e.items.length&&t.current.onText&&e.items[0].getAsString((e=>{a()&&t.current.onText(e,n)}))}),[a]);return[p.exports.useMemo((()=>o(l)),[l]),{isHovering:n}]}(a);return p.exports.useEffect((()=>{l.setDragArea({width:u,height:f,limitRange:r||{x:[0,u],y:[0,f]}})}),[u,r,f,l]),d.createElement("div",s({ref:i,className:g},h),n)}));const ke=({data:e,children:t,onDragEnd:n,onDragStart:r,onDrag:o,onValid:a,className:l,style:c,nodeRef:u,defaultPosition:f,onPositionChange:g})=>{const[h]=we(),{dragArea:b}=h,w=p.exports.useRef(g);w.current=g;const y=p.exports.useRef(null),v=u||y,[x,E]=p.exports.useState(f||{left:0,top:0}),[k,C]=p.exports.useState({left:0,top:0}),A=p.exports.useCallback(((e,t)=>{const n=t.currentTarget;C({left:t.clientX-n.offsetLeft,top:t.clientY-n.offsetTop}),null==r||r(e,t)}),[r,C]),N=p.exports.useCallback((async(e,t)=>{let n=t.clientX-k.left,r=t.clientY-k.top;const{x:o,y:l}=b.limitRange,s=v.current.getBoundingClientRect();await(null==a?void 0:a(e,t))&&(n<o[0]&&(n=0),n>o[1]-s.width&&(n=o[1]-s.width),r>l[1]-s.height&&(r=l[1]-s.height),r<l[0]&&(r=l[0]),E({left:n,top:r}))}),[n,E,k,b.limitRange]),M=p.exports.useCallback(((e,t)=>{null==o||o(e,t)}),[o,E,k,b.limitRange]),[,I]=function(e){const[t,n]=p.exports.useState(!1);return[t,p.exports.useCallback((t=>({draggable:"true",onDragStart:r=>{var o;n(!0),null==(o=null==e?void 0:e.onDragStart)||o.call(e,t,r),r.dataTransfer.setData("custom",JSON.stringify(t)),(null==e?void 0:e.customDragData)&&"object"==typeof e.customDragData&&Object.keys(e.customDragData).forEach((t=>{r.dataTransfer.setData(t,e.customDragData[t])}))},onDrag:n=>{var r;null==(r=null==e?void 0:e.onDrag)||r.call(e,t,n)},onDragEnd:r=>{var o;n(!1),null==(o=null==e?void 0:e.onDragEnd)||o.call(e,t,r)}})),[Object.values(e||{}),n])]}({onDragStart:A,onDragEnd:N,onDrag:M}),R=m(l,"absolute"),P=p.exports.useMemo((()=>{const{x:e,y:t}=b.limitRange;return s({left:"string"==typeof x.left?x.left:x.left/e[1]*100+"%",top:"string"==typeof x.top?x.top:x.top/t[1]*100+"%"},c)}),[c,x,b.limitRange]);p.exports.useEffect((()=>{var e;null==(e=w.current)||e.call(w,x)}),[x]),p.exports.useEffect((()=>{f&&E(f)}),[null==f?void 0:f.top,null==f?void 0:f.left]);const S=p.exports.useMemo((()=>e),[e]);return d.createElement("div",i(s({ref:v},I(S)),{style:P,className:R}),t)};const Ce=()=>d.createElement("div",{className:"w-full flex justify-center"},d.createElement("div",{className:"border-t border-gray-900 py-1 w-4/5"}));const Ae=({children:e,className:t,menus:n,nodeRef:r,onItemClick:o,contextmenuOptionsRewrite:a,rewriteVisible:l,rewritePosition:s})=>{const[i,u]=p.exports.useState({left:0,top:0}),[f,g]=p.exports.useState(!1),h=p.exports.useRef(null),b=r||h,w=m("relative",t),y=a||{},{onClick:v}=y,x=c(y,["onClick"]),E=v||(()=>{g(!1)});return function(e,{onClick:t,onContextMenu:n,onClickAway:r}={}){F(e,"contextmenu",(e=>{e.preventDefault(),null==n||n(e)})),F(e,"click",(e=>{e.preventDefault(),null==t||t(e)})),ce(e,(e=>{null==r||r(e)}),["click","contextmenu"])}(b,a?x:{onContextMenu(e){g(!0);const t=e.currentTarget,{offsetLeft:n,offsetTop:r}=T(t);u({left:e.clientX-n,top:e.clientY-r})},onClickAway(){g(!1)}}),d.createElement("div",{ref:b,onClick:E,className:w},e,(l||f)&&d.createElement("div",{className:"context-menu-bg whitespace-nowrap border font-light border-gray-900 rounded text-white py-4 absolute text-sm",style:{zIndex:1e5,left:(null==s?void 0:s.left)||i.left,top:(null==s?void 0:s.top)||i.top}},n.map((({key:e,title:t,render:n,onClick:r,icon:a,disabled:l})=>d.createElement("div",{key:e,onClick:t=>{l||(null==r||r(t),null==o||o(e,t))}},n?n():d.createElement("div",{className:"px-6 py-0.5 hover:bg-ub-warm-grey hover:bg-opacity-20 mb-1.5 "+(l?"text-gray-400":"")},a,d.createElement("span",null,t)),d.createElement(Ce,null))))))},Ne={"wall-1":J("/images/wallpapers/wall-1.jpg"),"wall-2":J("/images/wallpapers/wall-2.png"),"wall-3":J("/images/wallpapers/wall-3.jpg"),"wall-4":J("/images/wallpapers/wall-4.jpg"),"wall-5":J("/images/wallpapers/wall-5.jpg"),"wall-6":J("/images/wallpapers/wall-6.png"),"wall-7":J("/images/wallpapers/wall-7.png"),"wall-8":J("/images/wallpapers/wall-8.jpg")},Me={navbar:30,sidebar:52},Ie="edit-buttons",Re="toolbar",Pe="folderApp",Se="sidebarApp";const De=(e,t)=>{const n=function(){const e=p.exports.useRef(!0);return e.current?(e.current=!1,!0):e.current}();p.exports.useEffect((()=>{if(!n)return e()}),t)};function Te(e,t={}){const{defaultValue:n,map:r=(e=>e)}=t,o=e[0].toUpperCase()+e.slice(1),a=`web-ubuntu-${e}-key`;return{[`set${o}`](e){localStorage.setItem(a,e)},[`get${o}`](){var e,t;return null!=(t=null!=(e=r(localStorage.getItem(a)))?e:n)?t:null},[`remove${o}`](){localStorage.removeItem(a)}}}const{setFolderDragTarget:ze,removeFolderDragTarget:Oe,getFolderDragTarget:je}=Te("folderDragTarget",{defaultValue:""});var Fe,Ye;function $e(e,t=0){const n=p.exports.useRef(Fe.Free),r=p.exports.useRef(),o=p.exports.useRef(e);o.current=e;const a=p.exports.useCallback((()=>n.current),[]),l=p.exports.useCallback(((...e)=>{n.current=Fe.Pending,r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{n.current=Fe.Called,o.current(...e)}),t)}),[t]),s=p.exports.useCallback((()=>{n.current=Fe.Canceled,r.current&&clearTimeout(r.current)}),[]);return V(s),{currentStatus:a,run:l,cancel:s}}(Ye=Fe||(Fe={})).Free="free",Ye.Pending="pending",Ye.Canceled="cancelled",Ye.Called="called";const Le=({children:e,visible:t=!1,exist:n=!1,duration:r,transitionProperty:o=["all"],leaveClassName:a="",enterClassName:l="",nodeRef:c})=>{const[u,f]=p.exports.useState(!1),{run:g,cancel:h}=$e((e=>{f(e)}),r),b=p.exports.useRef(null),w=c||b;if(p.exports.useEffect((()=>{var e;h(),t?(null==(e=w.current)||e.scrollTop,f(t)):g(t)}),[t,g]),d.isValidElement(e)){if(d.Children.only(e)){const{props:c}=e,p=m(c.className,{hidden:n&&!(t||u),[l]:u,[a]:!t});return n||t||u?d.cloneElement(e,i(s({},c),{ref:w,style:Object.assign({},c.style,{transitionProperty:r?o.join(","):void 0,transitionDuration:`${r}ms`}),className:p})):null}return d.createElement(d.Fragment,null,d.Children.map(e,(e=>{const{props:c}=e,p=m(c.className,{hidden:n&&!(t||u),[l]:u,[a]:!t});return n||t||u?d.cloneElement(e,i(s({},c),{style:Object.assign({},c.style,{transitionProperty:r?o.join(","):void 0,transitionDuration:`${r}ms`}),className:p})):null})))}return d.createElement(d.Fragment,null,e)},_e={error:"bg-red-600 active:bg-red-500 border-red-600 active:border-red-500",info:"bg-gray-600 active:bg-gray-500 border-gray-600 active:border-gray-500",success:"bg-green-600 active:bg-green-500 border-green-600 active:border-green-500",warning:"bg-yellow-600 active:bg-yellow-500 border-yellow-600 active:border-yellow-500"},We={large:"text-lg",middle:"text-base",small:"text-sm"},Ve={round:"rounded-full",square:"rounded-sm"},Xe=({children:e,loading:t,type:n="info",size:r="middle",shape:o="square",className:a,onClick:l})=>{const s=m(a,"text-white select-none flex-shrink-0 outline-none py-1 px-2 transition-colors border border-solid",_e[n],We[r],Ve[o]);return d.createElement("button",{className:s,onClick:l},d.createElement("span",{className:"flex justify-center items-center"},t&&d.createElement("img",{className:"animate-spin mr-2 w-1.5f",src:J("/themes/Yaru/status/process-working-symbolic.svg"),alt:"Loading Spinner"}),e))};var Be=p.exports.forwardRef((({visible:e,className:t,title:n,getContainer:r,onCancel:o,afterClose:a,destroyOnClose:l,onOk:i,okText:c,cancelText:u,hideCancelButton:f,cancelButtonProps:g,okButtonProps:h,footer:b,children:w,content:y,style:v},E)=>{const[k,C]=p.exports.useState(e||!1),A=p.exports.useMemo((()=>null!=e?e:k),[e,k]),N=m(t,"modal-container"),M=p.exports.useMemo((()=>"function"==typeof r?r():null!=r?r:document.body),[r]);return p.exports.useImperativeHandle(E,(()=>({destroy:()=>{null!=e||C(!1)},open:()=>{null!=e||C(!0)}})),[C,e]),De((()=>{A||null==a||a()}),[A]),x.createPortal(d.createElement(Le,{exist:!l,visible:A,duration:200},d.createElement("div",{className:"fixed left-0 top-0 w-full h-full z-9999"},d.createElement(Le,{exist:!0,visible:A,duration:200,enterClassName:"modal-container-show",leaveClassName:"modal-container-leave"},d.createElement("div",{className:N,style:v},d.createElement("div",{className:"text-lg mb-3"},n),null!=w?w:y,d.createElement("div",{className:"mt-5 border-t w-full pt-3"},void 0===b?d.createElement("div",{className:"w-full flex justify-end items-center"},!f&&d.createElement(Xe,s({type:"error",onClick:o,className:"mr-2"},g),u||"Cancel"),d.createElement(Xe,s({onClick:i},h),c||"Ok")):b))))),M)}));const Ue=d.createRef();function He(e){Ue.current&&Ue.current.destroy();const t=document.createElement("div");document.body.append(t),x.render(d.createElement(Be,i(s({ref:Ue,destroyOnClose:!0},e),{async onOk(){var t,n;await(null==(t=e.onOk)?void 0:t.call(e)),null==(n=Ue.current)||n.destroy()},async onCancel(){var t,n;await(null==(t=e.onCancel)?void 0:t.call(e)),null==(n=Ue.current)||n.destroy()}})),t),Ue.current&&Ue.current.open(),document.body.removeChild(t)}const qe=e=>He(s({},e)),{setBackgroundImage:Je,getBackgroundImage:Ke}=Te("backgroundImage",{defaultValue:""}),{setMousePosition:Ge,getMousePosition:Qe}=Te("mousePosition",{defaultValue:{x:0,y:0},map:e=>j(e,{x:0,y:0})});async function Ze(e,t,n,r,o=!1){const a=o?e:E(e),l=a.appMap[t],c=a.appMap[n],p=l.id.split("/"),u=`${n}/${p[p.length-1]}`;if(nt(a.appMap,n,l.parentId,u)){if(!(await new Promise((e=>{qe({title:"Something Wrong",content:`An older item with the name ${l.title} already exists at this location. Do you want to replace it with the new item you are moving?`,onOk(){c.apps=c.apps.filter((e=>e.id!==u)),Reflect.deleteProperty(a.appMap,u),Reflect.deleteProperty(a.openedAppMap,u),Reflect.deleteProperty(a.maximizedApps,u),Reflect.deleteProperty(a.minimizedApps,u),e(!0)},onCancel(){e(!1)}})}))))return k(a)}const d=function(e,t,n,r){let o=n,a=r.title;for(;e[o];)o=`${o} copy`,a=`${a} copy`;return i(s({},r),{parentId:t,title:a,id:o})}(a.appMap,n,u,l);if(r&&(d.position=r),a.appMap[d.id]=d,o||c.apps.push(d),rt(d)){d.apps=[...d.apps];const e=d.apps.length;for(let t=0;t<e;t++){const e=d.apps[t],n=e.id.split("/"),r=`${d.id}/${n[n.length-1]}`;await Ze(a,e.id,d.id,e.position,!0),d.apps[t]=i(s({},e),{id:r,parentId:d.id})}}return o?a:k(a)}async function et(e,{currentId:t,prevId:n,parentId:r,prevParentId:o,prevPosition:a},l=!1){const c=l?e:E(e),p=c.appMap[n],u=c.appMap[r],d=c.appMap[o];if(nt(c.appMap,r,o,t)){if(!(await new Promise((e=>{qe({title:"Something Wrong",content:`An older item with the name ${c.appMap[t].title} already exists at this location. Do you want to replace it with the new item you are moving?`,onOk(){u.apps=u.apps.filter((e=>e.id!==t)),Reflect.deleteProperty(c.appMap,t),Reflect.deleteProperty(c.openedAppMap,t),Reflect.deleteProperty(c.maximizedApps,t),Reflect.deleteProperty(c.minimizedApps,t),e(!0)},onCancel(){p.position=a,e(!1)}})}))))return k(c)}if(p.parentId=r,p.id=t,Reflect.deleteProperty(c.appMap,n),Reflect.deleteProperty(c.openedAppMap,n),Reflect.deleteProperty(c.maximizedApps,n),Reflect.deleteProperty(c.minimizedApps,n),c.openedApps=c.openedApps.filter((e=>e.id!==n)),c.appMap[t]=p,d.apps=d.apps.filter((e=>e.id!==n)),u.apps.push(p),rt(p)){const e=p.apps.length;for(let n=0;n<e;n++){const e=p.apps[n],r=e.id,o=r.split("/"),a=`${t}/${o[o.length-1]}`;await et(c,{currentId:a,prevId:r,parentId:t,prevParentId:t,prevPosition:e.position},!0),p.apps[n]=i(s({},e),{id:a,parentId:t})}}return l?c:k(c)}function tt(e,t,n){if(t===n)return!1;if(rt(e[t])){let r=e[n];for(;r;){if(r.parentId===t)return!1;r=e[r.parentId]}return!0}return!0}function nt(e,t,n,r){return t!==n&&e[r]}function rt(e){return!!e&&(Array.isArray(e.apps)||!!e.folder)}const ot={"top left":"left-0 top-0","top right":"right-0 top-0","bottom left":"left-0 bottom-0","bottom right":"right-0  bottom-0"},at={info:"bg-ub-cool-grey",error:"bg-red-500",success:"bg-green-500",warning:"bg-yellow-500"};var lt=p.exports.forwardRef((({duration:e=3e3,type:t="info",direction:n="top right",content:r,description:o,wrapperClassName:a,getContainer:l},s)=>{const[i,c]=p.exports.useState(!0),{run:u,cancel:f}=$e((()=>{c(!1)}),e),g=p.exports.useCallback((()=>{f(),c(!1)}),[c,f]);p.exports.useImperativeHandle(s,(()=>({close:g})),[g]);const h=m("message-container",{"message-left":n.includes("left"),"message-right":n.includes("right")},ot[n],at[t],a),b=p.exports.useMemo((()=>"function"==typeof l?l():null!=l?l:document.body),[l]);return p.exports.useEffect((()=>{u()}),[]),x.createPortal(d.createElement(Le,{visible:i,duration:300,enterClassName:"message-container-show",leaveClassName:"message-container-leave"},d.createElement("div",{className:h},d.createElement("div",{className:"text-white"},r),d.createElement("div",{className:"text-xs mt-1 text-ubt-grey"},o))),b)}));const st=d.createRef(),it=e=>{st.current&&st.current.close();const t=document.createElement("div");document.body.append(t),x.render(d.createElement(lt,s({ref:st},e)),t),document.body.removeChild(t)};["info","error","success","warning"].forEach((e=>{it[e]=t=>{it(i(s({},t),{type:e}))}}));const ct=e=>{const t=p.exports.useRef(!(!e.app.position||!e.app.position.left&&!e.app.position.top)),[{appMap:n,copiedAppId:r}]=Ct(),[{dragArea:o}]=we(),[a,l]=p.exports.useState(!1),[c,u]=p.exports.useState(!1),f=p.exports.useMemo((()=>{var n,r;return t.current||!(!(null==(n=e.app.position)?void 0:n.left)&&!(null==(r=e.app.position)?void 0:r.top))}),[e.app.position]),g=p.exports.useRef(null),h=m("hover:z-20 focus:z-20 z-10",{"z-20":c}),[,b]=Ct(),w=p.exports.useMemo((()=>({from:e.folderId,app:e.app})),[e.app,e.folderId]),y=p.exports.useCallback(((e,t)=>{const n=t.currentTarget;t.dataTransfer.setData("domOffset",JSON.stringify(s({},function({clientX:e,clientY:t},n){const{offsetLeft:r,offsetTop:o}=T(n);return{left:e-r,top:t-o}}({clientX:t.clientX,clientY:t.clientY},n))))}),[]),v=p.exports.useCallback((()=>{const t=je();Oe();const r=e.app.id.split("/"),o=`${t}/${r[r.length-1]}`;return tt(n,e.app.id,t)&&!nt(n,t,e.app.parentId,o)}),[e.app,n]),x=p.exports.useMemo((()=>{const t=e.app.position||{left:0,top:0};return{left:0===o.width||"string"==typeof t.left?t.left:t.left/o.width*100+"%",top:0===o.height||"string"==typeof t.top?t.top:t.top/o.height*100+"%"}}),[e.app.position,o]),E=p.exports.useMemo((()=>[{key:"Open",title:"Open",onClick:()=>{b.openApp(e.app.id,e.app)}},{key:"Copy",title:"Copy",onClick:()=>{var t;return null==(t=e.onCopy)?void 0:t.call(e,e.app.id,e.app)}},{key:"Paste",title:"Paste",disabled:!tt(n,r,e.app.id)||!rt(e.app),onClick:()=>{var t;return null==(t=e.onPaste)?void 0:t.call(e,e.app.id,e.app)}}]),[e.app,n,e.onCopy,r,e.onPaste,b]);De((()=>{if(g.current&&a&&!t.current){const n=g.current.offsetLeft,r=g.current.offsetTop;requestAnimationFrame((()=>{t.current=!0,b.updateFolderApp({from:e.folderId,to:e.folderId,data:i(s({},e.app),{position:{left:n,top:r}})})}))}}),[a]),p.exports.useEffect((()=>{l(!0)}),[]),ce(g,(()=>{u(!1)})),F(g,"click",(()=>{b.clickApp(e.app.id,e.app),u(!0)}));const k=p.exports.useCallback((t=>{var n,r;f&&(null==(n=e.app.position)?void 0:n.left)!==t.left&&(null==(r=e.app.position)?void 0:r.top)!==t.top&&b.updateFolderApp({from:e.folderId,to:e.folderId,data:i(s({},e.app),{position:t})})}),[e.app,e.folderId,f,b]);return d.createElement(ke,{onDragStart:y,nodeRef:g,defaultPosition:x,onPositionChange:k,className:h,data:w,style:{position:f?"absolute":"static"},onValid:v},d.createElement(Ee,{onDragOver:()=>{rt(e.app)&&ze(e.app.id)},onDrop:t=>{if(!rt(e.app))return;t.stopPropagation();const r=j(t.dataTransfer.getData("custom"),{});if(!r.app)return void it.error({content:"invalid dragging element"});const o=n[r.app.id];b.updateFolderApp({from:r.from,to:e.app.id,data:i(s({},o),{position:{left:0,top:0}})})}},d.createElement("div",{"data-target":Pe},d.createElement(Ae,{menus:E},d.createElement(he,s({},e))))))};var pt,ut;(ut=pt||(pt={})).Application="/application",ut.Desktop="/desktop",ut.Settings="/application/settings";const dt=({children:e,folderId:t,onPaste:n,className:r})=>{const[{appMap:o},a]=Ct(),l=p.exports.useRef(null),[s,i]=p.exports.useState(!1),[c,u]=p.exports.useState({left:0,top:0}),f=m(r,"h-full w-full flex flex-col justify-start content-start flex-wrap bg-transparent relative overflow-hidden overscroll-none"),g=p.exports.useMemo((()=>[{key:"New Folder",title:"New Folder",onClick(){a.setNewFolderModalFolderId(t),a.setNewFolderModal(!0)}},{key:"Paste",title:"Paste",onClick:()=>null==n?void 0:n(t,o[t],!0)},{key:"Show Desktop in Files",title:"Show Desktop in Files",disabled:!0},{key:"Open in Terminal",title:"Open in Terminal"},{key:"Change Background...",title:"Change Background...",onClick(e){e.stopPropagation();const t=o[pt.Settings];t&&a.openApp(t.id,t)}},{key:"Display Settings",title:"Display Settings",disabled:!0},{key:"Settings",title:"Settings",onClick(e){e.stopPropagation();const t=o[pt.Settings];t&&a.openApp(t.id,t)}}]),[o,t,n,a]),h=p.exports.useMemo((()=>({onContextMenu(e){if(O(e.target,(e=>{var t;const n=null==(t=e.dataset)?void 0:t.target;return n===Pe||n===Se})))return i(!1);i(!0),a.setMousePosition({clientX:e.clientX,clientY:e.clientY});const t=e.currentTarget,{offsetLeft:n,offsetTop:r}=T(t),o=e.clientX-n,l=e.clientY-r;u({left:o,top:l})},onClick(){i(!1)},onClickAway(){i(!1)}})),[i,u,a]);return ge(R?"meta.v":"ctrl.v",(e=>{if(e.stopPropagation(),!n)return;e.target.dataset.appid===t&&n(t,o[t],!0)})),d.createElement(Ae,{nodeRef:l,rewritePosition:c,rewriteVisible:s,contextmenuOptionsRewrite:h,className:f,menus:g},e)},mt=({id:e,emptyProps:t,showEmpty:n=!0,wrapperClassName:r,className:o})=>{const[{appMap:a,copiedAppId:l},c]=Ct(),u=p.exports.useRef(null),f=p.exports.useMemo((()=>{const t=a[e];return rt(t)?t.apps.map((e=>a[e.id])):[]}),[a]),g=p.exports.useCallback(((e,t)=>{c.openApp(e,t)}),[c]),h=p.exports.useCallback((e=>{c.setCopiedAppId(e)}),[c]),b=p.exports.useCallback(((e,t,n)=>{const r=a[l],o=a[e];if(!r||!u.current)return;if(!rt(o))return void it.error({content:"target app is not a folder"});const{x:s,y:i}=Qe(),{offsetTop:p,offsetLeft:d}=T(u.current);c.pasteFolderApp({parentId:e,copiedId:l,position:n?{left:s-d,top:i-p}:{left:0,top:0}})}),[c,l,a]),w=m("w-full h-full",r);return d.createElement("div",{ref:u,tabIndex:0,"data-appid":e,className:w},d.createElement(dt,{onPaste:b,folderId:e},d.createElement(Ee,{onDragEnter:()=>{ze(e)},onDrop:t=>{t.stopPropagation();const n=j(t.dataTransfer.getData("custom"),{});if(!n.app)return void it.error({content:"invalid dragging element"});const r=a[n.app.id],o=j(t.dataTransfer.getData("domOffset"),{}),l=t.currentTarget,{offsetLeft:p,offsetTop:u}=T(l),d=n.from===e?r.position:{left:t.clientX-p-o.left,top:t.clientY-u-o.top};c.updateFolderApp({from:n.from,to:e,data:i(s({},r),{position:d})})},className:o},f.length>0||!n?f.map((t=>d.createElement(ct,{onOpen:g,onCopy:h,onPaste:b,folderId:e,key:t.id,app:t}))):d.createElement(se,s({title:"Folder is Empty"},t)))))},ft=e=>d.createElement(mt,s({className:"min-h-full flex-grow flex flex-wrap items-start content-start justify-start",wrapperClassName:"w-full h-full flex flex-col bg-ub-cool-grey text-white select-none overflow-x-auto overflow-y-auto ub-scrollbar"},e));var gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const ht=d.lazy((()=>I((()=>import("./todoist.d070f48b.js")),["assets/todoist.d070f48b.js","assets/vendor.06d83442.js"]))),bt=d.lazy((()=>I((()=>import("./firefox.76716e36.js")),["assets/firefox.76716e36.js","assets/vendor.06d83442.js"]))),wt=d.lazy((()=>I((()=>import("./settings.ccf250fc.js")),["assets/settings.ccf250fc.js","assets/vendor.06d83442.js"]))),yt=d.lazy((()=>I((()=>import("./trash.718f7e62.js")),["assets/trash.718f7e62.js","assets/vendor.06d83442.js"]))),vt=d.lazy((()=>I((()=>import("./vscode.e4821041.js")),["assets/vscode.e4821041.js","assets/vendor.06d83442.js"]))),xt=[{parentId:"/",folder:!0,id:"/desktop",title:"Desktop",apps:[{parentId:"/desktop",id:"/desktop/Col0ring",title:"Col0ring",icon:J("/themes/Yaru/system/folder.png"),render:e=>d.createElement(ft,{id:e}),folder:!0,position:{left:0,top:1},apps:[{parentId:"/desktop/Col0ring",id:"/desktop/Col0ring/index.php",icon:J("/themes/filetypes/php.png"),title:"php"},{parentId:"/desktop/Col0ring",title:"Angular.js",id:"/desktop/Col0ring/Angular.js",icon:J("/themes/filetypes/js.png")}]},{parentId:"/desktop",id:"/desktop/222",title:"222",icon:J("/themes/Yaru/system/folder.png"),render:e=>d.createElement(ft,{id:e}),folder:!0,position:{left:0,top:76},apps:[{parentId:"/desktop/222",id:"/desktop/222/js",icon:J("/themes/filetypes/php.png"),title:"js"}]},{parentId:"/desktop",id:"/desktop/application-shortcut",title:"Applications",position:{left:0,top:151},icon:J("/themes/Yaru/system/folder.png"),redirect:"/application"},{parentId:"/desktop",id:"/desktop/firefox-shortcut",title:"Firefox Browser",position:{left:0,top:226},icon:J("/themes/Yaru/apps/firefox.svg"),redirect:"/application/firefox"},{parentId:"/desktop",id:"/application/todo-ist-shortcut",title:"Todoist",position:{left:0,top:318},icon:J("/themes/Yaru/apps/todoist.png"),redirect:"/application/todo-ist"}]},{parentId:"/",folder:!0,id:"/application",title:"Application",icon:J("/themes/Yaru/system/folder.png"),render:e=>d.createElement(ft,{id:e}),apps:[{parentId:"/application",id:"/application/firefox",title:"Firefox Browser",icon:J("/themes/Yaru/apps/firefox.svg"),disabled:!1,render:()=>d.createElement(bt,null)},{parentId:"/application",id:"/application/todo-ist",title:"Todoist",icon:J("/themes/Yaru/apps/todoist.png"),disabled:!1,render:()=>d.createElement(ht,null)},{parentId:"/application",id:"/application/about-col0ring",title:"About Col0ring",icon:J("/themes/Yaru/system/user-home.png"),disabled:!1},{parentId:"/application",id:"/application/vscode",title:"Visual Studio Code",icon:J("/themes/Yaru/apps/vscode.png"),disabled:!1,render:()=>d.createElement(vt,null)},{parentId:"/application",id:"/application/terminal",title:"Terminal",icon:J("/themes/Yaru/apps/bash.png"),disabled:!1},{parentId:"/application",id:"/application/music",title:"Music",icon:J("/themes/Yaru/apps/vue-aplayer-round.png"),disabled:!1},{parentId:"/application",id:"/application/settings",title:"Settings",icon:J("/themes/Yaru/apps/gnome-control-center.png"),disabled:!1,render:()=>d.createElement(wt,null)},{parentId:"/application",id:"/application/trash",title:"Trash",icon:J("/themes/Yaru/system/user-trash-full.png"),disabled:!1,folder:!0,render:()=>d.createElement(yt,null),apps:[{parentId:"/application/trash",id:"/application/trash/index.php",icon:J("/themes/filetypes/php.png"),title:"php"},{parentId:"/application/trash",title:"Angular.js",id:"/application/trash/Angular.js",icon:J("/themes/filetypes/js.png")}]},{parentId:"/application",id:"/application/gedit",title:"Send a Message",icon:J("/themes/Yaru/apps/gedit.png"),disabled:!1}]}],Et=d.lazy((()=>I((()=>Promise.resolve().then((function(){return gt}))),void 0))),kt=function e(t){const n={};return t.forEach((t=>{n[t.id]=t,rt(t)&&Object.assign(n,e(t.apps||[]))})),n}(xt),[Ct,At,Nt]=u((e=>[{chooseBackgroundImage:t=>(Je(t),e.backgroundImage=t,e),setCopiedAppId:t=>(e.copiedAppId=t,e),setNewFolderModal:t=>(e.newFolderModal=t,e),setNewFolderModalFolderId:t=>(e.newFolderModalFolderId=t,e),setAllAppsScreen:t=>(e.allAppsScreen=t,e),setLockScreen:t=>(e.lockScreen=t,e),setMousePosition:t=>(e.mousePosition=t,e),resizeBrowserWindow:(t,n)=>(e.defaultAppWindow.minHeight=n/3,e.defaultAppWindow.minWidth=t/3,e),updateOpenedApp:(t,n)=>(e.openedApps=e.openedApps.map((e=>e.id===t?n:e)),e.openedAppMap[t]=n,e),addNewFolder(t,n,r){const o=e.appMap[t],a=`${t}/${n}`;if(o.apps.find((e=>e.id===a)))return it.error({content:"Something Wrong",description:`The name ${n} is already in use. Please choose another name`,duration:5e3}),e;const l={id:a,title:n,parentId:t,folder:!0,icon:J("/themes/Yaru/system/folder.png"),disabled:!1,position:r,apps:[],render:e=>d.createElement(Et,{id:e})};return this.setNewFolderModal(!1),o.apps.push(l),e.appMap[a]=l,e},addFolderApp(t){e.appMap[t.id]=t;return e.appMap[t.parentId].apps.push(t),e},async pasteFolderApp({parentId:t,position:n,copiedId:r}){const o=E(e);return tt(o.appMap,r,t)?await Ze(o,r,t,n):(it.error({content:"Something Wrong",description:"can not move itself or parent folder to the directory"}),k(o))},async updateFolderApp({from:t,to:n,data:r}){const o=E(e);if(!tt(o.appMap,r.id,n))return it.error({content:"Something Wrong",description:"can not move itself or parent folder to the directory"}),k(o);const a=o.appMap[t],l=o.appMap[r.id].position;if(o.appMap[r.id]=r,t===n){const e=o.openedAppMap[t];return e&&(e.apps=e.apps.map((e=>e.id===r.id?r:e)),o.openedApps=o.openedApps.map((n=>n.id===t?e:n))),a.apps=a.apps.map((e=>e.id===r.id?r:e)),k(o)}{const e=o.appMap[n],t=r.id.split("/"),s=`${e.id}/${t[t.length-1]}`,i=e.id;return et(o,{currentId:s,prevId:r.id,parentId:i,prevParentId:a.id,prevPosition:l})}},openApp(t,n){const r=n.redirect||t;if(e.openedAppMap[r]){const t=e.openedAppMap[r];return Reflect.deleteProperty(e.minimizedApps,r),e.openedApps=[...e.openedApps.filter((e=>e.id!==r)),t],e.focusAppId=r,e}const o=i(s({},e.appMap[r]),{rect:s({},e.defaultAppWindow),windowPosition:{left:0,top:0}});return e.focusAppId=r,e.openedApps.push(o),e.openedAppMap[r]=o,e},closeApp:t=>(e.focusAppId=e.focusAppId===t?"":e.focusAppId,e.openedApps=e.openedApps.filter((e=>e.id!==t)),Reflect.deleteProperty(e.maximizedApps,t),Reflect.deleteProperty(e.minimizedApps,t),Reflect.deleteProperty(e.openedAppMap,t),e),minimizeApp:(t,n)=>(e.minimizedApps[t]?Reflect.deleteProperty(e.minimizedApps,t):e.minimizedApps[t]=n,e.focusAppId=e.focusAppId===t?"":e.focusAppId,e),maximizeApp:(t,n)=>(e.maximizedApps[t]?Reflect.deleteProperty(e.maximizedApps,t):e.maximizedApps[t]=n,e.focusAppId=t,e),clickApp(t,n){const r=e.appMap[n.parentId];return r.apps=[...r.apps.filter((e=>e.id!==t)),n],e}}]),{backgroundImage:Ke()||Ne["wall-2"],backgroundImages:Ne,mousePosition:{clientX:0,clientY:0},newFolderModal:!1,newFolderModalFolderId:"",defaultAppWindow:{width:"85%",height:"80%",minWidth:window.innerWidth/3,minHeight:window.innerHeight/3},allAppsScreen:!1,lockScreen:!1,focusAppId:"",copiedAppId:"",openedAppMap:{},openedApps:[],minimizedApps:{},maximizedApps:{},frequentApps:kt[pt.Application].apps,favoriteApps:kt[pt.Application].apps,appMap:kt},le),Mt=({tabs:e,onItemClick:t,stretch:n,active:r,className:o,fontSize:a,itemClassName:l})=>{const s=m("flex flex-col group  bg-transparent cursor-pointer items-center",{"flex-1":n},l),i=m("w-full flex",o);return d.createElement("div",{className:i},e.map(((e,n)=>d.createElement("div",{key:e.name,className:s,onClick:()=>null==t?void 0:t(e.name,n)},d.createElement("div",{style:{fontSize:a},className:"flex-1 flex justify-center items-center text-white",onClick:e.onClick},e.render?e.render():d.createElement("span",null,e.title||e.name)),d.createElement("div",{className:"w-full h-1 mt-1 "+(e.name===r?"bg-ub-orange":"bg-transparent group-hover:bg-white")})))))},It=({placeholder:e="Type to Search...",className:t,value:n,onChange:r})=>{const o=m("flex w-1/4 h-full items-center pl-2 pr-2 bg-white border-black border-width-2 rounded-xl overflow-hidden left",t),a=void 0===n,l=p.exports.useCallback((e=>{null==r||r(e.target.value,e)}),[r]);return d.createElement("div",{className:o},d.createElement("img",{className:"w-5 h-5",alt:"search icon",src:J("/images/logos/search.png")}),d.createElement("input",{className:"w-full p-1 bg-transparent focus:outline-none",placeholder:e,value:a?void 0:n,onChange:l}))};const Rt=[{name:"Frequent"},{name:"All"}],Pt=()=>{const[{appMap:e,allAppsScreen:t,frequentApps:n},r]=Ct(),[o,a]=p.exports.useState("All"),l=p.exports.useMemo((()=>e[pt.Application].apps),[e]),s=p.exports.useCallback((e=>{a(e)}),[a]),i=p.exports.useCallback(((e,t)=>{r.openApp(e,t),r.setAllAppsScreen(!1)}),[r]),c=m("all-apps-screen absolute h-full w-full left-0 top-0 z-30 justify-center border-black border-opacity-60 bg-black bg-opacity-70");return d.createElement(Le,{duration:200,enterClassName:"all-apps-screen-show",leaveClassName:"all-apps-screen-leave",exist:!0,visible:t},d.createElement("div",{style:{paddingRight:Me.sidebar},className:c},d.createElement("div",{style:{paddingTop:Me.navbar},className:"relative w-full h-full"},d.createElement("div",{className:"flex p-5 align-center justify-center"},d.createElement(It,{placeholder:"Type to Search..."})),d.createElement("div",{className:"flex flex-wrap"},"Frequent"===o?n.map((e=>d.createElement(he,{key:e.id,onOpen:i,app:e}))):l.map((e=>d.createElement(he,{key:e.id,onOpen:i,app:e})))),d.createElement("div",{className:"flex items-center p-2 justify-center absolute left-0 bottom-0 mb-15 w-full"},d.createElement("div",{className:"w-1/2"},d.createElement(Mt,{active:o,onItemClick:s,fontSize:16,stretch:!0,tabs:Rt}))))))};function St(e){return e<10?`0${e}`:`${e}`}const Dt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Tt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zt=({className:e,type:t="default",showSeconds:n,delay:r=1e3,hour12:o=!0})=>{const[a,l]=p.exports.useState((()=>new Date)),s=p.exports.useMemo((()=>{const e=Tt[a.getDay()];let r=a.getHours();const l=St(a.getMinutes()),s=St(a.getSeconds()),i=n?`:${s}`:"",c=Dt[a.getMonth()],p=a.getDate(),u=r<12?"AM":"PM";switch(o&&r>12&&(r-=12),t){case"date":return`${e} ${c} ${p}`;case"time":return`${r}:${l}${i} ${u}`;case"default":default:return`${e} ${c} ${p} ${r}:${l}${i} ${u}`}}),[a,t]),i=m(e);return Q((()=>{l(new Date)}),r),d.createElement("span",{className:i},s)},Ot=({className:e,children:t,color:n,onClick:r})=>{const o=m("pl-2 pr-2 outline-none transition duration-100 ease-in-out border-b-2 border-transparent focus:border-ubb-orange py-1",e);return d.createElement("div",{tabIndex:0,style:{borderColor:n},className:o,onClick:r},t)},{setBrightness:jt,getBrightness:Ft}=Te("brightness",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),{setSound:Yt,getSound:$t}=Te("sound",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),[Lt,_t]=u((e=>({setUbuntuInstance:t=>i(s({},e),{ubuntu:t}),setBrightness:t=>(jt(`${t}`),i(s({},e),{config:i(s({},e.config),{brightness:t})})),setSound:t=>(Yt(`${t}`),i(s({},e),{config:i(s({},e.config),{sound:t})})),setTitle:t=>i(s({},e),{title:`Web Ubuntu - ${t}`})})),{title:"Web Ubuntu",ubuntu:{current:null},config:{brightness:Ft(),sound:$t()}});const Wt={up:"Bottom",down:"Top",left:"Right",right:"Left"},Vt=({direction:e,className:t,size:n,color:r})=>{const o=m(`arrow-custom-${e} inline-block`,t);return d.createElement("i",{style:{borderWidth:n,[`border${Wt[e]}Color`]:r},className:o})};const Xt=({className:e,min:t=0,max:n=100,step:r=1,value:o,onChange:a})=>{const l=m("ubuntu-slider",e),s=void 0===o,i=p.exports.useCallback((e=>{null==a||a(+e.target.value,e)}),[a]);return d.createElement("input",{type:"range",min:`${t}`,max:`${n}`,step:`${r}`,defaultValue:s?"0":void 0,value:s?void 0:`${o}`,onChange:i,className:l})},Bt=({icons:e})=>d.createElement("div",{className:"flex justify-center items-center"},e.map((({name:e,icon:t})=>d.createElement("img",{className:"mx-1.5",key:e,src:t,alt:e}))),d.createElement("span",{className:"mx-1"},d.createElement(Vt,{direction:"down"}))),Ut=({children:e,image:t,imageAlt:n,onClick:r,name:o})=>d.createElement("div",{onClick:r,className:"w-64 py-1.5 flex items-center justify-center bg-ub-cool-grey hover:bg-ub-warm-grey hover:bg-opacity-20"},d.createElement("div",{className:"w-8"},d.createElement("img",{src:t,alt:n||o})),e||d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,o))),Ht=()=>d.createElement("div",{className:"w-64 flex content-center justify-center"},d.createElement("i",{className:"w-2/4 border-black border-opacity-50 border-b my-2 border-solid"}));const qt=({menus:e,onClickAway:t,visible:n})=>{const r=p.exports.useRef(null),o=m("absolute bg-ub-cool-grey rounded-md py-4 top-9 right-3 shadow border-black border border-opacity-20 status-menu");return d.createElement(Le,{enterClassName:"status-menu-show",leaveClassName:"status-menu-leave",duration:200,nodeRef:r,visible:n},d.createElement("div",{ref:r,className:o},d.createElement("i",{className:"absolute w-0 h-0 -top-2 right-6 top-arrow-up inline-block"}),e.map(((t,n)=>d.createElement(d.Fragment,{key:n},t.map((e=>{var t=e,{render:n}=t,r=c(t,["render"]);return d.createElement(Ut,s({key:r.image},r),null==n?void 0:n())})),n!==e.length-1&&d.createElement(Ht,null)))),d.createElement(Jt,{statusMenuRef:r,onClickAway:t})))},Jt=({statusMenuRef:e,onClickAway:t})=>(ce(e,(e=>{null==t||t(e)})),null),{setToken:Kt,getToken:Gt,removeToken:Qt}=Te("token"),Zt=Gt(),[en,tn]=u((e=>({login:t=>(Kt(t),i(s({},e),{token:t,isLogin:!0})),setUser:t=>i(s({},e),{user:t}),logout:()=>(Qt(),i(s({},e),{user:null,token:null,isLogin:!1}))})),{user:null,token:Zt,isLogin:!!Zt}),nn=()=>{const[e,t]=p.exports.useState(!1),[,n]=en(),[r,o]=Lt(),[{appMap:a},l]=Ct(),{config:{sound:s,brightness:i}}=r,c=p.exports.useCallback((e=>{o.setSound(e)}),[o]),u=p.exports.useCallback((e=>{o.setBrightness(e)}),[o]),m=p.exports.useCallback((()=>{t(!0)}),[t]),f=p.exports.useCallback((()=>{t(!1)}),[t]),g=p.exports.useMemo((()=>[{icon:J("/themes/Yaru/status/network-wireless-signal-good-symbolic.svg"),name:"ubuntu wifi"},{icon:J("/themes/Yaru/status/audio-volume-medium-symbolic.svg"),name:"ubuntu sound"},{icon:J("/themes/Yaru/status/battery-good-symbolic.svg"),name:"ubuntu battry"}]),[]),h=p.exports.useMemo((()=>[[{image:J("/themes/Yaru/status/audio-headphones-symbolic.svg"),imageAlt:"ubuntu headphone",render:()=>d.createElement(Xt,{onChange:c,className:"ubuntu-slider w-2/3",value:s})},{image:J("/themes/Yaru/status/display-brightness-symbolic.svg"),imageAlt:"ubuntu brightness",render:()=>d.createElement(Xt,{onChange:u,className:"ubuntu-slider w-2/3",value:i})}],[{image:J("/themes/Yaru/status/network-wireless-signal-good-symbolic.svg"),imageAlt:"ubuntu wifi",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"OnePlus 8 Pro"),d.createElement(Vt,{direction:"right"}))},{image:J("/themes/Yaru/status/battery-good-symbolic.svg"),imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"Off"),d.createElement(Vt,{direction:"right"}))},{image:J("/themes/Yaru/status/bluetooth-symbolic.svg"),imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"2:40 Remaining (75%)"),d.createElement(Vt,{direction:"right"}))}],[{image:J("/themes/Yaru/status/emblem-system-symbolic.svg"),imageAlt:"ubuntu settings",name:"Settings",onClick:()=>{l.openApp(pt.Settings,a[pt.Settings])}},{image:J("/themes/Yaru/status/changes-prevent-symbolic.svg"),imageAlt:"ubuntu lock",name:"Lock",onClick:()=>{l.setLockScreen(!0)}},{image:J("/themes/Yaru/status/system-shutdown-symbolic.svg"),imageAlt:"ubuntu power",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,"Power Off / Log Out"),d.createElement(Vt,{direction:"right"})),onClick:()=>{n.logout()}}]]),[s,i,c,u,a,n]);return d.createElement("div",{className:"absolute top-0 left-0 w-full shadow-md flex flex-nowrap justify-between items-center bg-ub-grey text-ubt-grey text-sm select-none z-60"},d.createElement(Ot,null,"Activities"),d.createElement(Ot,{className:"text-xs md:text-sm"},d.createElement(zt,null)),d.createElement(Ot,{className:"relative",onClick:m},d.createElement(Bt,{icons:g}),d.createElement(qt,{visible:e,menus:h,onClickAway:f})))};function rn(e,t={}){const{onEnter:n,onLeave:r}=t,[o,a]=p.exports.useState(!1);return F(e,"mouseenter",(()=>{null==n||n(),a(!0)})),F(e,"mouseleave",(()=>{null==r||r(),a(!1)})),o}const on={top:"mb-1.5 bottom-full left-1/2 transform  -translate-x-1/2",bottom:"mt-1.5 top-full left-1/2 transform  -translate-x-1/2",left:"mr-1.5 top-1/2 transform -translate-y-1/2 right-full",right:"ml-1.5 top-1/2 transform -translate-y-1/2 left-full","top left":"mb-0.5 right-full mr-0.5 bottom-full","top right":"mb-0.5 left-full ml-0.5 bottom-full","bottom left":"mt-0.5 right-full mr-0.5 top-full","bottom right":"mt-0.5 left-full ml-0.5 top-full"},an=({title:e,direction:t="right",children:n,className:r})=>{const o=p.exports.useRef(null),a=rn(o),l=m("relative",r),s=m("whitespace-nowrap py-0.5 px-1.5 absolute  text-ubt-grey text-opacity-90 text-sm bg-ub-grey bg-opacity-70 border-gray-400 border border-opacity-40 rounded-md",on[t]);return d.createElement("div",{ref:o,className:l},n,a&&d.createElement("div",{className:s},e))};const ln=({onClick:e,isOpen:t,app:n,isMinimized:r})=>{const o=p.exports.useRef(null),[a,l]=p.exports.useState(!1),{run:s}=$e((()=>{l(!1)}),1e3),i=m("w-auto p-2 outline-none relative transition hover:bg-white hover:bg-opacity-10 rounded",{"bg-white bg-opacity-10":t}),c=p.exports.useCallback((()=>{r||t||(l(!0),s()),null==e||e(n.id,n)}),[e,n.id,n,r,t]);return d.createElement(an,{className:"m-1",title:n.title,direction:"left"},d.createElement("div",{"data-target":Se,tabIndex:0,ref:o,onClick:c,className:i,id:`sidebar-app-${n.id}`},"string"==typeof n.icon?d.createElement(d.Fragment,null,d.createElement("img",{className:"w-7",src:n.icon,alt:n.title}),a&&d.createElement("img",{className:"scalable-app-icon w-7 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:n.icon,alt:n.title})):n.icon,t&&d.createElement("div",{className:"w-1 h-1 absolute left-0 top-1/2 bg-ub-orange rounded-sm"})))},sn=({onEnter:e,onLeave:t,children:n})=>{const r=p.exports.useRef(null);return rn(r,{onEnter:e,onLeave:t}),d.createElement("div",{ref:r,style:{width:Me.sidebar},className:"h-full absolute top-0 right-0  z-40"},n)},cn=({onClick:e})=>d.createElement("div",{className:"absolute bottom-0"},d.createElement(an,{title:"Show Applications"},d.createElement("div",{className:"w-10 h-10 rounded m-1 hover:bg-white hover:bg-opacity-10 flex items-center justify-center",onClick:e},d.createElement("img",{className:"w-7",src:J("/themes/Yaru/system/view-app-grid-symbolic.svg"),alt:"Ubuntu view app"}))));const pn=()=>{const[{favoriteApps:e,appMap:t,openedAppMap:n,openedApps:r,minimizedApps:o,allAppsScreen:a},l]=Ct(),[i,c]=p.exports.useState(!1),u=m("desktop-sidebar select-none h-full pt-7 flex flex-col justify-start items-center border-black border-opacity-60 bg-black bg-opacity-50"),f=p.exports.useMemo((()=>Object.keys(o).map((e=>t[e])).filter((t=>!e.find((e=>e.id===t.id))))),[o]),g=p.exports.useCallback(((e,t)=>{l.openApp(e,t)}),[l]),h=p.exports.useCallback((()=>{l.setAllAppsScreen(!a)}),[a]),b=p.exports.useMemo((()=>({onEnter:()=>{c(!0)},onLeave:()=>{c(!1)}})),[c]),w=p.exports.useMemo((()=>r.every((e=>{if(!e||o[e.id])return!0;const t="number"==typeof e.rect.width?e.rect.width:window.innerWidth*Number.parseFloat(`${e.rect.width}`)/100;return("number"==typeof e.windowPosition.left?e.windowPosition.left:window.innerWidth*Number.parseFloat(`${e.windowPosition.left}`)/100)<window.innerWidth-t-Me.sidebar}))),[r,o]);return d.createElement(sn,s({},b),d.createElement(Le,{duration:500,enterClassName:"desktop-sidebar-show",leaveClassName:"desktop-sidebar-leave",exist:!0,visible:i||w},d.createElement("div",{className:u},e.map((e=>d.createElement(ln,{isOpen:!!n[e.id],isMinimized:!!o[e.id],onClick:g,key:e.id,app:e}))),f.map((e=>d.createElement(ln,{isOpen:!!n[e.id],isMinimized:!!o[e.id],onClick:g,key:e.id,app:e}))),d.createElement(cn,{onClick:h}))))};const un=()=>{const[{backgroundImage:e,lockScreen:t},n]=Ct(),r=p.exports.useCallback((()=>{n.setLockScreen(!1)}),[n]);return d.createElement(Le,{visible:t,duration:200,enterClassName:"lock-screen-show",leaveClassName:"lock-screen-leave"},d.createElement("div",{style:{backgroundImage:`url(${e})`},onClick:r,onKeyPress:r,className:"lock-screen absolute w-full h-full outline-none select-none top-0 right-0 overflow-hidden m-0 p-0 bg-opacity-50"},d.createElement("div",{className:"lock-screen-content flex flex-col justify-center items-center text-white"},d.createElement("div",{className:"text-7xl"},d.createElement(zt,{type:"time"})),d.createElement("div",{className:"mt-4 text-xl font-medium"},d.createElement(zt,{type:"date"})),d.createElement("div",{className:" mt-16 text-base"},"Click or Press a key to unlock"))))},dn=({isMaximized:e,onMaximize:t,onMinimize:n,onClose:r,className:o})=>{const a=p.exports.useCallback((n=>{null==t||t(!e,n)}),[t,e]),l=m(o,"flex justify-center items-center");return d.createElement("div",{onClick:S,"data-target":Ie,className:l},d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center h-5 w-5 items-center",onClick:n},d.createElement("img",{draggable:!1,src:J("/themes/Yaru/window/window-minimize-symbolic.svg"),alt:"ubuntu window minimize"})),d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center  h-5 w-5 items-center",onClick:a},e?d.createElement("img",{draggable:!1,src:J("/themes/Yaru/window/window-restore-symbolic.svg"),alt:"ubuntu window restore"}):d.createElement("img",{draggable:!1,src:J("/themes/Yaru/window/window-maximize-symbolic.svg"),alt:"ubuntu window maximize"})),d.createElement("button",{className:"mx-1.5 focus:outline-none cursor-default bg-ub-orange bg-opacity-90 hover:bg-opacity-100 rounded-full flex justify-center h-5 w-5 items-center",onClick:r},d.createElement("img",{draggable:!1,src:J("/themes/Yaru/window/window-close-symbolic.svg"),alt:"ubuntu window close"})))},mn=e=>{var t=e,{title:n,className:r}=t,o=c(t,["title","className"]);const a=m("bg-ub-window-title border-white border-opacity-5 py-1.5 text-white w-full select-none flex  justify-center items-center",r),l=p.exports.useCallback((e=>{var t;null==(t=o.onMaximize)||t.call(o,!o.isMaximized,e)}),[o.onMaximize,o.isMaximized]);return d.createElement("div",{"data-target":Re,onDoubleClick:l,style:{paddingLeft:100,paddingRight:100},className:a},d.createElement("div",{className:"flex justify-center text-sm font-bold"},n),d.createElement(dn,s({className:"absolute top-1 right-1"},o)))};const fn=({children:e,className:t})=>{const n=m("w-full flex-grow z-20 max-h-full overflow-y-auto window-main-view bg-ub-cool-grey",t);return d.createElement("div",{className:n},e)};function gn(e,{filterMoving:t,onMoveStart:n,onMoving:r,onMoveEnd:o}={}){F(e,"mousedown",p.exports.useCallback((e=>{if(t&&!t(e))return;null==n||n(e);const{width:a,left:l,top:s,height:i}=e.currentTarget.getBoundingClientRect(),c=e.clientX,p=e.clientY,u=e=>{const t=e.clientX,n=e.clientY,o=t-c,u=n-p;null==r||r({moveX:t,moveY:n,offsetX:o,offsetY:u,left:l+o,top:s+u,width:a,height:i},e)},d=e=>{null==o||o(e),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}),[]))}var hn=p.exports.forwardRef(((e,t)=>{var n=e,{children:r,onMoveStart:o,onMoveEnd:a,onMoving:l,filterMoving:i,className:u,style:m}=n,f=c(n,["children","onMoveStart","onMoveEnd","onMoving","filterMoving","className","style"]);const g=p.exports.useRef(null);return gn(t||g,{onMoveStart:o,onMoveEnd:a,onMoving:l,filterMoving:i}),d.createElement("div",s({ref:t||g,style:m,className:u},f),r)}));const bn=["t","r","b","l","lt","lb","rb","rt"],wn=bn.map((e=>{const t=e.includes("l"),n=e.includes("r"),r=e.includes("t"),o=e.includes("b");return{className:m("absolute transform z-60 cursor-move",{"left-0 -translate-x-1/2":t,"top-0 -translate-y-1/2":r,"right-0 translate-x-1/2":n,"bottom-0 translate-y-1/2":o,"h-full":1===e.length&&(t||n),"h-5":e.includes("t")||e.includes("b"),"w-full":1===e.length&&(r||o),"w-5":e.includes("l")||e.includes("r")}),direction:e}}));var yn=p.exports.forwardRef(((e,t)=>{var n=e,{children:r,className:o,style:a,onMoving:l,onMoveEnd:i,onMoveStart:u,disabled:f=!1}=n,g=c(n,["children","className","style","onMoving","onMoveEnd","onMoveStart","disabled"]);const h=p.exports.useRef(null),b=p.exports.useRef(),w=m("relative",o);return gn(t||h,{filterMoving:e=>{const t=e.target;return!(!t.dataset.direction||!bn.includes(t.dataset.direction))&&(b.current=t.dataset.direction,!0)},onMoveStart:u,onMoving:(e,t)=>{null==l||l(b.current,e,t)},onMoveEnd:i}),d.createElement("div",s({ref:t||h,className:w,style:a},g),!f&&wn.map((({direction:e,className:t})=>d.createElement("div",{key:e,"data-direction":e,className:t}))),r)}));function vn(e){const t=p.exports.useRef(0),[n,r]=p.exports.useState(e),o=p.exports.useCallback((e=>{cancelAnimationFrame(t.current),t.current=requestAnimationFrame((()=>{r(e)}))}),[]);return V((()=>{cancelAnimationFrame(t.current)})),[n,o]}const xn=({app:e,isMaximized:t,isMinimized:n,isFocus:r})=>{const[o,a]=Ct(),{defaultAppWindow:l}=o,c=p.exports.useRef(l);c.current=l;const[u,f]=vn((()=>({left:e.windowPosition.left,top:e.windowPosition.top}))),[g,h]=vn((()=>({width:e.rect.width,height:e.rect.height}))),[b,w]=p.exports.useState(!0);p.exports.useRef(g).current=g;const y=function(e,t=0){const[n,r]=p.exports.useState(e),{run:o,cancel:a}=$e((e=>{r(e)}),t);return p.exports.useEffect((()=>{a(),o(e)}),[e]),n}(t,300),v=p.exports.useRef(null),x=m("m-auto overflow-hidden max-w-full max-h-full absolute window-shadow border-black border-opacity-40 border border-t-0 bg-ub-window-title app-window",t?"z-60 rounded-none":"rounded-lg rounded-b-none",{"not-focus":!r,"z-20 not-focus":!r&&!t,"z-30":r&&!t}),E=p.exports.useMemo((()=>({filterMoving:e=>{const t=e.target;return!!O(t,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===Re}))&&!O(t,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===Ie}))},onMoving:({left:e,top:t})=>{t<Me.navbar&&(t=Me.navbar+1),f({left:e,top:t})},onClick:()=>{a.openApp(e.id,e)}})),[f,Me,e,a]),k=p.exports.useMemo((()=>{const e=t?"100%":g.width||l.width,n=t?"100%":g.height||l.height,r=t?0:u.left&&"number"==typeof u.left?u.left/window.innerWidth*100+"%":u.left,o=t?0:u.top&&"number"==typeof u.top?u.top/window.innerHeight*100+"%":u.top,a="string"==typeof e?window.innerWidth*D(e):e,c=(window.innerWidth-a)/2,p="string"==typeof n?window.innerHeight*D(n):n,d=(window.innerHeight-p)/2;return i(s({width:e,height:n},0===r&&0===o?{left:c,top:d}:{left:r,top:o}),{minWidth:l.minWidth,minHeight:l.minHeight,position:"absolute"})}),[u,t,g,a,l]);p.exports.useEffect((()=>{t||a.updateOpenedApp(e.id,i(s({},e),{rect:{width:k.width,height:k.height},windowPosition:{left:k.left,top:k.top}}))}),[k,t]);const C=p.exports.useMemo((()=>({onClose:()=>{a.closeApp(e.id)},onMaximize:()=>{a.maximizeApp(e.id,e)},onMinimize:()=>{a.minimizeApp(e.id,e)}})),[a,e]),A=p.exports.useMemo((()=>({l:({width:e,offsetX:t,left:n})=>{e-t<c.current.minWidth||(h((n=>({width:e-t,height:n.height}))),f((e=>({top:e.top,left:n}))))},r:({width:e,offsetX:t})=>{h((n=>({width:e+t,height:n.height})))},t:({height:e,offsetY:t,top:n})=>{e-t<c.current.minHeight||(h((n=>({width:n.width,height:e-t}))),f((e=>({top:n,left:e.left}))))},b:({height:e,offsetY:t})=>{h((n=>({width:n.width,height:e+t})))},lb:({width:e,left:t,height:n,offsetX:r,offsetY:o})=>{e-r<c.current.minWidth||(h({width:e-r,height:n+o}),f((e=>({top:e.top,left:t}))))},rb:({width:e,height:t,offsetX:n,offsetY:r})=>{h({width:e+n,height:t+r})},lt:({width:e,height:t,offsetX:n,offsetY:r,top:o,left:a})=>{t-r<c.current.minHeight||e-n<c.current.minWidth||(h({width:e-n,height:t-r}),f({top:o,left:a}))},rt:({width:e,height:t,offsetX:n,offsetY:r,top:o})=>{t-r<c.current.minHeight||(h({width:e+n,height:t-r}),f((e=>({top:o,left:e.left}))))}})),[h,g,f]),N=p.exports.useMemo((()=>({onMoveStart:e=>{const{left:t,top:n}=e.currentTarget.getBoundingClientRect();f((e=>e.left===t&&e.top===n?e:{top:n,left:t}))},onMoving:(e,t)=>{A[e](t)}})),[h,f,A]);p.exports.useEffect((()=>{w(!n)}),[n]);const M=p.exports.useMemo((()=>t||y||n?300:0),[t,y,n]);return d.createElement(Le,{transitionProperty:["width","height","left","top","opacity"],nodeRef:v,enterClassName:"app-window-show",leaveClassName:"app-window-leave",duration:M,visible:b,exist:!0},d.createElement(yn,s({tabIndex:0,"data-appid":e.id,disabled:t,className:x,ref:v,style:k},N),d.createElement(hn,i(s({},E),{className:"flex flex-col w-full h-full"}),d.createElement(mn,i(s({},C),{title:e.title})),d.createElement(fn,null,d.createElement(te,null,"function"==typeof e.render?e.render(e.id):e.component?d.createElement(e.component):null)))))},En=()=>{const e=p.exports.useRef(null),[t,n]=p.exports.useState(""),[r,o]=Ct(),a=p.exports.useCallback((e=>{n(e.target.value)}),[n]),l=p.exports.useCallback((e=>{if(!e.trim())return;if(r.newFolderModalFolderId===pt.Desktop)return void o.addNewFolder(r.newFolderModalFolderId,e,{left:r.mousePosition.clientX,top:r.mousePosition.clientY});const t=r.openedAppMap[r.newFolderModalFolderId],n="string"==typeof t.windowPosition.left?window.innerWidth*D(t.windowPosition.left):t.windowPosition.left,a="string"==typeof t.windowPosition.top?window.innerWidth*D(t.windowPosition.top):t.windowPosition.top;o.addNewFolder(r.newFolderModalFolderId,e,{left:r.mousePosition.clientX-n,top:r.mousePosition.clientY-a})}),[o,r]),s=p.exports.useCallback((()=>{l(t)}),[t]),i=p.exports.useCallback((()=>{o.setNewFolderModal(!1)}),[o]);return ge("enter",(()=>{l(t)}),{target:e}),d.createElement("div",{className:"absolute rounded-md top-1/2 left-1/2 text-center text-white font-light text-sm bg-ub-cool-grey transform -translate-y-1/2 -translate-x-1/2 sm:w-96 w-3/4 z-60"},d.createElement("div",{className:"w-full flex flex-col justify-around items-start px-6 pb-8 pt-6"},d.createElement("span",null,"New folder name"),d.createElement("input",{ref:e,value:t,onChange:a,className:"outline-none mt-4 px-1 w-full  context-menu-bg border-2 border-yellow-700 rounded py-0.5",type:"text",autoComplete:"off",spellCheck:"false",autoFocus:!0})),d.createElement("div",{className:"flex"},d.createElement("div",{onClick:s,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 border-r-0 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Create"),d.createElement("div",{onClick:i,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Cancel")))},kn=pt.Desktop,Cn=()=>d.createElement(mt,{id:kn,wrapperClassName:"pt-8",showEmpty:!1});const An=[{title:"desktop",path:"/desktop",keepAlive:{cacheId:"desktop-page"},exact:!0,component:Nt((()=>{const[e,t]=Ct();return F(window,"resize",(()=>{t.resizeBrowserWindow(window.innerWidth,window.innerHeight)})),F(window,"mousemove",(e=>{Ge(JSON.stringify({x:e.clientX,y:e.clientY}))})),d.createElement("div",{className:"w-full h-full relative left-0 top-0 overflow-hidden"},d.createElement(ae,{src:e.backgroundImage}),d.createElement(Cn,null),d.createElement(nn,null),d.createElement(pn,null),e.openedApps.map((t=>d.createElement(xn,{isFocus:e.focusAppId===t.id,isMaximized:!!e.maximizedApps[t.id],isMinimized:!!e.minimizedApps[t.id],key:t.id,app:t}))),d.createElement(Pt,null),d.createElement(un,null),e.newFolderModal&&d.createElement(En,null))}))},{redirect:"/desktop"}],Nn=[{title:"login",path:"/login",exact:!0,component:d.lazy((()=>I((()=>import("./index.16a18b52.js")),["assets/index.16a18b52.js","assets/vendor.06d83442.js"])))}],[Mn,In]=u((e=>({pushRoutes:t=>i(s({},e),{routes:[...e.routes,...Array.isArray(t)?t:[t]]}),setMatchedRoutes:(t,n)=>i(s({},e),{matchedRoutes:t,currentRoute:n}),reset:()=>({currentRoute:{},routes:Nn,matchedRoutes:[]})})),{routes:Nn,currentRoute:{},matchedRoutes:[]}),Rn=({children:e})=>d.createElement(C,{basename:"/web-ubuntu/"},e,d.createElement(Sn,null)),Pn=()=>{const[e]=Mn(),{routes:t}=e,n=p.exports.useMemo((()=>re(t)),[t]);return d.createElement(te,{fallback:d.createElement(ee,{loading:!0,loadingClassName:"bg-black"})},n)},Sn=()=>{const[e,t]=Mn(),[,n]=Lt(),{routes:r}=e,{pathname:o}=A();return p.exports.useEffect((()=>{const e=oe(r,o).map((e=>e.route)),a=e[e.length-1];t.setMatchedRoutes(e,a);const l=null==a?void 0:a.title;l&&n.setTitle(l)}),[o,r,t]),null},Dn=({children:e})=>d.createElement(_t,null,d.createElement(tn,null,d.createElement(B,null,d.createElement(In,null,e)))),Tn=N.create({timeout:26e3,baseURL:"/mock"});function zn(e){const{config:t}=e;return t.headers.noRetry?Promise.reject(e):t.headers.retryCount<=3?Tn(t):Promise.reject(e)}function On(e,t){e>3&&it.error({content:t})}let jn,Fn;const Yn=e=>{var t=e,{loadingClassName:n}=t,r=c(t,["loadingClassName"]);const o=m("bg-black",n);return d.createElement(ee,s({loadingClassName:o},r))};function $n(e,t=[],n={}){const r=p.exports.useMemo((()=>({loading:n.loading||!1,err:n.err||null,data:void 0})),[]),o=p.exports.useRef(0),a=xe(),[l,c]=p.exports.useState(r);return[l,p.exports.useCallback(((...t)=>(c((e=>i(s({},e),{loading:!0}))),o.current++,e(...t).finally((()=>{o.current--})).then((e=>(0===o.current&&a()&&c((t=>i(s({},t),{data:e,loading:!1}))),[null,e])),(e=>(0===o.current&&a()&&c((t=>i(s({},t),{err:e,loading:!1}))),[e,null]))))),t)]}function Ln(e){return Tn({url:"/user/login",method:"post",data:e})}function _n(){return Tn({url:"/user/getUserInfo",method:"get"})}const Wn=["/login"],Vn=["/login"],Xn=({children:e})=>{const[t,n]=en(),[,r]=Mn(),{pathname:o}=A(),[,a]=$n(_n,[]),{isLogin:l}=t;return p.exports.useEffect((()=>{l?r.pushRoutes(An):r.reset()}),[l,r]),p.exports.useEffect((()=>{!function([e,t]){Tn.interceptors.request.eject(jn),Tn.interceptors.response.eject(Fn),jn=Tn.interceptors.request.use((t=>{const n=s({},t);if(window.axiosPromiseArr&&Array.isArray(window.axiosPromiseArr)){const e=window.axiosPromiseArr.findIndex((e=>e.url===n.url)),t=window.axiosPromiseArr[e];t&&(t.cancel(),window.axiosPromiseArr.splice(e,1))}return n.cancelToken=new N.CancelToken((e=>{window.axiosPromiseArr=window.axiosPromiseArr||[],window.axiosPromiseArr.push({url:n.url,cancel:e})})),n.headers.token=e.token,"number"==typeof n.headers.retryCount?n.headers.retryCount++:n.headers.retryCount=0,n}),(e=>(On(e.config.headers.retryCount,e.message),zn(e.config)))),Fn=Tn.interceptors.response.use((e=>{const{data:t}=e;return t}),(e=>{if(N.isCancel(e))return Promise.reject(e);const{response:n}=e,{status:r,data:o}=n;return 400===r?(it.error({content:o.message}),Promise.reject(e)):401===r?(t.logout(),it.error({content:o.message}),Promise.reject(e)):(e.message.includes("timeout")&&(e.message="请求超时"),On(e.config.headers.retryCount,e.message),zn(e))}))}([t,n])}),[t,n]),p.exports.useEffect((()=>{(async()=>{if(t.isLogin&&!t.user){const[,e]=await a();e&&n.setUser(e.data)}})()}),[t,n,a]),l?Vn.includes(o)?d.createElement(g,{to:"/desktop"}):d.createElement(Yn,{loading:!t.isLogin||!t.user},e):Wn.includes(o)?d.createElement(d.Fragment,null,e):d.createElement(g,{to:"/login"})};const Bn=({children:e})=>{const t=p.exports.useRef(null),[n,r]=Lt();return function(e,t){const n=p.exports.useRef(document.title);document.title=e,p.exports.useEffect((()=>{if(t&&t.restoreOnUnmount)return()=>{document.title=n.current}}),[])}(n.title),p.exports.useEffect((()=>{r.setUbuntuInstance(t)}),[]),p.exports.useEffect((()=>{t.current.style.filter=`brightness(${3/400*n.config.brightness+.25})`}),[n.config.brightness]),d.createElement("div",{ref:t,id:"web-ubuntu"},e)};I((()=>import("./mock.6ccaa437.js")),["assets/mock.6ccaa437.js","assets/vendor.06d83442.js"]).then((()=>{x.render(d.createElement(d.StrictMode,null,d.createElement(q,null,d.createElement(Dn,null,d.createElement(Bn,null,d.createElement(Rn,null,d.createElement(Xn,null,d.createElement(Pn,null))))))),document.getElementById("root"))}));export{ft as F,J as a,en as b,ge as c,Ct as d,Ln as r,$n as u};
