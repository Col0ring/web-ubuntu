var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&l(e,n,t[n]);return e},i=(e,r)=>t(e,n(r)),c=(e,t)=>{var n={};for(var l in e)o.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&r)for(var l of r(e))t.indexOf(l)<0&&a.call(e,l)&&(n[l]=e[l]);return n};import{r as p,O as u,R as d,c as m,S as f,a as g,b as h,m as b,d as w,w as y,e as v,f as x,l as E,g as k,B as A,u as C,h as N}from"./vendor.06d83442.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const M={},I=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/web-ubuntu/${e}`)in M)return;M[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},P=/macintosh|mac os x/i.test(navigator.userAgent);function R(){}function S(e){e.stopPropagation()}function D(e){return+e.slice(0,e.length-1)/100}function T(e){let{offsetTop:t,offsetLeft:n}=e,r=e.offsetParent;for(;r;)t+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent;return{offsetTop:t,offsetLeft:n}}function j(e){return(t=e)&&"object"==typeof t&&Object.keys(t).includes("current")?e.current:e;var t}function z(e,t){let n=e;for(;n;){if(t(n))return n;n=n.parentNode}return null}function F(e,t){try{return JSON.parse(e)}catch(n){return t}}function O(e,t,n,r={}){const o=p.exports.useRef();o.current=n,p.exports.useEffect((()=>{const n=j(e);if(!n)return;const a=e=>{var t;return null==(t=o.current)?void 0:t.call(o,e)};return n.addEventListener(t,a,{capture:r.capture,once:r.once,passive:r.passive}),()=>{n.removeEventListener(t,a,{capture:r.capture})}}),[e,t,r.capture,r.once,r.passive])}var Y,$;($=Y||(Y={})).CREATE="CREATE",$.CREATED="CREATED",$.ACTIVE="ACTIVE",$.ACTIVATED="ACTIVATED",$.DEACTIVATED="DEACTIVATED",$.DESTROY="DESTROY";const[L,_,W]=u((e=>({addCacheElement(t,n){const r=e[t];if(r){if(r.status===Y.DESTROY){const{doms:o}=r;return o.forEach((e=>{var t;null==(t=e.parentNode)||t.removeChild(e)})),i(s({},e),{[t]:{cacheId:t,doms:[],scrolls:{x:0,y:0},element:n,status:Y.CREATE}})}return e}return i(s({},e),{[t]:{cacheId:t,doms:[],element:n,scrolls:{x:0,y:0},status:Y.CREATE}})},addCacheDoms:(t,n)=>e[t]?i(s({},e),{[t]:i(s({},e[t]),{doms:n,status:Y.CREATED})}):e,renderCacheDoms(t,{scroll:n,parentNode:r}){const o=e[t],{doms:a}=o,{scrolls:l}=o;return a.forEach((e=>r.appendChild(e))),n&&r.scrollTo(l.x,l.y),i(s({},e),{[t]:i(s({},o),{status:Y.ACTIVE})})},cacheScroll(t,n){const r=n.target;return i(s({},e),{[t]:i(s({},e[t]),{scrolls:{x:r.scrollLeft,y:r.scrollTop}})})},activate:t=>i(s({},e),{[t]:i(s({},e[t]),{status:Y.ACTIVATED})}),deactivate:t=>i(s({},e),{[t]:i(s({},e[t]),{status:Y.DEACTIVATED})}),refresh:t=>i(s({},e),{[t]:i(s({},e[t]),{status:Y.DESTROY})}),clear:()=>Object.keys(e).reduce(((t,n)=>(t[n]=i(s({},e[n]),{status:Y.DESTROY}),t)),{})})),{});function V(e){const t=p.exports.useRef(e);t.current=e,p.exports.useEffect((()=>t.current),[])}const B=({children:e,cacheId:t,className:n,style:r,scroll:o=!1})=>{const[a,l]=L(),s=p.exports.useRef(null);O(s,"scroll",(e=>{l.cacheScroll(t,e)}));const i=a[t],c=null==i?void 0:i.status,u=null==i?void 0:i.doms;return p.exports.useEffect((()=>{!u||c!==Y.CREATED&&c!==Y.ACTIVATED?c&&c!==Y.DESTROY||l.addCacheElement(t,d.createElement(d.Fragment,null,e)):l.renderCacheDoms(t,{scroll:o,parentNode:s.current})}),[u,c,l,t,o,e]),p.exports.useEffect((()=>{(null==i?void 0:i.status)===Y.DEACTIVATED&&l.activate(t)}),[c,t,l,null==i?void 0:i.status]),V((()=>{l.deactivate(t)})),d.createElement("div",{id:`keepalive-cache-${t}`,ref:s,className:n,style:r})};var X=W((({children:e})=>{const[t,n]=L(),r=p.exports.useMemo((()=>Object.values(t).filter((e=>e&&e.status!==Y.DESTROY))),[t]);return d.createElement(d.Fragment,null,e,r.map((({cacheId:e,doms:t,element:r})=>d.createElement("div",{id:`element-cache-${e}`,key:e,ref:r=>{if(r&&0===t.length){const t=[...r.childNodes];n.addCacheDoms(e,t)}}},r))))}));const U=({title:e,message:t})=>d.createElement("div",{className:"p-5 w-full h-full flex flex-col items-center justify-center bg-ub-cool-grey"},d.createElement("p",{className:"text-red-500 text-xl"},e),d.createElement("p",{className:"text-ubt-grey mt-3 text-sm"},t)),H={hasError:!1,error:null};class J extends d.Component{constructor(){var e;super(...arguments),l(this,"symbol"!=typeof(e="state")?e+"":e,H)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{fallback:e,showError:t,children:n}=this.props,{error:r,hasError:o}=this.state,a=t?null==r?void 0:r.message:"Something Wrong!",l=t?null==r?void 0:r.stack:"it looks like there are some problems, please try again later.";return o?e||d.createElement(U,{title:a,message:l}):n}}function q(e){return e.startsWith(".")?e:`/${`/web-ubuntu/${e}`.split("/").filter(Boolean).join("/")}`}var K,G;function Q(e,t=0,...n){const r=function(e,t=0){const n=p.exports.useRef(K.Free),r=p.exports.useRef(),o=p.exports.useRef(e),a=p.exports.useCallback((()=>n.current),[]),l=p.exports.useCallback(((...e)=>{n.current=K.Pending,r.current&&clearInterval(r.current),r.current=setInterval((()=>{n.current=K.Calling,o.current(...e)}),t)}),[t]),s=p.exports.useCallback((()=>{n.current=K.Canceled,r.current&&clearInterval(r.current)}),[]);return p.exports.useEffect((()=>{o.current=e}),[e]),V(s),{currentStatus:a,run:l,cancel:s}}(e,t);return p.exports.useEffect((()=>{r.run(...n)}),[n,r,t]),r}(G=K||(K={})).Free="free",G.Pending="pending",G.Canceled="cancelled",G.Calling="calling";const Z=({children:e,delay:t=500,dotNumber:n=3,className:r})=>{const[o,a]=p.exports.useState("");Q((()=>{a((e=>e===".".repeat(n)?"":`${e}.`))}),t);const l=m("ml-1",r);return d.createElement(d.Fragment,null,e,d.createElement("span",{className:l},o))},ee=({tips:e="loading",loading:t,children:n,className:r,loadingClassName:o})=>{const a=m("relative w-full h-full",r),l=m("absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center",o);return d.createElement("div",{className:a},t&&d.createElement("div",{style:{zIndex:1e4},className:l},d.createElement("img",{className:"animate-spin w-20",src:q("/themes/Yaru/status/process-working-symbolic.svg"),alt:"Loading Spinner"}),d.createElement("p",{className:"text-white"},d.createElement(Z,null,e))),n)},te=({children:e,fallback:t})=>d.createElement(J,null,d.createElement(p.exports.Suspense,{fallback:t||d.createElement(ee,{loading:!0})},e)),ne=({children:e})=>d.createElement(d.Fragment,null,e);function re(e,t,n){return e?d.createElement(f,s({},n),e.map(((e,r)=>e.redirect?d.createElement(g,{key:e.key||r,to:e.redirect}):d.createElement(h,{key:e.key||r,path:e.path,exact:e.exact,strict:e.strict,render:r=>{let o;e.routes&&(o=d.createElement(te,null,re(e.routes,t,n)));const a=()=>e.render?e.render(i(s(s({},r),t),{children:o,route:e})):d.createElement(e.component||ne,e.component?i(s(s({},r),t),{route:e}):null,o);return e.keepAlive?d.createElement(B,i(s({},e.keepAlive),{style:{width:"100%",height:"100%"}}),a()):a()}})))):null}function oe(e,t){const n=[];return e.some((e=>{const r=e.path?b(t,e):n.length?n[n.length-1].match:w.computeRootMatch(t);return r&&(n.push({route:e,match:r}),e.routes&&n.push(...oe(e.routes,t))),r})),n}const ae=({src:e})=>d.createElement("div",{style:{backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center"},className:"absolute top-0 right-0 overflow-hidden h-full w-full -z-10"}),le=y({reducerMapper:v}),se={"wall-1":q("/images/wallpapers/wall-1.jpg"),"wall-2":q("/images/wallpapers/wall-2.png"),"wall-3":q("/images/wallpapers/wall-3.jpg"),"wall-4":q("/images/wallpapers/wall-4.jpg"),"wall-5":q("/images/wallpapers/wall-5.jpg"),"wall-6":q("/images/wallpapers/wall-6.png"),"wall-7":q("/images/wallpapers/wall-7.png"),"wall-8":q("/images/wallpapers/wall-8.jpg")},ie={width:95,height:74},ce={width:"85%",height:"80%",minWidth:1*window.innerWidth/3,minHeight:1*window.innerHeight/3},pe=30,ue=52,de="edit-buttons",me="toolbar",fe="folderApp",ge="sidebarApp";var he,be,we,ye;(be=he||(he={})).Application="/application",be.Desktop="/desktop",be.Trash="/Trash",be.Settings="/application/Settings",(ye=we||(we={})).Link="link",ye.Js="js",ye.Php="php",ye.App="app";const ve={js:q("/themes/filetypes/js.png"),php:q("/themes/filetypes/php.png"),zip:q("/themes/filetypes/zip.png"),txt:q("/themes/filetypes/file.svg")},xe=({title:e,icon:t,img:n})=>d.createElement("div",{className:"flex-grow flex flex-col justify-center items-center h-full w-full"},d.createElement("div",{className:"w-24"},t||d.createElement("img",{className:"w-full",src:n||q("/themes/Yaru/status/empty-folder.svg"),alt:"ubuntu-empty"})),d.createElement("span",{className:"font-bold mt-4 text-xl px-1 text-gray-400"},e)),Ee=["click"];function ke(e,t,n=Ee){const r=p.exports.useRef(t);r.current=t,p.exports.useEffect((()=>{const t=t=>{const n=j(e);n&&!n.contains(t.target)&&r.current(t)};for(const e of n)document.addEventListener(e,t);return()=>{for(const e of n)document.removeEventListener(e,t)}}),[n,e])}const Ae={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ce={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Ne={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function Me(e,t){if(!e.key)return!1;if("number"==typeof t)return e.keyCode===t;const n=t.split(".");let r=0;for(const o of n){const t=Ne[o],n=Ce[o],a=Ae[o];(t&&t(e)||(n&&Array.isArray(n)?n.includes(e.key):n===e.key)||(a&&Array.isArray(a)?a.includes(e.keyCode):a===e.keyCode)||e.key.toUpperCase()===o.toUpperCase())&&r++}return r===n.length}const Ie="keydown";function Pe(e,t=R,n={}){const{event:r=Ie,target:o}=n;O(o||document,r,(n=>{if(function(e){return"function"==typeof e?e:"string"==typeof e||"number"==typeof e?t=>Me(t,e):Array.isArray(e)?t=>e.some((e=>Me(t,e))):e?()=>!0:()=>!1}(e)(n))return t(n)}))}const Re=({className:e,style:t,app:n,onOpen:r,onPaste:o,onCopy:a})=>{const l=m("p-1 m-px z-10 bg-white bg-opacity-0 hover:bg-opacity-20 focus:bg-ub-orange focus:bg-opacity-50 focus:border-yellow-700 focus:border-opacity-100 border border-transparent outline-none rounded select-none w-24 flex flex-col  items-center text-xs font-normal text-white",e),s=p.exports.useRef(null),i=p.exports.useCallback((()=>{null==r||r(n.id,n)}),[r,n]);return Pe("enter",(()=>{null==r||r(n.id,n)}),{target:s}),Pe(P?"meta.c":"ctrl.c",(e=>{e.stopPropagation(),null==a||a(n.id,n)}),{target:s}),Pe(P?"meta.v":"ctrl.v",(e=>{e.stopPropagation(),null==o||o(n.id,n)}),{target:s}),d.createElement("div",{ref:s,style:t,tabIndex:0,className:l,onDoubleClick:i},d.createElement("img",{className:"mb-1 w-10",src:n.icon,alt:n.title}),d.createElement("span",{className:"mt-1 w-full text-center text-cut"},n.title))};(async()=>{window.ResizeObserver||(window.ResizeObserver=(await I((()=>import("./ResizeObserver.es.1591e951.js")),[])).default)})();const Se={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const[De,Te,je]=u((e=>({setDragArea:t=>i(s({},e),{dragArea:t})})),{dragArea:{width:0,height:0,limitRange:{x:[0,0],y:[0,0]}}});function ze(){const e=p.exports.useRef(!1),t=p.exports.useCallback((()=>e.current),[]);return p.exports.useEffect((()=>(e.current=!0,()=>{e.current=!1})),[]),t}var Fe=je((e=>{var t=e,{children:n,limitRange:r,className:o}=t,a=c(t,["children","limitRange","className"]);const[,l]=De(),i=p.exports.useRef(null),{width:u,height:f}=function(e){const[t,n]=p.exports.useState(Se);return p.exports.useEffect((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0];if(!t)return;const{x:r,y:o,width:a,height:l,top:s,left:i,bottom:c,right:p}=t.contentRect;n({x:r,y:o,width:a,height:l,top:s,left:i,bottom:c,right:p})}));return t.observe(e.current),()=>{t.disconnect()}}),[e]),t}(i),g=m("relative w-full h-full left-0 top-0",o),[h]=function(e={}){const t=p.exports.useRef(e);t.current=e;const[n,r]=p.exports.useState(!1),o=p.exports.useCallback((e=>({onDragOver:e=>{var n,r;e.preventDefault(),null==(r=(n=t.current).onDragOver)||r.call(n,e)},onDragEnter:e=>{var n,o;e.preventDefault(),r(!0),null==(o=(n=t.current).onDragEnter)||o.call(n,e)},onDragLeave:e=>{var n,o;e.preventDefault(),r(!1),null==(o=(n=t.current).onDragLeave)||o.call(n,e)},onDrop:n=>{var o,a;n.preventDefault(),n.persist(),r(!1),null==(a=(o=t.current).onDrop)||a.call(o,n),e(n.dataTransfer,n)},onPaste:n=>{var r,o;n.persist(),null==(o=(r=t.current).onPaste)||o.call(r,n),e(n.clipboardData,n)}})),[r]),a=ze(),l=p.exports.useCallback(((e,n)=>{const r=e.getData("text/uri-list"),o=e.getData("custom");if(o&&t.current.onDom){let e=o;try{e=JSON.parse(o)}catch(l){e=o}t.current.onDom(e,n)}else r&&t.current.onUri?t.current.onUri(r,n):e.files&&e.files.length&&t.current.onFiles?t.current.onFiles(Array.from(e.files),n):e.items&&e.items.length&&t.current.onText&&e.items[0].getAsString((e=>{a()&&t.current.onText(e,n)}))}),[a]);return[p.exports.useMemo((()=>o(l)),[l,o]),{isHovering:n}]}(a);return p.exports.useEffect((()=>{l.setDragArea({width:u,height:f,limitRange:r||{x:[0,u],y:[0,f]}})}),[u,r,f,l]),d.createElement("div",s({ref:i,className:g},h),n)}));const Oe=({data:e,children:t,onDragEnd:n,onDragStart:r,onDrag:o,onValid:a,className:l,style:c,nodeRef:u,defaultPosition:f,onPositionChange:g})=>{const[h]=De(),{dragArea:b}=h,w=p.exports.useRef(g);w.current=g;const y=p.exports.useRef(null),v=u||y,[x,E]=p.exports.useState((()=>f||{left:0,top:0})),[k,A]=p.exports.useState({left:0,top:0}),C=p.exports.useCallback(((e,t)=>{const n=t.currentTarget;A({left:t.clientX-n.offsetLeft,top:t.clientY-n.offsetTop}),null==r||r(e,t)}),[r,A]),N=p.exports.useCallback((async(e,t)=>{let r=t.clientX-k.left,o=t.clientY-k.top;const{x:l,y:s}=b.limitRange,i=v.current.getBoundingClientRect();await(null==a?void 0:a(e,t))&&(null==n||n(e,t),r<l[0]&&(r=0),r>l[1]-i.width&&(r=l[1]-i.width),o>s[1]-i.height&&(o=s[1]-i.height),o<s[0]&&(o=s[0]),E({left:r,top:o}))}),[k.left,k.top,b.limitRange,v,a,n]),M=p.exports.useCallback(((e,t)=>{null==o||o(e,t)}),[o]),[,I]=function(e){const[t,n]=p.exports.useState(!1);return[t,p.exports.useCallback((t=>({draggable:"true",onDragStart:r=>{var o;n(!0),null==(o=null==e?void 0:e.onDragStart)||o.call(e,t,r),r.dataTransfer.setData("custom",JSON.stringify(t)),(null==e?void 0:e.customDragData)&&"object"==typeof e.customDragData&&Object.keys(e.customDragData).forEach((t=>{r.dataTransfer.setData(t,e.customDragData[t])}))},onDrag:n=>{var r;null==(r=null==e?void 0:e.onDrag)||r.call(e,t,n)},onDragEnd:r=>{var o;n(!1),null==(o=null==e?void 0:e.onDragEnd)||o.call(e,t,r)}})),[e])]}({onDragStart:C,onDragEnd:N,onDrag:M}),P=m(l,"absolute"),R=p.exports.useMemo((()=>{const{x:e,y:t}=b.limitRange;return s({left:"string"==typeof x.left?x.left:x.left/e[1]*100+"%",top:"string"==typeof x.top?x.top:x.top/t[1]*100+"%"},c)}),[c,x,b.limitRange]);p.exports.useEffect((()=>{var e;null==(e=w.current)||e.call(w,x)}),[x]),p.exports.useEffect((()=>{f&&E(f)}),[null==f?void 0:f.top,null==f?void 0:f.left]);const S=p.exports.useMemo((()=>e),[e]);return d.createElement("div",i(s({ref:v},I(S)),{style:R,className:P}),t)};const Ye=()=>d.createElement("div",{className:"w-full flex justify-center"},d.createElement("div",{className:"border-t border-gray-900 py-1 w-4/5"}));const $e=({children:e,className:t,menus:n,nodeRef:r,onItemClick:o,contextmenuOptionsRewrite:a,rewriteVisible:l,rewritePosition:s})=>{const[i,u]=p.exports.useState({left:0,top:0}),[f,g]=p.exports.useState(!1),h=p.exports.useRef(null),b=r||h,w=m("relative",t),y=a||{},{onClick:v}=y,x=c(y,["onClick"]),E=v||(()=>{g(!1)});return function(e,{onClick:t,onContextMenu:n,onClickAway:r}={}){O(e,"contextmenu",(e=>{e.preventDefault(),null==n||n(e)})),O(e,"click",(e=>{e.preventDefault(),null==t||t(e)})),ke(e,(e=>{null==r||r(e)}),["click","contextmenu"])}(b,a?x:{onContextMenu(e){g(!0);const t=e.currentTarget,{offsetLeft:n,offsetTop:r}=T(t);u({left:e.clientX-n,top:e.clientY-r})},onClickAway(){g(!1)}}),d.createElement("div",{ref:b,onClick:E,className:w},e,(l||f)&&d.createElement("div",{className:"context-menu-bg whitespace-nowrap border font-light border-gray-900 rounded text-white py-4 absolute text-sm",style:{zIndex:1e5,left:(null==s?void 0:s.left)||i.left,top:(null==s?void 0:s.top)||i.top}},n.map((({key:e,title:t,render:n,onClick:r,icon:a,disabled:l})=>d.createElement("div",{key:e,onClick:t=>{l||(null==r||r(t),null==o||o(e,t))}},n?n():d.createElement("div",{className:"px-6 py-0.5 hover:bg-ub-warm-grey hover:bg-opacity-20 mb-1.5 "+(l?"text-gray-400":"")},a,d.createElement("span",null,t)),d.createElement(Ye,null))))))};function Le(e,t={}){const{defaultValue:n,map:r=(e=>e)}=t,o=e[0].toUpperCase()+e.slice(1),a=`web-ubuntu-${e}-key`;return{[`set${o}`](e){localStorage.setItem(a,e)},[`get${o}`](){var e,t;return null!=(t=null!=(e=r(localStorage.getItem(a)))?e:n)?t:null},[`remove${o}`](){localStorage.removeItem(a)}}}const{setFolderDragTarget:_e,removeFolderDragTarget:We,getFolderDragTarget:Ve}=Le("folderDragTarget",{defaultValue:""});var Be,Xe;function Ue(e,t=0){const n=p.exports.useRef(Be.Free),r=p.exports.useRef(),o=p.exports.useRef(e);o.current=e;const a=p.exports.useCallback((()=>n.current),[]),l=p.exports.useCallback(((...e)=>{n.current=Be.Pending,r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{n.current=Be.Called,o.current(...e)}),t)}),[t]),s=p.exports.useCallback((()=>{n.current=Be.Canceled,r.current&&clearTimeout(r.current)}),[]);return V(s),{currentStatus:a,run:l,cancel:s}}(Xe=Be||(Be={})).Free="free",Xe.Pending="pending",Xe.Canceled="cancelled",Xe.Called="called";const He=({children:e,visible:t=!1,exist:n=!1,duration:r,transitionProperty:o=["all"],leaveClassName:a="",enterClassName:l="",nodeRef:c})=>{const[u,f]=p.exports.useState(!1),{run:g,cancel:h}=Ue((e=>{f(e)}),r),b=p.exports.useRef(null),w=c||b;if(p.exports.useEffect((()=>{var e;h(),t?(null==(e=w.current)||e.scrollTop,f(t)):g(t)}),[t,g,h,w]),d.isValidElement(e)){if(d.Children.only(e)){const{props:c}=e,p=m(c.className,{hidden:n&&!(t||u),[l]:u,[a]:!t});return n||t||u?d.cloneElement(e,i(s({},c),{ref:w,style:Object.assign({},c.style,{transitionProperty:r?o.join(","):void 0,transitionDuration:`${r}ms`}),className:p})):null}return d.createElement(d.Fragment,null,d.Children.map(e,(e=>{const{props:c}=e,p=m(c.className,{hidden:n&&!(t||u),[l]:u,[a]:!t});return n||t||u?d.cloneElement(e,i(s({},c),{style:Object.assign({},c.style,{transitionProperty:r?o.join(","):void 0,transitionDuration:`${r}ms`}),className:p})):null})))}return d.createElement(d.Fragment,null,e)},Je={error:"bg-red-600 active:bg-red-500 border-red-600 active:border-red-500",info:"bg-gray-600 active:bg-gray-500 border-gray-600 active:border-gray-500",success:"bg-green-600 active:bg-green-500 border-green-600 active:border-green-500",warning:"bg-yellow-600 active:bg-yellow-500 border-yellow-600 active:border-yellow-500"},qe={large:"text-lg",middle:"text-base",small:"text-sm"},Ke={round:"rounded-full",square:"rounded-sm"},Ge=({children:e,loading:t,type:n="info",size:r="middle",shape:o="square",className:a,onClick:l})=>{const s=m(a,"text-white select-none flex-shrink-0 outline-none py-1 px-2 transition-colors border border-solid",Je[n],qe[r],Ke[o]);return d.createElement("button",{className:s,onClick:l},d.createElement("span",{className:"flex justify-center items-center"},t&&d.createElement("img",{className:"animate-spin mr-2 w-1.5f",src:q("/themes/Yaru/status/process-working-symbolic.svg"),alt:"Loading Spinner"}),e))};const Qe=(e,t)=>{const n=function(){const e=p.exports.useRef(!0);return e.current?(e.current=!1,!0):e.current}();p.exports.useEffect((()=>{if(!n)return e()}),t)};var Ze=p.exports.forwardRef((({visible:e,className:t,title:n,getContainer:r,onCancel:o,afterClose:a,destroyOnClose:l,onOk:i,okText:c,cancelText:u,hideCancelButton:f,cancelButtonProps:g,okButtonProps:h,footer:b,children:w,content:y,style:v},E)=>{const[k,A]=p.exports.useState(e||!1),C=p.exports.useMemo((()=>null!=e?e:k),[e,k]),N=m(t,"modal-container"),M=p.exports.useMemo((()=>"function"==typeof r?r():null!=r?r:document.body),[r]);return p.exports.useImperativeHandle(E,(()=>({destroy:()=>{null!=e||A(!1)},open:()=>{null!=e||A(!0)}})),[A,e]),Qe((()=>{C||null==a||a()}),[C]),x.createPortal(d.createElement(He,{exist:!l,visible:C,duration:200},d.createElement("div",{className:"fixed left-0 top-0 w-full h-full z-9999"},d.createElement(He,{exist:!0,visible:C,duration:200,enterClassName:"modal-container-show",leaveClassName:"modal-container-leave"},d.createElement("div",{className:N,style:v},d.createElement("div",{className:"text-lg mb-3"},n),null!=w?w:y,d.createElement("div",{className:"mt-5 border-t w-full pt-3"},void 0===b?d.createElement("div",{className:"w-full flex justify-end items-center"},!f&&d.createElement(Ge,s({type:"error",onClick:o,className:"mr-2"},g),u||"Cancel"),d.createElement(Ge,s({onClick:i},h),c||"Ok")):b))))),M)}));const et=d.createRef();function tt(e){et.current&&et.current.destroy();const t=document.createElement("div");document.body.append(t),x.render(d.createElement(Ze,i(s({ref:et,destroyOnClose:!0},e),{async onOk(){var t,n;await(null==(t=e.onOk)?void 0:t.call(e)),null==(n=et.current)||n.destroy()},async onCancel(){var t,n;await(null==(t=e.onCancel)?void 0:t.call(e)),null==(n=et.current)||n.destroy()}})),t),et.current&&et.current.open(),document.body.removeChild(t)}const nt=e=>tt(s({},e)),{setBackgroundImage:rt,getBackgroundImage:ot}=Le("backgroundImage",{defaultValue:""}),{setMousePosition:at,getMousePosition:lt}=Le("mousePosition",{defaultValue:{x:0,y:0},map:e=>F(e,{x:0,y:0})});async function st(e,t,n,r,o=!1){const a=o?e:E(e),l=a.appMap[t],c=a.appMap[n],p=l.id.split("/"),u=`${n}/${p[p.length-1]}`;if(pt(a.appMap,n,l.parentId,u)){if(!(await new Promise((e=>{nt({title:"Something Wrong",content:`An older item with the name ${l.title} already exists at this location. Do you want to replace it with the new item you are moving?`,onOk(){c.apps=c.apps.filter((e=>e.id!==u)),Reflect.deleteProperty(a.appMap,u),Reflect.deleteProperty(a.openedAppMap,u),Reflect.deleteProperty(a.maximizedApps,u),Reflect.deleteProperty(a.minimizedApps,u),e(!0)},onCancel(){e(!1)}})}))))return k(a)}const d=function(e,t,n,r){let o=n,a=r.title;for(;e[o];)o=`${o} copy`,a=`${a} copy`;return i(s({},r),{parentId:t,title:a,id:o})}(a.appMap,n,u,l);if(r&&(d.position=r),a.appMap[d.id]=d,o||c.apps.push(d),ut(d)){d.apps=[...d.apps];const e=d.apps.length;for(let t=0;t<e;t++){const e=d.apps[t],n=e.id.split("/"),r=`${d.id}/${n[n.length-1]}`;await st(a,e.id,d.id,e.position,!0),d.apps[t]=i(s({},e),{id:r,parentId:d.id})}}return o?a:k(a)}async function it(e,{currentId:t,prevId:n,parentId:r,prevParentId:o,prevPosition:a},l=!1){const c=l?e:E(e),p=c.appMap[n],u=c.appMap[r],d=c.appMap[o];if(pt(c.appMap,r,o,t)){if(!(await new Promise((e=>{nt({title:"Something Wrong",content:`An older item with the name ${c.appMap[t].title} already exists at this location. Do you want to replace it with the new item you are moving?`,onOk(){u.apps=u.apps.filter((e=>e.id!==t)),Reflect.deleteProperty(c.appMap,t),Reflect.deleteProperty(c.openedAppMap,t),Reflect.deleteProperty(c.maximizedApps,t),Reflect.deleteProperty(c.minimizedApps,t),e(!0)},onCancel(){p.position=a,e(!1)}})}))))return k(c)}if(p.parentId=r,p.id=t,Reflect.deleteProperty(c.appMap,n),Reflect.deleteProperty(c.openedAppMap,n),Reflect.deleteProperty(c.maximizedApps,n),Reflect.deleteProperty(c.minimizedApps,n),c.openedApps=c.openedApps.filter((e=>e.id!==n)),c.appMap[t]=p,d.apps=d.apps.filter((e=>e.id!==n)),u.apps.push(p),ut(p)){const e=p.apps.length;for(let n=0;n<e;n++){const e=p.apps[n],r=e.id,o=r.split("/"),a=`${t}/${o[o.length-1]}`;await it(c,{currentId:a,prevId:r,parentId:t,prevParentId:t,prevPosition:e.position},!0),p.apps[n]=i(s({},e),{id:a,parentId:t})}}return l?c:k(c)}function ct(e,t,n){if(t===n)return!1;if(ut(e[t])){let r=e[n];for(;r;){if(r.parentId===t)return!1;r=e[r.parentId]}return!0}return!0}function pt(e,t,n,r){return t!==n&&e[r]}function ut(e){return!!e&&(Array.isArray(e.apps)||!!e.folder)}const dt={"top left":"left-0 top-0","top right":"right-0 top-0","bottom left":"left-0 bottom-0","bottom right":"right-0  bottom-0"},mt={info:"bg-ub-cool-grey",error:"bg-red-500",success:"bg-green-500",warning:"bg-yellow-500"};var ft=p.exports.forwardRef((({duration:e=3e3,type:t="info",direction:n="top right",content:r,description:o,wrapperClassName:a,getContainer:l},s)=>{const[i,c]=p.exports.useState(!0),{run:u,cancel:f}=Ue((()=>{c(!1)}),e),g=p.exports.useCallback((()=>{f(),c(!1)}),[c,f]);p.exports.useImperativeHandle(s,(()=>({close:g})),[g]);const h=m("message-container",{"message-left":n.includes("left"),"message-right":n.includes("right")},dt[n],mt[t],a),b=p.exports.useMemo((()=>"function"==typeof l?l():null!=l?l:document.body),[l]);return p.exports.useEffect((()=>{u()}),[u]),x.createPortal(d.createElement(He,{visible:i,duration:300,enterClassName:"message-container-show",leaveClassName:"message-container-leave"},d.createElement("div",{className:h},d.createElement("div",{className:"text-white"},r),d.createElement("div",{className:"text-xs mt-1 text-ubt-grey"},o))),b)}));const gt=d.createRef(),ht=e=>{gt.current&&gt.current.close();const t=document.createElement("div");document.body.append(t),x.render(d.createElement(ft,s({ref:gt},e)),t),document.body.removeChild(t)};["info","error","success","warning"].forEach((e=>{ht[e]=t=>{ht(i(s({},t),{type:e}))}}));const bt=e=>{const[{appMap:t,copiedAppId:n}]=Rt(),[{dragArea:r}]=De(),o=p.exports.useRef(e.index),a=p.exports.useRef(!1),[l,c]=p.exports.useState(!1),u=p.exports.useRef(null),f=m("hover:z-20 focus:z-20 z-10 absolute",{"z-20":l}),[,g]=Rt(),h=p.exports.useMemo((()=>({from:e.folderId,app:e.app})),[e.app,e.folderId]),b=p.exports.useCallback(((e,t)=>{a.current=!0;const n=t.currentTarget;t.dataTransfer.setData("domOffset",JSON.stringify(s({},function({clientX:e,clientY:t},n){const{offsetLeft:r,offsetTop:o}=T(n);return{left:e-r,top:t-o}}({clientX:t.clientX,clientY:t.clientY},n))))}),[]),w=p.exports.useCallback((()=>{const n=Ve();We();const r=e.app.id.split("/"),o=`${n}/${r[r.length-1]}`;return ct(t,e.app.id,n)&&!pt(t,n,e.app.parentId,o)}),[e.app,t]),y=p.exports.useMemo((()=>{const t=e.app.position||{left:0,top:0},n=0===t.left||0===t.top?function(e,t,n,r=!0){let o=0,a=0,l=0,s=0;if(l="string"==typeof e.height?t.height*D(e.height):e.height,s="string"==typeof e.width?t.width*D(e.width):e.width,r){const e=Math.floor(t.width/s);o=s*(n%e),a=l*Math.floor(n/e)}else{const e=Math.floor(t.height/l);o=s*Math.floor(n/e),a=l*(n%e)}return{left:o,top:a}}(ie,r,o.current,e.row):t;return{left:0===r.width||"string"==typeof n.left?n.left:n.left/r.width*100+"%",top:0===r.height||"string"==typeof n.top?n.top:n.top/r.height*100+"%"}}),[e.app.position,e.row,r]),v=p.exports.useMemo((()=>[{key:"Open",title:"Open",onClick:()=>{g.openApp(e.app.id,e.app)}},{key:"Copy",title:"Copy",onClick:()=>{var t;return null==(t=e.onCopy)?void 0:t.call(e,e.app.id,e.app)}},{key:"Paste",title:"Paste",disabled:!ct(t,n,e.app.id)||!ut(e.app),onClick:()=>{var t;return null==(t=e.onPaste)?void 0:t.call(e,e.app.id,e.app)}}]),[t,n,g,e]);ke(u,(()=>{c(!1)})),O(u,"click",(()=>{g.clickApp(e.app.id,e.app),c(!0)}));const x=p.exports.useCallback((t=>{var n,r;a.current&&(null==(n=e.app.position)?void 0:n.left)!==t.left&&(null==(r=e.app.position)?void 0:r.top)!==t.top&&g.updateFolderApp({from:e.folderId,to:e.folderId,data:i(s({},e.app),{position:t})})}),[e.app,e.folderId,g]);return d.createElement(Oe,{onDragStart:b,nodeRef:u,defaultPosition:y,onPositionChange:x,className:f,data:h,onValid:w},d.createElement(Fe,{onDragOver:()=>{ut(e.app)&&_e(e.app.id)},onDrop:n=>{if(!ut(e.app))return;n.stopPropagation();const r=F(n.dataTransfer.getData("custom"),{});if(!r.app)return void ht.error({content:"invalid dragging element"});const o=t[r.app.id];g.updateFolderApp({from:r.from,to:e.app.id,data:i(s({},o),{position:{left:0,top:0}})})}},d.createElement("div",{"data-target":fe},d.createElement($e,{menus:v},d.createElement(Re,s({style:{width:ie.width,height:ie.height},className:"overflow-hidden"},e))))))},wt=({children:e,folderId:t,onPaste:n,className:r})=>{const[{appMap:o},a]=Rt(),l=p.exports.useRef(null),[s,i]=p.exports.useState(!1),[c,u]=p.exports.useState({left:0,top:0}),f=m(r,"h-full w-full flex flex-col justify-start content-start flex-wrap bg-transparent relative overflow-hidden overscroll-none"),g=p.exports.useMemo((()=>[{key:"New File",title:"New File",onClick(){a.setNewAppModalFolderId(t),a.setNewFileModal(!0)}},{key:"New Folder",title:"New Folder",onClick(){a.setNewAppModalFolderId(t),a.setNewFolderModal(!0)}},{key:"Paste",title:"Paste",onClick:()=>null==n?void 0:n(t,o[t],!0)},{key:"Show Desktop in Files",title:"Show Desktop in Files",disabled:!0},{key:"Open in Terminal",title:"Open in Terminal"},{key:"Change Background...",title:"Change Background...",onClick(e){e.stopPropagation();const t=o[he.Settings];t&&a.openApp(t.id,t)}},{key:"Display Settings",title:"Display Settings",disabled:!0},{key:"Settings",title:"Settings",onClick(e){e.stopPropagation();const t=o[he.Settings];t&&a.openApp(t.id,t)}}]),[o,t,n,a]),h=p.exports.useMemo((()=>({onContextMenu(e){if(z(e.target,(e=>{var t;const n=null==(t=e.dataset)?void 0:t.target;return n===fe||n===ge})))return i(!1);i(!0),a.setMousePosition({clientX:e.clientX,clientY:e.clientY});const t=e.currentTarget,{offsetLeft:n,offsetTop:r}=T(t),o=e.clientX-n,l=e.clientY-r;u({left:o,top:l})},onClick(){i(!1)},onClickAway(){i(!1)}})),[i,u,a]);return Pe(P?"meta.v":"ctrl.v",(e=>{if(e.stopPropagation(),!n)return;e.target.dataset.appid===t&&n(t,o[t],!0)})),d.createElement($e,{nodeRef:l,rewritePosition:c,rewriteVisible:s,contextmenuOptionsRewrite:h,className:f,menus:g},e)},yt=({id:e,emptyProps:t,showEmpty:n=!0,wrapperClassName:r,className:o,row:a})=>{const[{appMap:l,copiedAppId:c},u]=Rt(),f=p.exports.useRef(null),g=p.exports.useMemo((()=>{const t=l[e];return ut(t)?t.apps.map((e=>l[e.id])):[]}),[l,e]),h=p.exports.useCallback(((e,t)=>{u.openApp(e,t)}),[u]),b=p.exports.useCallback((e=>{u.setCopiedAppId(e)}),[u]),w=p.exports.useCallback(((e,t,n)=>{const r=l[c],o=l[e];if(!r||!f.current)return;if(!ut(o))return void ht.error({content:"target app is not a folder"});const{x:a,y:s}=lt(),{offsetTop:i,offsetLeft:p}=T(f.current);u.pasteFolderApp({parentId:e,copiedId:c,position:n?{left:a-p,top:s-i}:{left:0,top:0}})}),[u,c,l]),y=m("w-full h-full",r);return d.createElement("div",{ref:f,tabIndex:0,"data-appid":e,className:y},d.createElement(wt,{onPaste:w,folderId:e},d.createElement(Fe,{onDragEnter:()=>{_e(e)},onDrop:t=>{t.stopPropagation();const n=F(t.dataTransfer.getData("custom"),{});if(!n.app)return void ht.error({content:"invalid dragging element"});const r=l[n.app.id],o=F(t.dataTransfer.getData("domOffset"),{}),a=t.currentTarget,{offsetLeft:c,offsetTop:p}=T(a),d=n.from===e?r.position:{left:t.clientX-c-o.left,top:t.clientY-p-o.top};u.updateFolderApp({from:n.from,to:e,data:i(s({},r),{position:d})})},className:o},g.length>0||!n?g.map(((t,n)=>d.createElement(bt,{onOpen:h,onCopy:b,onPaste:w,folderId:e,key:t.id,app:t,index:n,row:a}))):d.createElement(xe,s({title:"Folder is Empty"},t)))))},vt=e=>d.createElement(yt,s({className:"min-h-full flex-grow flex flex-wrap items-start content-start justify-start",wrapperClassName:"w-full h-full flex flex-col bg-ub-cool-grey text-white select-none overflow-x-auto overflow-y-auto ub-scrollbar"},e));var xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vt});const Et=d.lazy((()=>I((()=>import("./todoist.d070f48b.js")),["assets/todoist.d070f48b.js","assets/vendor.06d83442.js"]))),kt=d.lazy((()=>I((()=>import("./firefox.b4de4fc9.js")),["assets/firefox.b4de4fc9.js","assets/vendor.06d83442.js"]))),At=d.lazy((()=>I((()=>import("./settings.6dc9f6c7.js")),["assets/settings.6dc9f6c7.js","assets/vendor.06d83442.js"]))),Ct=d.lazy((()=>I((()=>import("./trash.4672e9cd.js")),["assets/trash.4672e9cd.js","assets/vendor.06d83442.js"]))),Nt=d.lazy((()=>I((()=>import("./vscode.e4821041.js")),["assets/vscode.e4821041.js","assets/vendor.06d83442.js"]))),Mt=[{parentId:"/",folder:!0,id:"/desktop",title:"Desktop",apps:[{parentId:"/desktop",id:"/desktop/Col0ring",title:"Col0ring",icon:q("/themes/Yaru/system/folder.png"),render:e=>d.createElement(vt,{id:e}),folder:!0,apps:[{parentId:"/desktop/Col0ring",id:"/desktop/Col0ring/index.php",filetype:we.Php,icon:q("/themes/filetypes/php.png"),title:"index.php"},{parentId:"/desktop/Col0ring",id:"/desktop/Col0ring/Angular.js",title:"Angular.js",filetype:we.Js,icon:q("/themes/filetypes/js.png")}]},{parentId:"/desktop",id:"/desktop/folder2",title:"folder2",icon:q("/themes/Yaru/system/folder.png"),render:e=>d.createElement(vt,{id:e}),folder:!0,apps:[{parentId:"/desktop/folder2",id:"/desktop/folder2/index.js",filetype:we.Js,icon:q("/themes/filetypes/php.png"),title:"index.js"}]},{parentId:"/desktop",id:"/desktop/Applications.link",title:"Applications",filetype:we.Link,icon:q("/themes/Yaru/system/folder.png"),redirect:"/application"},{parentId:"/desktop",id:"/desktop/application/Firefox Browser.link",title:"Firefox Browser",filetype:we.Link,icon:q("/themes/Yaru/apps/firefox.svg"),redirect:"/application/Firefox Browser.app"},{parentId:"/desktop",id:"/desktop/Todoist.link",title:"Todoist",filetype:we.Link,icon:q("/themes/Yaru/apps/todoist.png"),redirect:"/application/Todoist.app"},{parentId:"/desktop",id:"/desktop/Trash.link",title:"Trash",filetype:we.Link,icon:q("/themes/Yaru/system/user-trash-full.png"),redirect:"/Trash"}]},{parentId:"/",folder:!0,id:"/application",title:"Application",icon:q("/themes/Yaru/system/folder.png"),render:e=>d.createElement(vt,{id:e}),apps:[{parentId:"/application",id:"/application/Firefox Browser.app",title:"Firefox Browser",icon:q("/themes/Yaru/apps/firefox.svg"),filetype:we.App,disabled:!1,render:()=>d.createElement(kt,null)},{parentId:"/application",id:"/application/Todoist.app",title:"Todoist",filetype:we.App,icon:q("/themes/Yaru/apps/todoist.png"),disabled:!1,render:()=>d.createElement(Et,null)},{parentId:"/application",id:"/application/About Col0ring.app",title:"About Col0ring",filetype:we.App,icon:q("/themes/Yaru/system/user-home.png"),disabled:!1},{parentId:"/application",id:"/application/Visual Studio Code.app",title:"Visual Studio Code",filetype:we.App,icon:q("/themes/Yaru/apps/vscode.png"),disabled:!1,render:()=>d.createElement(Nt,null)},{parentId:"/application",id:"/application/Terminal.app",title:"Terminal",filetype:we.App,icon:q("/themes/Yaru/apps/bash.png"),disabled:!1},{parentId:"/application",id:"/application/Music.app",title:"Music",filetype:we.App,icon:q("/themes/Yaru/apps/vue-aplayer-round.png"),disabled:!1},{parentId:"/application",id:"/application/Settings.app",title:"Settings",filetype:we.App,icon:q("/themes/Yaru/apps/gnome-control-center.png"),disabled:!1,render:()=>d.createElement(At,null)},{parentId:"/application",id:"/application/Send a Message.app",filetype:we.App,title:"Send a Message",icon:q("/themes/Yaru/apps/gedit.png"),disabled:!1}]},{parentId:"/",id:"/Trash",title:"Trash",icon:q("/themes/Yaru/system/user-trash-full.png"),disabled:!1,folder:!0,render:()=>d.createElement(Ct,null),apps:[{parentId:"/Trash",id:"/Trash/index.php",filetype:we.Php,icon:q("/themes/filetypes/php.png"),title:"index.php"},{parentId:"/Trash",id:"/Trash/Angular.js",title:"Angular.js",filetype:we.Js,icon:q("/themes/filetypes/js.png")}]}],It=d.lazy((()=>I((()=>Promise.resolve().then((function(){return xt}))),void 0))),Pt=function e(t){const n={};return t.forEach((t=>{n[t.id]=t,ut(t)&&Object.assign(n,e(t.apps||[]))})),n}(Mt),[Rt,St,Dt]=u((e=>[{chooseBackgroundImage:t=>(rt(t),e.backgroundImage=t,e),setCopiedAppId:t=>(e.copiedAppId=t,e),setNewFolderModal:t=>(e.newFolderModal=t,e),setNewFileModal:t=>(e.newFileModal=t,e),setNewAppModalFolderId:t=>(e.newAppModalFolderId=t,e),setAllAppsScreen:t=>(e.allAppsScreen=t,e),setLockScreen:t=>(e.lockScreen=t,e),setMousePosition:t=>(e.mousePosition=t,e),resizeBrowserWindow:(t,n)=>(e.defaultAppWindow.minHeight=n/3,e.defaultAppWindow.minWidth=t/3,e),updateOpenedApp:(t,n)=>(e.openedApps=e.openedApps.map((e=>e.id===t?n:e)),e.openedAppMap[t]=n,e),addNewFolder(t,n,r){const o=e.appMap[t],a=`${t}/${n}`;if(o.apps.find((e=>e.id===a)))return ht.error({content:"Something Wrong",description:`The name ${n} is already in use. Please choose another name`,duration:5e3}),e;const l={id:a,title:n,parentId:t,folder:!0,icon:q("/themes/Yaru/system/folder.png"),disabled:!1,position:r,apps:[],render:e=>d.createElement(It,{id:e})};return this.setNewFolderModal(!1),o.apps.push(l),e.appMap[a]=l,e},addNewFile(t,n,r){const o=e.appMap[t],a=n.split("."),l=a.length>=2&&a[a.length-1],s=l?`${t}/${n}`:function(e,t,n){return`${e}/${t}${n?"."+n:""}`}(t,n,"txt"),i={parentId:t,id:s,filetype:l||"txt",disabled:!1,icon:ve[l||"txt"],position:r,title:n};return this.setNewFileModal(!1),o.apps.push(i),e.appMap[s]=i,e},async pasteFolderApp({parentId:t,position:n,copiedId:r}){const o=E(e);return ct(o.appMap,r,t)?await st(o,r,t,n):(ht.error({content:"Something Wrong",description:"can not move itself or parent folder to the directory"}),k(o))},async updateFolderApp({from:t,to:n,data:r}){const o=E(e);if(!ct(o.appMap,r.id,n))return ht.error({content:"Something Wrong",description:"can not move itself or parent folder to the directory"}),k(o);const a=o.appMap[t],l=o.appMap[r.id].position;if(o.appMap[r.id]=r,t===n){const e=o.openedAppMap[t];return e&&(e.apps=e.apps.map((e=>e.id===r.id?r:e)),o.openedApps=o.openedApps.map((n=>n.id===t?e:n))),a.apps=a.apps.map((e=>e.id===r.id?r:e)),k(o)}{const e=o.appMap[n],t=r.id.split("/"),s=`${e.id}/${t[t.length-1]}`,i=e.id;return it(o,{currentId:s,prevId:r.id,parentId:i,prevParentId:a.id,prevPosition:l})}},openApp(t,n){const r=n.redirect||t;if(e.openedAppMap[r]){const t=e.openedAppMap[r];return Reflect.deleteProperty(e.minimizedApps,r),e.openedApps=[...e.openedApps.filter((e=>e.id!==r)),t],e.focusAppId=r,e}const o=i(s({},e.appMap[r]),{rect:s({},e.defaultAppWindow),windowPosition:{left:0,top:0}});return e.focusAppId=r,e.openedApps.push(o),e.openedAppMap[r]=o,e},closeApp:t=>(e.focusAppId=e.focusAppId===t?"":e.focusAppId,e.openedApps=e.openedApps.filter((e=>e.id!==t)),Reflect.deleteProperty(e.maximizedApps,t),Reflect.deleteProperty(e.minimizedApps,t),Reflect.deleteProperty(e.openedAppMap,t),e),minimizeApp:(t,n)=>(e.minimizedApps[t]?Reflect.deleteProperty(e.minimizedApps,t):e.minimizedApps[t]=n,e.focusAppId=e.focusAppId===t?"":e.focusAppId,e),maximizeApp:(t,n)=>(e.maximizedApps[t]?Reflect.deleteProperty(e.maximizedApps,t):e.maximizedApps[t]=n,e.focusAppId=t,e),clickApp(t,n){const r=e.appMap[n.parentId];return r.apps=[...r.apps.filter((e=>e.id!==t)),n],e}}]),{backgroundImage:ot()||se["wall-2"],backgroundImages:se,mousePosition:{clientX:0,clientY:0},newFolderModal:!1,newFileModal:!1,newAppModalFolderId:"",defaultAppWindow:ce,allAppsScreen:!1,lockScreen:!1,focusAppId:"",copiedAppId:"",openedAppMap:{},openedApps:[],minimizedApps:{},maximizedApps:{},frequentApps:Pt[he.Application].apps,favoriteApps:Pt[he.Application].apps,appMap:Pt},le),Tt=({tabs:e,onItemClick:t,stretch:n,active:r,className:o,fontSize:a,itemClassName:l})=>{const s=m("flex flex-col group  bg-transparent cursor-pointer items-center",{"flex-1":n},l),i=m("w-full flex",o);return d.createElement("div",{className:i},e.map(((e,n)=>d.createElement("div",{key:e.name,className:s,onClick:()=>null==t?void 0:t(e.name,n)},d.createElement("div",{style:{fontSize:a},className:"flex-1 flex justify-center items-center text-white",onClick:e.onClick},e.render?e.render():d.createElement("span",null,e.title||e.name)),d.createElement("div",{className:"w-full h-1 mt-1 "+(e.name===r?"bg-ub-orange":"bg-transparent group-hover:bg-white")})))))},jt=({placeholder:e="Type to Search...",className:t,value:n,onChange:r})=>{const o=m("flex w-1/4 h-full items-center pl-2 pr-2 bg-white border-black border-width-2 rounded-xl overflow-hidden left",t),a=void 0===n,l=p.exports.useCallback((e=>{null==r||r(e.target.value,e)}),[r]);return d.createElement("div",{className:o},d.createElement("img",{className:"w-5 h-5",alt:"search icon",src:q("/images/logos/search.png")}),d.createElement("input",{className:"w-full p-1 bg-transparent focus:outline-none",placeholder:e,value:a?void 0:n,onChange:l}))};const zt=[{name:"Frequent"},{name:"All"}],Ft=()=>{const[{appMap:e,allAppsScreen:t,frequentApps:n},r]=Rt(),[o,a]=p.exports.useState("All"),l=p.exports.useMemo((()=>e[he.Application].apps),[e]),s=p.exports.useCallback((e=>{a(e)}),[a]),i=p.exports.useCallback(((e,t)=>{r.openApp(e,t),r.setAllAppsScreen(!1)}),[r]),c=m("all-apps-screen absolute h-full w-full left-0 top-0 z-30 justify-center border-black border-opacity-60 bg-black bg-opacity-70");return d.createElement(He,{duration:200,enterClassName:"all-apps-screen-show",leaveClassName:"all-apps-screen-leave",exist:!0,visible:t},d.createElement("div",{style:{paddingRight:ue},className:c},d.createElement("div",{style:{paddingTop:pe},className:"relative w-full h-full"},d.createElement("div",{className:"flex p-5 align-center justify-center"},d.createElement(jt,{placeholder:"Type to Search..."})),d.createElement("div",{className:"flex flex-wrap"},"Frequent"===o?n.map((e=>d.createElement(Re,{key:e.id,onOpen:i,app:e}))):l.map((e=>d.createElement(Re,{key:e.id,onOpen:i,app:e})))),d.createElement("div",{className:"flex items-center p-2 justify-center absolute left-0 bottom-0 mb-15 w-full"},d.createElement("div",{className:"w-1/2"},d.createElement(Tt,{active:o,onItemClick:s,fontSize:16,stretch:!0,tabs:zt}))))))};function Ot(e){return e<10?`0${e}`:`${e}`}const Yt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Lt=({className:e,type:t="default",showSeconds:n,delay:r=1e3,hour12:o=!0})=>{const[a,l]=p.exports.useState((()=>new Date)),s=p.exports.useMemo((()=>{const e=$t[a.getDay()];let r=a.getHours();const l=Ot(a.getMinutes()),s=Ot(a.getSeconds()),i=n?`:${s}`:"",c=Yt[a.getMonth()],p=a.getDate(),u=r<12?"AM":"PM";switch(o&&r>12&&(r-=12),t){case"date":return`${e} ${c} ${p}`;case"time":return`${r}:${l}${i} ${u}`;case"default":default:return`${e} ${c} ${p} ${r}:${l}${i} ${u}`}}),[a,o,n,t]),i=m(e);return Q((()=>{l(new Date)}),r),d.createElement("span",{className:i},s)},_t=({className:e,children:t,color:n,onClick:r})=>{const o=m("pl-2 pr-2 outline-none transition duration-100 ease-in-out border-b-2 border-transparent focus:border-ubb-orange py-1",e);return d.createElement("div",{tabIndex:0,onClick:r,style:{borderColor:n},className:o},t)},{setBrightness:Wt,getBrightness:Vt}=Le("brightness",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),{setSound:Bt,getSound:Xt}=Le("sound",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),[Ut,Ht]=u((e=>({setUbuntuInstance:t=>i(s({},e),{ubuntu:t}),setBrightness:t=>(Wt(`${t}`),i(s({},e),{config:i(s({},e.config),{brightness:t})})),setSound:t=>(Bt(`${t}`),i(s({},e),{config:i(s({},e.config),{sound:t})})),setTitle:t=>i(s({},e),{title:`Web Ubuntu - ${t}`})})),{title:"Web Ubuntu",ubuntu:{current:null},config:{brightness:Vt(),sound:Xt()}});const Jt={up:"Bottom",down:"Top",left:"Right",right:"Left"},qt=({direction:e,className:t,size:n,color:r})=>{const o=m(`arrow-custom-${e} inline-block`,t);return d.createElement("i",{style:{borderWidth:n,[`border${Jt[e]}Color`]:r},className:o})};const Kt=({className:e,min:t=0,max:n=100,step:r=1,value:o,onChange:a})=>{const l=m("ubuntu-slider",e),s=void 0===o,i=p.exports.useCallback((e=>{null==a||a(+e.target.value,e)}),[a]);return d.createElement("input",{type:"range",min:`${t}`,max:`${n}`,step:`${r}`,defaultValue:s?"0":void 0,value:s?void 0:`${o}`,onChange:i,className:l})},Gt=({icons:e})=>d.createElement("div",{className:"flex justify-center items-center"},e.map((({name:e,icon:t})=>d.createElement("img",{className:"mx-1.5",key:e,src:t,alt:e}))),d.createElement("span",{className:"mx-1"},d.createElement(qt,{direction:"down"}))),Qt=({children:e,image:t,imageAlt:n,onClick:r,name:o})=>d.createElement("div",{onClick:r,className:"w-64 py-1.5 flex items-center justify-center bg-ub-cool-grey hover:bg-ub-warm-grey hover:bg-opacity-20"},d.createElement("div",{className:"w-8"},d.createElement("img",{src:t,alt:n||o})),e||d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,o))),Zt=()=>d.createElement("div",{className:"w-64 flex content-center justify-center"},d.createElement("i",{className:"w-2/4 border-black border-opacity-50 border-b my-2 border-solid"}));const en=({menus:e,onClickAway:t,visible:n})=>{const r=p.exports.useRef(null),o=m("absolute bg-ub-cool-grey rounded-md py-4 top-9 right-3 shadow border-black border border-opacity-20 status-menu");return d.createElement(He,{enterClassName:"status-menu-show",leaveClassName:"status-menu-leave",duration:200,nodeRef:r,visible:n},d.createElement("div",{ref:r,className:o},d.createElement("i",{className:"absolute w-0 h-0 -top-2 right-6 top-arrow-up inline-block"}),e.map(((t,n)=>d.createElement(d.Fragment,{key:n},t.map((e=>{var t=e,{render:n}=t,r=c(t,["render"]);return d.createElement(Qt,s({key:r.image},r),null==n?void 0:n())})),n!==e.length-1&&d.createElement(Zt,null)))),d.createElement(tn,{statusMenuRef:r,onClickAway:t})))},tn=({statusMenuRef:e,onClickAway:t})=>(ke(e,(e=>{null==t||t(e)})),null),{setToken:nn,getToken:rn,removeToken:on}=Le("token"),an=rn(),[ln,sn]=u((e=>({login:t=>(nn(t),i(s({},e),{token:t,isLogin:!0})),setUser:t=>i(s({},e),{user:t}),logout:()=>(on(),i(s({},e),{user:null,token:null,isLogin:!1}))})),{user:null,token:an,isLogin:!!an}),cn=()=>{const[e,t]=p.exports.useState(!1),[,n]=ln(),[r,o]=Ut(),[{appMap:a},l]=Rt(),{config:{sound:s,brightness:i}}=r,c=p.exports.useCallback((e=>{o.setSound(e)}),[o]),u=p.exports.useCallback((e=>{o.setBrightness(e)}),[o]),m=p.exports.useCallback((()=>{t(!0)}),[t]),f=p.exports.useCallback((()=>{t(!1)}),[t]),g=p.exports.useMemo((()=>[{icon:q("/themes/Yaru/status/network-wireless-signal-good-symbolic.svg"),name:"ubuntu wifi"},{icon:q("/themes/Yaru/status/audio-volume-medium-symbolic.svg"),name:"ubuntu sound"},{icon:q("/themes/Yaru/status/battery-good-symbolic.svg"),name:"ubuntu battry"}]),[]),h=p.exports.useMemo((()=>[[{image:q("/themes/Yaru/status/audio-headphones-symbolic.svg"),imageAlt:"ubuntu headphone",render:()=>d.createElement(Kt,{onChange:c,className:"ubuntu-slider w-2/3",value:s})},{image:q("/themes/Yaru/status/display-brightness-symbolic.svg"),imageAlt:"ubuntu brightness",render:()=>d.createElement(Kt,{onChange:u,className:"ubuntu-slider w-2/3",value:i})}],[{image:q("/themes/Yaru/status/network-wireless-signal-good-symbolic.svg"),imageAlt:"ubuntu wifi",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"OnePlus 8 Pro"),d.createElement(qt,{direction:"right"}))},{image:q("/themes/Yaru/status/battery-good-symbolic.svg"),imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"Off"),d.createElement(qt,{direction:"right"}))},{image:q("/themes/Yaru/status/bluetooth-symbolic.svg"),imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"2:40 Remaining (75%)"),d.createElement(qt,{direction:"right"}))}],[{image:q("/themes/Yaru/status/emblem-system-symbolic.svg"),imageAlt:"ubuntu settings",name:"Settings",onClick:()=>{l.openApp(he.Settings,a[he.Settings])}},{image:q("/themes/Yaru/status/changes-prevent-symbolic.svg"),imageAlt:"ubuntu lock",name:"Lock",onClick:()=>{l.setLockScreen(!0)}},{image:q("/themes/Yaru/status/system-shutdown-symbolic.svg"),imageAlt:"ubuntu power",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,"Power Off / Log Out"),d.createElement(qt,{direction:"right"})),onClick:()=>{n.logout()}}]]),[c,s,u,i,l,a,n]);return d.createElement("div",{className:"absolute top-0 left-0 w-full shadow-md flex flex-nowrap justify-between items-center bg-ub-grey text-ubt-grey text-sm select-none z-60"},d.createElement(_t,null,"Activities"),d.createElement(_t,{className:"text-xs md:text-sm"},d.createElement(Lt,null)),d.createElement(_t,{className:"relative",onClick:m},d.createElement(Gt,{icons:g}),d.createElement(en,{visible:e,menus:h,onClickAway:f})))};function pn(e,t={}){const{onEnter:n,onLeave:r}=t,[o,a]=p.exports.useState(!1);return O(e,"mouseenter",(()=>{null==n||n(),a(!0)})),O(e,"mouseleave",(()=>{null==r||r(),a(!1)})),o}const un={top:"mb-1.5 bottom-full left-1/2 transform  -translate-x-1/2",bottom:"mt-1.5 top-full left-1/2 transform  -translate-x-1/2",left:"mr-1.5 top-1/2 transform -translate-y-1/2 right-full",right:"ml-1.5 top-1/2 transform -translate-y-1/2 left-full","top left":"mb-0.5 right-full mr-0.5 bottom-full","top right":"mb-0.5 left-full ml-0.5 bottom-full","bottom left":"mt-0.5 right-full mr-0.5 top-full","bottom right":"mt-0.5 left-full ml-0.5 top-full"},dn=({title:e,direction:t="right",children:n,className:r})=>{const o=p.exports.useRef(null),a=pn(o),l=m("relative",r),s=m("whitespace-nowrap py-0.5 px-1.5 absolute  text-ubt-grey text-opacity-90 text-sm bg-ub-grey bg-opacity-70 border-gray-400 border border-opacity-40 rounded-md",un[t]);return d.createElement("div",{ref:o,className:l},n,a&&d.createElement("div",{className:s},e))};const mn=({onClick:e,isOpen:t,app:n,isMinimized:r})=>{const o=p.exports.useRef(null),[a,l]=p.exports.useState(!1),{run:s}=Ue((()=>{l(!1)}),1e3),i=m("w-auto p-2 outline-none relative transition hover:bg-white hover:bg-opacity-10 rounded",{"bg-white bg-opacity-10":t}),c=p.exports.useCallback((()=>{r||t||(l(!0),s()),null==e||e(n.id,n)}),[r,t,e,n,s]);return d.createElement(dn,{className:"m-1",title:n.title,direction:"left"},d.createElement("div",{"data-target":ge,tabIndex:0,ref:o,onClick:c,className:i,id:`sidebar-app-${n.id}`},"string"==typeof n.icon?d.createElement(d.Fragment,null,d.createElement("img",{className:"w-7",src:n.icon,alt:n.title}),a&&d.createElement("img",{className:"scalable-app-icon w-7 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:n.icon,alt:n.title})):n.icon,t&&d.createElement("div",{className:"w-1 h-1 absolute left-0 top-1/2 bg-ub-orange rounded-sm"})))},fn=({onEnter:e,onLeave:t,children:n})=>{const r=p.exports.useRef(null);return pn(r,{onEnter:e,onLeave:t}),d.createElement("div",{ref:r,style:{width:ue},className:"h-full absolute top-0 right-0  z-40"},n)},gn=({onClick:e})=>d.createElement("div",{className:"absolute bottom-0"},d.createElement(dn,{title:"Show Applications"},d.createElement("div",{className:"w-10 h-10 rounded m-1 hover:bg-white hover:bg-opacity-10 flex items-center justify-center",onClick:e},d.createElement("img",{className:"w-7",src:q("/themes/Yaru/system/view-app-grid-symbolic.svg"),alt:"Ubuntu view app"}))));const hn=()=>{const[{favoriteApps:e,appMap:t,openedAppMap:n,openedApps:r,minimizedApps:o,allAppsScreen:a},l]=Rt(),[i,c]=p.exports.useState(!1),u=m("desktop-sidebar select-none h-full pt-7 flex flex-col justify-start items-center border-black border-opacity-60 bg-black bg-opacity-50"),f=p.exports.useMemo((()=>Object.keys(o).map((e=>t[e])).filter((t=>!e.find((e=>e.id===t.id))))),[t,e,o]),g=p.exports.useCallback(((e,t)=>{l.openApp(e,t)}),[l]),h=p.exports.useCallback((()=>{l.setAllAppsScreen(!a)}),[a,l]),b=p.exports.useMemo((()=>({onEnter:()=>{c(!0)},onLeave:()=>{c(!1)}})),[c]),w=p.exports.useMemo((()=>r.every((e=>{if(!e||o[e.id])return!0;const t="number"==typeof e.rect.width?e.rect.width:window.innerWidth*Number.parseFloat(`${e.rect.width}`)/100;return("number"==typeof e.windowPosition.left?e.windowPosition.left:window.innerWidth*Number.parseFloat(`${e.windowPosition.left}`)/100)<window.innerWidth-t-ue}))),[r,o]);return d.createElement(fn,s({},b),d.createElement(He,{duration:500,enterClassName:"desktop-sidebar-show",leaveClassName:"desktop-sidebar-leave",exist:!0,visible:i||w},d.createElement("div",{className:u},e.map((e=>d.createElement(mn,{isOpen:!!n[e.id],isMinimized:!!o[e.id],onClick:g,key:e.id,app:e}))),f.map((e=>d.createElement(mn,{isOpen:!!n[e.id],isMinimized:!!o[e.id],onClick:g,key:e.id,app:e}))),d.createElement(gn,{onClick:h}))))};const bn=()=>{const[{backgroundImage:e,lockScreen:t},n]=Rt(),r=p.exports.useCallback((()=>{n.setLockScreen(!1)}),[n]);return d.createElement(He,{visible:t,duration:200,enterClassName:"lock-screen-show",leaveClassName:"lock-screen-leave"},d.createElement("div",{style:{backgroundImage:`url(${e})`},onClick:r,onKeyPress:r,className:"lock-screen absolute w-full h-full outline-none select-none top-0 right-0 overflow-hidden m-0 p-0 bg-opacity-50"},d.createElement("div",{className:"lock-screen-content flex flex-col justify-center items-center text-white"},d.createElement("div",{className:"text-7xl"},d.createElement(Lt,{type:"time"})),d.createElement("div",{className:"mt-4 text-xl font-medium"},d.createElement(Lt,{type:"date"})),d.createElement("div",{className:" mt-16 text-base"},"Click or Press a key to unlock"))))},wn=({isMaximized:e,onMaximize:t,onMinimize:n,onClose:r,className:o})=>{const a=p.exports.useCallback((n=>{null==t||t(!e,n)}),[t,e]),l=m(o,"flex justify-center items-center");return d.createElement("div",{onClick:S,"data-target":de,className:l},d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center h-5 w-5 items-center",onClick:n},d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-minimize-symbolic.svg"),alt:"ubuntu window minimize"})),d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center  h-5 w-5 items-center",onClick:a},e?d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-restore-symbolic.svg"),alt:"ubuntu window restore"}):d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-maximize-symbolic.svg"),alt:"ubuntu window maximize"})),d.createElement("button",{className:"mx-1.5 focus:outline-none cursor-default bg-ub-orange bg-opacity-90 hover:bg-opacity-100 rounded-full flex justify-center h-5 w-5 items-center",onClick:r},d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-close-symbolic.svg"),alt:"ubuntu window close"})))},yn=e=>{var t=e,{title:n,className:r}=t,o=c(t,["title","className"]);const a=m("bg-ub-window-title border-white border-opacity-5 py-1.5 text-white w-full select-none flex  justify-center items-center",r),l=p.exports.useCallback((e=>{var t;null==(t=o.onMaximize)||t.call(o,!o.isMaximized,e)}),[o]);return d.createElement("div",{"data-target":me,onDoubleClick:l,style:{paddingLeft:100,paddingRight:100},className:a},d.createElement("div",{className:"flex justify-center text-sm font-bold"},n),d.createElement(wn,s({className:"absolute top-1 right-1"},o)))};const vn=({children:e,className:t})=>{const n=m("w-full flex-grow z-20 max-h-full overflow-y-auto window-main-view bg-ub-cool-grey",t);return d.createElement("div",{className:n},e)};function xn(e,{filterMoving:t,onMoveStart:n,onMoving:r,onMoveEnd:o}={}){O(e,"mousedown",p.exports.useCallback((e=>{if(t&&!t(e))return;null==n||n(e);const{width:a,left:l,top:s,height:i}=e.currentTarget.getBoundingClientRect(),c=e.clientX,p=e.clientY,u=e=>{const t=e.clientX,n=e.clientY,o=t-c,u=n-p;null==r||r({moveX:t,moveY:n,offsetX:o,offsetY:u,left:l+o,top:s+u,width:a,height:i},e)},d=e=>{null==o||o(e),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}),[t,o,n,r]))}var En=p.exports.forwardRef(((e,t)=>{var n=e,{children:r,onMoveStart:o,onMoveEnd:a,onMoving:l,filterMoving:i,className:u,style:m}=n,f=c(n,["children","onMoveStart","onMoveEnd","onMoving","filterMoving","className","style"]);const g=p.exports.useRef(null);return xn(t||g,{onMoveStart:o,onMoveEnd:a,onMoving:l,filterMoving:i}),d.createElement("div",s({ref:t||g,style:m,className:u},f),r)}));const kn=["t","r","b","l","lt","lb","rb","rt"],An=kn.map((e=>{const t=e.includes("l"),n=e.includes("r"),r=e.includes("t"),o=e.includes("b");return{className:m("absolute transform z-60 cursor-move",{"left-0 -translate-x-1/2":t,"top-0 -translate-y-1/2":r,"right-0 translate-x-1/2":n,"bottom-0 translate-y-1/2":o,"h-full":1===e.length&&(t||n),"h-5":e.includes("t")||e.includes("b"),"w-full":1===e.length&&(r||o),"w-5":e.includes("l")||e.includes("r")}),direction:e}}));var Cn=p.exports.forwardRef(((e,t)=>{var n=e,{children:r,className:o,style:a,onMoving:l,onMoveEnd:i,onMoveStart:u,disabled:f=!1}=n,g=c(n,["children","className","style","onMoving","onMoveEnd","onMoveStart","disabled"]);const h=p.exports.useRef(null),b=p.exports.useRef(),w=m("relative",o);return xn(t||h,{filterMoving:e=>{const t=e.target;return!(!t.dataset.direction||!kn.includes(t.dataset.direction))&&(b.current=t.dataset.direction,!0)},onMoveStart:u,onMoving:(e,t)=>{null==l||l(b.current,e,t)},onMoveEnd:i}),d.createElement("div",s({ref:t||h,className:w,style:a},g),!f&&An.map((({direction:e,className:t})=>d.createElement("div",{key:e,"data-direction":e,className:t}))),r)}));function Nn(e){const t=p.exports.useRef(0),[n,r]=p.exports.useState(e),o=p.exports.useCallback((e=>{cancelAnimationFrame(t.current),t.current=requestAnimationFrame((()=>{r(e)}))}),[]);return V((()=>{cancelAnimationFrame(t.current)})),[n,o]}const Mn=({app:e,isMaximized:t,isMinimized:n,isFocus:r})=>{const[o,a]=Rt(),{defaultAppWindow:l}=o,c=p.exports.useRef(l);c.current=l;const[u,f]=Nn((()=>({left:e.windowPosition.left,top:e.windowPosition.top}))),[g,h]=Nn((()=>({width:e.rect.width,height:e.rect.height}))),[b,w]=p.exports.useState(!0);p.exports.useRef(g).current=g;const y=function(e,t=0){const[n,r]=p.exports.useState(e),{run:o,cancel:a}=Ue((e=>{r(e)}),t);return p.exports.useEffect((()=>{a(),o(e)}),[a,o,e]),n}(t,300),v=p.exports.useRef(null),x=m("m-auto overflow-hidden max-w-full max-h-full absolute window-shadow border-black border-opacity-40 border border-t-0 bg-ub-window-title app-window",t?"z-60 rounded-none":"rounded-lg rounded-b-none",{"not-focus":!r,"z-20 not-focus":!r&&!t,"z-30":r&&!t}),E=p.exports.useMemo((()=>({filterMoving:e=>{const n=e.target;return!t&&!!z(n,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===me}))&&!z(n,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===de}))},onMoving:({left:e,top:t})=>{t<pe&&(t=pe+1),f({left:e,top:t})},onClick:()=>{a.openApp(e.id,e)}})),[f,t,e,a]),k=p.exports.useMemo((()=>{const e=t?"100%":g.width||l.width,n=t?"100%":g.height||l.height,r=t?0:u.left&&"number"==typeof u.left?u.left/window.innerWidth*100+"%":u.left,o=t?0:u.top&&"number"==typeof u.top?u.top/window.innerHeight*100+"%":u.top,a="string"==typeof e?window.innerWidth*D(e):e,c=(window.innerWidth-a)/2,p="string"==typeof n?window.innerHeight*D(n):n,d=(window.innerHeight-p)/2;return i(s({width:e,height:n},0===r&&0===o?{left:c,top:d}:{left:r,top:o}),{minWidth:l.minWidth,minHeight:l.minHeight,position:"absolute"})}),[u,t,g,l]);p.exports.useEffect((()=>{t||a.updateOpenedApp(e.id,i(s({},e),{rect:{width:k.width,height:k.height},windowPosition:{left:k.left,top:k.top}}))}),[k,a,t]);const A=p.exports.useMemo((()=>({onClose:()=>{a.closeApp(e.id)},onMaximize:()=>{a.maximizeApp(e.id,e)},onMinimize:()=>{a.minimizeApp(e.id,e)}})),[a,e]),C=p.exports.useMemo((()=>({l:({width:e,offsetX:t,left:n})=>{e-t<c.current.minWidth||(h((n=>({width:e-t,height:n.height}))),f((e=>({top:e.top,left:n}))))},r:({width:e,offsetX:t})=>{h((n=>({width:e+t,height:n.height})))},t:({height:e,offsetY:t,top:n})=>{e-t<c.current.minHeight||(h((n=>({width:n.width,height:e-t}))),f((e=>({top:n,left:e.left}))))},b:({height:e,offsetY:t})=>{h((n=>({width:n.width,height:e+t})))},lb:({width:e,left:t,height:n,offsetX:r,offsetY:o})=>{e-r<c.current.minWidth||(h({width:e-r,height:n+o}),f((e=>({top:e.top,left:t}))))},rb:({width:e,height:t,offsetX:n,offsetY:r})=>{h({width:e+n,height:t+r})},lt:({width:e,height:t,offsetX:n,offsetY:r,top:o,left:a})=>{t-r<c.current.minHeight||e-n<c.current.minWidth||(h({width:e-n,height:t-r}),f({top:o,left:a}))},rt:({width:e,height:t,offsetX:n,offsetY:r,top:o})=>{t-r<c.current.minHeight||(h({width:e+n,height:t-r}),f((e=>({top:o,left:e.left}))))}})),[h,f]),N=p.exports.useMemo((()=>({onMoveStart:e=>{const{left:t,top:n}=e.currentTarget.getBoundingClientRect();f((e=>e.left===t&&e.top===n?e:{top:n,left:t}))},onMoving:(e,t)=>{C[e](t)}})),[f,C]);p.exports.useEffect((()=>{w(!n)}),[n]);const M=p.exports.useMemo((()=>t||y||n?300:0),[t,y,n]);return d.createElement(He,{transitionProperty:["width","height","left","top","opacity"],nodeRef:v,enterClassName:"app-window-show",leaveClassName:"app-window-leave",duration:M,visible:b,exist:!0},d.createElement(Cn,s({tabIndex:0,"data-appid":e.id,disabled:t,className:x,ref:v,style:k},N),d.createElement(En,i(s({},E),{className:"flex flex-col w-full h-full"}),d.createElement(yn,i(s({},A),{title:e.title})),d.createElement(vn,null,d.createElement(te,null,"function"==typeof e.render?e.render(e.id):e.component?d.createElement(e.component):null)))))},In=he.Desktop,Pn=()=>d.createElement(yt,{row:!1,id:In,wrapperClassName:"pt-8",showEmpty:!1}),Rn=({type:e})=>{const t=p.exports.useRef(null),[n,r]=p.exports.useState(""),[o,a]=Rt(),l=p.exports.useCallback((e=>{r(e.target.value)}),[r]),s=p.exports.useCallback((t=>{if(!t.trim())return;if(o.newAppModalFolderId===he.Desktop)return void("file"===e?a.addNewFile(o.newAppModalFolderId,t,{left:o.mousePosition.clientX,top:o.mousePosition.clientY}):a.addNewFolder(o.newAppModalFolderId,t,{left:o.mousePosition.clientX,top:o.mousePosition.clientY}));const n=o.openedAppMap[o.newAppModalFolderId],r="string"==typeof n.windowPosition.left?window.innerWidth*D(n.windowPosition.left):n.windowPosition.left,l="string"==typeof n.windowPosition.top?window.innerWidth*D(n.windowPosition.top):n.windowPosition.top;"file"===e?a.addNewFile(o.newAppModalFolderId,t,{left:o.mousePosition.clientX-r,top:o.mousePosition.clientY-l}):a.addNewFolder(o.newAppModalFolderId,t,{left:o.mousePosition.clientX-r,top:o.mousePosition.clientY-l})}),[a,e,o]),i=p.exports.useCallback((()=>{s(n)}),[s,n]),c=p.exports.useCallback((()=>{"file"===e?a.setNewFileModal(!1):a.setNewFolderModal(!1)}),[a,e]);return Pe("enter",(()=>{s(n)}),{target:t}),d.createElement("div",{className:"absolute rounded-md top-1/2 left-1/2 text-center text-white font-light text-sm bg-ub-cool-grey transform -translate-y-1/2 -translate-x-1/2 sm:w-96 w-3/4 z-60"},d.createElement("div",{className:"w-full flex flex-col justify-around items-start px-6 pb-8 pt-6"},d.createElement("span",null,"file"===e?"New File Name":"New Folder Name"),d.createElement("input",{ref:t,value:n,onChange:l,className:"outline-none mt-4 px-1 w-full  context-menu-bg border-2 border-yellow-700 rounded py-0.5",type:"text",autoComplete:"off",spellCheck:"false",autoFocus:!0})),d.createElement("div",{className:"flex"},d.createElement("div",{onClick:i,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 border-r-0 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Create"),d.createElement("div",{onClick:c,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Cancel")))};const Sn=[{title:"desktop",path:"/desktop",keepAlive:{cacheId:"desktop-page"},exact:!0,component:Dt((()=>{const[e,t]=Rt();return O(window,"resize",(()=>{t.resizeBrowserWindow(window.innerWidth,window.innerHeight)})),O(window,"mousemove",(e=>{at(JSON.stringify({x:e.clientX,y:e.clientY}))})),d.createElement("div",{className:"w-full h-full relative left-0 top-0 overflow-hidden"},d.createElement(ae,{src:e.backgroundImage}),d.createElement(Pn,null),d.createElement(cn,null),d.createElement(hn,null),e.openedApps.map((t=>d.createElement(Mn,{isFocus:e.focusAppId===t.id,isMaximized:!!e.maximizedApps[t.id],isMinimized:!!e.minimizedApps[t.id],key:t.id,app:t}))),d.createElement(Ft,null),d.createElement(bn,null),e.newFolderModal&&d.createElement(Rn,{type:"folder"}),e.newFileModal&&d.createElement(Rn,{type:"file"}))}))},{redirect:"/desktop"}],Dn=[{title:"login",path:"/login",exact:!0,component:d.lazy((()=>I((()=>import("./index.4a81649e.js")),["assets/index.4a81649e.js","assets/vendor.06d83442.js"])))}],[Tn,jn]=u((e=>({pushRoutes:t=>i(s({},e),{routes:[...e.routes,...Array.isArray(t)?t:[t]]}),setMatchedRoutes:(t,n)=>i(s({},e),{matchedRoutes:t,currentRoute:n}),reset:()=>({currentRoute:{},routes:Dn,matchedRoutes:[]})})),{routes:Dn,currentRoute:{},matchedRoutes:[]}),zn=({children:e})=>d.createElement(A,{basename:"/web-ubuntu/"},e,d.createElement(On,null)),Fn=()=>{const[e]=Tn(),{routes:t}=e,n=p.exports.useMemo((()=>re(t)),[t]);return d.createElement(te,{fallback:d.createElement(ee,{loading:!0,loadingClassName:"bg-black"})},n)},On=()=>{const[e,t]=Tn(),[,n]=Ut(),{routes:r}=e,{pathname:o}=C();return p.exports.useEffect((()=>{const e=oe(r,o).map((e=>e.route)),a=e[e.length-1];t.setMatchedRoutes(e,a);const l=null==a?void 0:a.title;l&&n.setTitle(l)}),[o,r,t,n]),null},Yn=({children:e})=>d.createElement(Ht,null,d.createElement(sn,null,d.createElement(X,null,d.createElement(jn,null,e)))),$n=N.create({timeout:26e3,baseURL:"/mock"});function Ln(e){const{config:t}=e;return t.headers.noRetry?Promise.reject(e):t.headers.retryCount<=3?$n(t):Promise.reject(e)}function _n(e,t){e>3&&ht.error({content:t})}let Wn,Vn;const Bn=e=>{var t=e,{loadingClassName:n}=t,r=c(t,["loadingClassName"]);const o=m("bg-black",n);return d.createElement(ee,s({loadingClassName:o},r))};function Xn(e,t=[],n={}){const r=p.exports.useMemo((()=>({loading:n.loading||!1,err:n.err||null,data:void 0})),[n.err,n.loading]),o=p.exports.useRef(0),a=ze(),[l,c]=p.exports.useState(r);return[l,p.exports.useCallback(((...t)=>(c((e=>i(s({},e),{loading:!0}))),o.current++,e(...t).finally((()=>{o.current--})).then((e=>(0===o.current&&a()&&c((t=>i(s({},t),{data:e,loading:!1}))),[null,e])),(e=>(0===o.current&&a()&&c((t=>i(s({},t),{err:e,loading:!1}))),[e,null]))))),t)]}function Un(e){return $n({url:"/user/login",method:"post",data:e})}function Hn(){return $n({url:"/user/getUserInfo",method:"get"})}const Jn=["/login"],qn=["/login"],Kn=({children:e})=>{const[t,n]=ln(),[,r]=Tn(),{pathname:o}=C(),[,a]=Xn(Hn,[]),{isLogin:l}=t;return p.exports.useEffect((()=>{l?r.pushRoutes(Sn):r.reset()}),[l,r]),p.exports.useEffect((()=>{!function([e,t]){$n.interceptors.request.eject(Wn),$n.interceptors.response.eject(Vn),Wn=$n.interceptors.request.use((t=>{const n=s({},t);if(window.axiosPromiseArr&&Array.isArray(window.axiosPromiseArr)){const e=window.axiosPromiseArr.findIndex((e=>e.url===n.url)),t=window.axiosPromiseArr[e];t&&(t.cancel(),window.axiosPromiseArr.splice(e,1))}return n.cancelToken=new N.CancelToken((e=>{window.axiosPromiseArr=window.axiosPromiseArr||[],window.axiosPromiseArr.push({url:n.url,cancel:e})})),n.headers.token=e.token,"number"==typeof n.headers.retryCount?n.headers.retryCount++:n.headers.retryCount=0,n}),(e=>(_n(e.config.headers.retryCount,e.message),Ln(e.config)))),Vn=$n.interceptors.response.use((e=>{const{data:t}=e;return t}),(e=>{if(N.isCancel(e))return Promise.reject(e);const n=e.response,{status:r,data:o}=n;return 400===r?(ht.error({content:o.message}),Promise.reject(e)):401===r?(t.logout(),ht.error({content:o.message}),Promise.reject(e)):(e.message.includes("timeout")&&(e.message=""),_n(e.config.headers.retryCount,e.message),Ln(e))}))}([t,n])}),[t,n]),p.exports.useEffect((()=>{!async function(){if(t.isLogin&&!t.user){const[,e]=await a();e&&n.setUser(e.data)}}()}),[t,n,a]),l?qn.includes(o)?d.createElement(g,{to:"/desktop"}):d.createElement(Bn,{loading:!t.isLogin||!t.user},e):Jn.includes(o)?d.createElement(d.Fragment,null,e):d.createElement(g,{to:"/login"})};const Gn=({children:e})=>{const t=p.exports.useRef(null),[n,r]=Ut();return function(e,t){const n=p.exports.useRef(document.title);document.title=e,p.exports.useEffect((()=>{if(t&&t.restoreOnUnmount){const e=n.current;return()=>{document.title=e}}}),[t])}(n.title),p.exports.useEffect((()=>{r.setUbuntuInstance(t)}),[r]),p.exports.useEffect((()=>{t.current.style.filter=`brightness(${3/400*n.config.brightness+.25})`}),[n.config.brightness]),d.createElement("div",{ref:t,id:"web-ubuntu"},e)};I((()=>import("./mock.6ccaa437.js")),["assets/mock.6ccaa437.js","assets/vendor.06d83442.js"]).then((()=>{x.render(d.createElement(d.StrictMode,null,d.createElement(J,null,d.createElement(Yn,null,d.createElement(Gn,null,d.createElement(zn,null,d.createElement(Kn,null,d.createElement(Fn,null))))))),document.getElementById("root"))}));export{vt as F,he as S,q as a,ln as b,Pe as c,Rt as d,Un as r,Xn as u};
