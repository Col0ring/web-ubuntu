var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&a(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&a(e,n,t[n]);return e},i=(e,r)=>t(e,n(r)),c=("undefined"!=typeof require&&require,(e,t)=>{var n={};for(var a in e)o.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&r)for(var a of r(e))t.indexOf(a)<0&&s.call(e,a)&&(n[a]=e[a]);return n});import{r as p,O as u,R as d,c as m,S as f,a as g,b as h,m as b,d as w,w as y,e as x,f as v,B as E,u as k,g as C}from"./vendor.b2c3c829.js";function A(){}function N(e){e.stopPropagation()}function M(e){let{offsetTop:t,offsetLeft:n}=e,r=e.offsetParent;for(;r;)t+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent;return{offsetTop:t,offsetLeft:n}}function R({clientX:e,clientY:t},n){const{offsetLeft:r,offsetTop:o}=M(n);return{left:e-r,top:t-o}}function S(e){return(t=e)&&"object"==typeof t&&Object.keys(t).includes("current")?e.current:e;var t}function I(e,t){let n=e;for(;n;){if(t(n))return n;n=n.parentNode}return null}function D(e,t){try{return JSON.parse(e)}catch(n){return t}}function T(e,t,n,r={}){const o=p.exports.useRef();o.current=n,p.exports.useEffect((()=>{const n=S(e);if(!n)return;const s=e=>{var t;return null==(t=o.current)?void 0:t.call(o,e)};return n.addEventListener(t,s,{capture:r.capture,once:r.once,passive:r.passive}),()=>{n.removeEventListener(t,s,{capture:r.capture})}}),[e,t,...Object.values(r)])}var P,j;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),(j=P||(P={})).CREATE="CREATE",j.CREATED="CREATED",j.ACTIVE="ACTIVE",j.ACTIVATED="ACTIVATED",j.DEACTIVATED="DEACTIVATED",j.DESTROY="DESTROY";const[z,O,Y]=u((e=>({addCacheElement(t,n){const r=e[t];if(r){if(r.status===P.DESTROY){const{doms:o}=r;return o.forEach((e=>{var t;null==(t=e.parentNode)||t.removeChild(e)})),i(l({},e),{[t]:{cacheId:t,doms:[],scrolls:{x:0,y:0},element:n,status:P.CREATE}})}return e}return i(l({},e),{[t]:{cacheId:t,doms:[],element:n,scrolls:{x:0,y:0},status:P.CREATE}})},addCacheDoms:(t,n)=>e[t]?i(l({},e),{[t]:i(l({},e[t]),{doms:n,status:P.CREATED})}):e,renderCacheDoms(t,{scroll:n,parentNode:r}){const o=e[t],{doms:s}=o,{scrolls:a}=o;return s.forEach((e=>r.appendChild(e))),n&&r.scrollTo(a.x,a.y),i(l({},e),{[t]:i(l({},o),{status:P.ACTIVE})})},cacheScroll(t,n){const r=n.target;return i(l({},e),{[t]:i(l({},e[t]),{scrolls:{x:r.scrollLeft,y:r.scrollTop}})})},activate:t=>i(l({},e),{[t]:i(l({},e[t]),{status:P.ACTIVATED})}),deactivate:t=>i(l({},e),{[t]:i(l({},e[t]),{status:P.DEACTIVATED})}),refresh:t=>i(l({},e),{[t]:i(l({},e[t]),{status:P.DESTROY})}),clear:()=>Object.keys(e).reduce(((t,n)=>(t[n]=i(l({},e[n]),{status:P.DESTROY}),t)),{})})),{});function F(e){const t=p.exports.useRef(e);t.current=e,p.exports.useEffect((()=>t.current),[])}const L=({children:e,cacheId:t,className:n,style:r,scroll:o=!1})=>{const[s,a]=z(),l=p.exports.useRef(null);T(l,"scroll",(e=>{a.cacheScroll(t,e)}));const i=s[t],c=null==i?void 0:i.status,u=null==i?void 0:i.doms;return p.exports.useEffect((()=>{!u||c!==P.CREATED&&c!==P.ACTIVATED?c&&c!==P.DESTROY||a.addCacheElement(t,d.createElement(d.Fragment,null,e)):a.renderCacheDoms(t,{scroll:o,parentNode:l.current})}),[u,c,a,t,o,e]),p.exports.useEffect((()=>{(null==i?void 0:i.status)===P.DEACTIVATED&&a.activate(t)}),[c,t,a]),F((()=>{a.deactivate(t)})),d.createElement("div",{id:`keepalive-cache-${t}`,ref:l,className:n,style:r})};var $=Y((({children:e})=>{const[t,n]=z(),r=p.exports.useMemo((()=>Object.values(t).filter((e=>e&&e.status!==P.DESTROY))),[t]);return d.createElement(d.Fragment,null,e,r.map((({cacheId:e,doms:t,element:r})=>d.createElement("div",{id:`element-cache-${e}`,key:e,ref:r=>{if(r&&0===t.length){const t=[...r.childNodes];n.addCacheDoms(e,t)}}},r))))}));const _=({title:e,message:t})=>d.createElement("div",{className:"p-5 w-full h-full flex flex-col items-center justify-center bg-ub-cool-grey"},d.createElement("p",{className:"text-red-500 text-xl"},e),d.createElement("p",{className:"text-ubt-grey mt-3 text-sm"},t)),W={hasError:!1,error:null};class V extends d.Component{constructor(){var e;super(...arguments),a(this,"symbol"!=typeof(e="state")?e+"":e,W)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{fallback:e,showError:t,children:n}=this.props,{error:r,hasError:o}=this.state,s=t?null==r?void 0:r.message:"Something Wrong!",a=t?null==r?void 0:r.stack:"it looks like there are some problems, please try again later.";return o?e||d.createElement(_,{title:s,message:a}):n}}var X,B;function q(e,t=0,...n){const r=function(e,t=0){const n=p.exports.useRef(X.Free),r=p.exports.useRef(),o=p.exports.useRef(e),s=p.exports.useCallback((()=>n.current),[]),a=p.exports.useCallback(((...e)=>{n.current=X.Pending,r.current&&clearInterval(r.current),r.current=setInterval((()=>{n.current=X.Calling,o.current(...e)}),t)}),[t]),l=p.exports.useCallback((()=>{n.current=X.Canceled,r.current&&clearInterval(r.current)}),[]);return p.exports.useEffect((()=>{o.current=e}),[e]),F(l),{currentStatus:s,run:a,cancel:l}}(e,t);return p.exports.useEffect((()=>{r.run(...n)}),[t]),r}(B=X||(X={})).Free="free",B.Pending="pending",B.Canceled="cancelled",B.Calling="calling";const U=({children:e,delay:t=500,dotNumber:n=3,className:r})=>{const[o,s]=p.exports.useState("");q((()=>{s((e=>e===".".repeat(n)?"":`${e}.`))}),t);const a=m("ml-1",r);return d.createElement(d.Fragment,null,e,d.createElement("span",{className:a},o))},H=({tips:e="loading",loading:t,children:n,className:r,loadingClassName:o})=>{const s=m("relative w-full h-full",r),a=m("absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center",o);return d.createElement("div",{className:s},t&&d.createElement("div",{style:{zIndex:1e4},className:a},d.createElement("img",{className:"animate-spin w-20",src:"/themes/Yaru/status/process-working-symbolic.svg",alt:"Loading Spinner"}),d.createElement("p",{className:"text-white"},d.createElement(U,null,e))),n)},J=({children:e,fallback:t})=>d.createElement(V,null,d.createElement(p.exports.Suspense,{fallback:t||d.createElement(H,{loading:!0})},e)),K=({children:e})=>d.createElement(d.Fragment,null,e);function G(e,t,n){return e?d.createElement(f,l({},n),e.map(((e,r)=>e.redirect?d.createElement(g,{key:e.key||r,to:e.redirect}):d.createElement(h,{key:e.key||r,path:e.path,exact:e.exact,strict:e.strict,render:r=>{let o;e.routes&&(o=d.createElement(J,null,G(e.routes,t,n)));const s=()=>e.render?e.render(i(l(l({},r),t),{children:o,route:e})):d.createElement(e.component||K,e.component?i(l(l({},r),t),{route:e}):null,o);return e.keepAlive?d.createElement(L,i(l({},e.keepAlive),{style:{width:"100%",height:"100%"}}),s()):s()}})))):null}function Q(e,t){const n=[];return e.some((e=>{const r=e.path?b(t,e):n.length?n[n.length-1].match:w.computeRootMatch(t);return r&&(n.push({route:e,match:r}),e.routes&&n.push(...Q(e.routes,t))),r})),n}const Z={},ee=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in Z)return;Z[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},te=({src:e})=>d.createElement("div",{style:{backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center"},className:"absolute top-0 right-0 overflow-hidden h-full w-full -z-10"}),ne=y({reducerMapper:x}),re=({title:e,icon:t,img:n})=>d.createElement("div",{className:"flex-grow flex flex-col justify-center items-center h-full w-full"},d.createElement("div",{className:"w-24"},t||d.createElement("img",{className:"w-full",src:n||"./themes/Yaru/status/empty-folder.svg",alt:"ubuntu-empty"})),d.createElement("span",{className:"font-bold mt-4 text-xl px-1 text-gray-400"},e)),oe=({className:e,app:t,onOpen:n})=>{const r=m("p-1 m-px z-10 bg-white bg-opacity-0 hover:bg-opacity-20 focus:bg-ub-orange focus:bg-opacity-50 focus:border-yellow-700 focus:border-opacity-100 border border-transparent outline-none rounded select-none w-24 flex flex-col  items-center text-center text-xs font-normal text-white",e),o=p.exports.useCallback((()=>{null==n||n(t.id,t)}),[n,t.id,t]),s=p.exports.useCallback((e=>{"Enter"===e.key&&(null==n||n(t.id,t))}),[n,t.id,t]);return d.createElement("div",{tabIndex:0,className:r,onDoubleClick:o,onKeyPress:s},d.createElement("img",{className:"mb-1 w-10",src:t.icon,alt:t.title}),d.createElement("span",{className:"mt-1"},t.title))};(async()=>{window.ResizeObserver||(window.ResizeObserver=(await ee((()=>import("./ResizeObserver.es.1591e951.js")),[])).default)})();const se={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const[ae,le,ie]=u((e=>({setDragArea:t=>i(l({},e),{dragArea:t})})),{dragArea:{width:0,height:0,limitRange:{x:[0,0],y:[0,0]}}});var ce=ie((({children:e,onDrop:t,limitRange:n,preventDropAction:r,className:o})=>{const[,s]=ae(),a=p.exports.useRef(null),{width:l,height:i}=function(e){const[t,n]=p.exports.useState(se);return p.exports.useEffect((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0];if(!t)return;const{x:r,y:o,width:s,height:a,top:l,left:i,bottom:c,right:p}=t.contentRect;n({x:r,y:o,width:s,height:a,top:l,left:i,bottom:c,right:p})}));return t.observe(e.current),()=>{t.disconnect()}}),[e.current]),t}(a),c=m("relative w-full h-full left-0 top-0",o),u=p.exports.useCallback((e=>{r&&e.preventDefault(),null==t||t(e)}),[t]);return p.exports.useEffect((()=>{s.setDragArea({width:l,height:i,limitRange:n||{x:[0,l],y:[0,i]}})}),[l,n,i,s]),d.createElement("div",{ref:a,onDrop:u,className:c},e)}));const pe=({data:e,children:t,onDragEnd:n,onDragStart:r,onDrag:o,className:s,style:a,nodeRef:c,defaultPosition:u,onPositionChange:f})=>{const[g]=ae(),{dragArea:h}=g,b=p.exports.useRef(null),w=c||b,[y,x]=p.exports.useState(u||{left:0,top:0}),[v,E]=p.exports.useState({left:0,top:0}),k=p.exports.useCallback(((e,t)=>{const n=t.currentTarget;E({left:t.clientX-n.offsetLeft,top:t.clientY-n.offsetTop}),null==r||r(e,t)}),[r,E]),C=p.exports.useCallback(((e,t)=>{let r=t.clientX-v.left,o=t.clientY-v.top;const{x:s,y:a}=h.limitRange,l=w.current.getBoundingClientRect();r<s[0]&&(r=0),r>s[1]-l.width&&(r=s[1]-l.width),o>a[1]-l.height&&(o=a[1]-l.height),o<a[0]&&(o=a[0]),x({left:r,top:o}),null==n||n(e,t)}),[n,x,v,h.limitRange]),A=p.exports.useCallback(((e,t)=>{null==o||o(e,t)}),[o,x,v,h.limitRange]),[,N]=function(e){const[t,n]=p.exports.useState(!1);return[t,p.exports.useCallback((t=>({draggable:"true",onDragStart:r=>{var o;n(!0),null==(o=null==e?void 0:e.onDragStart)||o.call(e,t,r),r.dataTransfer.setData("custom",JSON.stringify(t)),(null==e?void 0:e.customDragData)&&"object"==typeof e.customDragData&&Object.keys(e.customDragData).forEach((t=>{r.dataTransfer.setData(t,e.customDragData[t])}))},onDrag:n=>{var r;null==(r=null==e?void 0:e.onDrag)||r.call(e,t,n)},onDragEnd:r=>{var o;n(!1),null==(o=null==e?void 0:e.onDragEnd)||o.call(e,t,r)}})),[Object.values(e||{}),n])]}({onDragStart:k,onDragEnd:C,onDrag:A}),M=m(s,"absolute"),R=p.exports.useMemo((()=>{const{x:e,y:t}=h.limitRange;return l({left:"string"==typeof y.left?y.left:y.left/e[1]*100+"%",top:"string"==typeof y.top?y.top:y.top/t[1]*100+"%"},a)}),[a,y,h.limitRange]);p.exports.useEffect((()=>{null==f||f(y)}),[y]),p.exports.useEffect((()=>{u&&x(u)}),[null==u?void 0:u.top,null==u?void 0:u.left]);const S=p.exports.useMemo((()=>e),[e]);return d.createElement("div",i(l({ref:w},N(S)),{style:R,className:M}),t)},ue=e=>{var t,n;const[r,o]=p.exports.useState({left:(null==(t=e.app.position)?void 0:t.left)||0,top:(null==(n=e.app.position)?void 0:n.top)||0}),[s,a]=p.exports.useState((()=>{var t,n;return!(!e.app.position||!(null!=(n=e.app.position.left)?n:null==(t=e.app.position)?void 0:t.top))})),[,c]=Xe(),u=p.exports.useRef(null);p.exports.useEffect((()=>{s||requestAnimationFrame((()=>{if(u.current){const e=u.current.offsetLeft,t=u.current.offsetTop;o({left:e,top:t}),requestAnimationFrame((()=>{u.current.scrollTop,a(!0)}))}}))}),[]);const m=p.exports.useMemo((()=>({from:e.folderId,app:e.app})),[e.app,e.folderId]),f=p.exports.useCallback((t=>{c.updateFolderApp({from:e.folderId,to:e.folderId,data:i(l({},e.app),{position:t})})}),[e.app,e.folderId]),g=p.exports.useCallback(((e,t)=>{const n=t.currentTarget;t.dataTransfer.setData("domOffset",JSON.stringify(R({clientX:t.clientX,clientY:t.clientY},n)))}),[]);return d.createElement(pe,{onDragStart:g,nodeRef:u,defaultPosition:r,style:{position:s?"absolute":"relative"},onPositionChange:f,data:m},d.createElement(oe,l({},e)))};function de(e){return!!e&&(Array.isArray(e.apps)||!!e.folder)}function me(e,{currentId:t,prevId:n,parentId:r,prevParentId:o}){const s=e[n],a=e[r],c=e[o];s.parentId=r,s.id=t,Reflect.deleteProperty(e,n),e[t]=s,c.apps=c.apps.filter((e=>e.id!==n)),a.apps.push(s),de(s)&&(s.apps=s.apps.map((n=>{const r=n.id,o=r.split("/"),s=`${t}/${o[o.length-1]}`;return me(e,{currentId:s,prevId:r,parentId:t,prevParentId:t}),i(l({},n),{id:s,parentId:t})})))}const fe=({id:e,emptyProps:t})=>{const[{appMap:n},r]=Xe(),o=p.exports.useMemo((()=>{const t=n[e];return de(t)?t.apps.map((e=>n[e.id])):[]}),[n]),s=p.exports.useCallback(((e,t)=>{r.openApp(e,t)}),[r]);return d.createElement("div",{className:"w-full h-full flex flex-col bg-ub-cool-grey text-white select-none overflow-x-auto overflow-y-auto ub-scrollbar"},d.createElement(ce,{onDrop:t=>{const o=D(t.dataTransfer.getData("custom"),{}),s=n[o.app.id],a=D(t.dataTransfer.getData("domOffset"),{}),c=t.currentTarget,{offsetLeft:p,offsetTop:u}=M(c),d=o.from===e?s.position:{left:t.clientX-p-a.left,top:t.clientY-u-a.top};r.updateFolderApp({from:o.from,to:e,data:i(l({},s),{position:d})})},preventDropAction:!0,className:"min-h-full flex-grow flex flex-wrap items-start content-start justify-start"},o.length>0?o.map((t=>d.createElement(ue,{onOpen:s,folderId:e,key:t.id,app:t}))):d.createElement(re,l({title:"Folder is Empty"},t))))};var ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fe});const he=d.lazy((()=>ee((()=>import("./todoist.55fd9847.js")),["assets/todoist.55fd9847.js","assets/vendor.b2c3c829.js"]))),be=d.lazy((()=>ee((()=>import("./firefox.1e1ba48d.js")),["assets/firefox.1e1ba48d.js","assets/vendor.b2c3c829.js"]))),we=d.lazy((()=>ee((()=>import("./settings.0be85629.js")),["assets/settings.0be85629.js","assets/vendor.b2c3c829.js"]))),ye=d.lazy((()=>ee((()=>import("./trash.aaef156b.js")),["assets/trash.aaef156b.js","assets/vendor.b2c3c829.js"]))),xe=d.lazy((()=>ee((()=>import("./vscode.8108eb09.js")),["assets/vscode.8108eb09.js","assets/vendor.b2c3c829.js"]))),ve=[{parentId:"/",folder:!0,id:"/desktop",title:"Desktop",apps:[{parentId:"/desktop",id:"/desktop/Col0ring",title:"Col0ring",icon:"./themes/Yaru/system/folder.png",render:e=>d.createElement(fe,{id:e}),folder:!0,apps:[{parentId:"/desktop/Col0ring",id:"/desktop/Col0ring/index.php",icon:"./themes/filetypes/php.png",title:"php"},{parentId:"/desktop/Col0ring",title:"Angular.js",id:"/desktop/Col0ring/Angular.js",icon:"./themes/filetypes/js.png"}]},{parentId:"/desktop",id:"/desktop/222",title:"222",icon:"./themes/Yaru/system/folder.png",render:e=>d.createElement(fe,{id:e}),folder:!0,apps:[{parentId:"/desktop/222",id:"/desktop/222/js",icon:"./themes/filetypes/php.png",title:"js"}]},{parentId:"/desktop",id:"/desktop/firefox-shortcut",title:"Firefox Browser",icon:"./themes/Yaru/apps/firefox.svg",redirect:"/application/firefox"},{parentId:"/desktop",id:"/application/todo-ist",title:"Todoist",icon:"./themes/Yaru/apps/todoist.png",redirect:"/application/todo-ist"}]},{parentId:"/",folder:!0,id:"/application",title:"Application",apps:[{parentId:"/application",id:"/application/firefox",title:"Firefox Browser",icon:"./themes/Yaru/apps/firefox.svg",disabled:!1,render:()=>d.createElement(be,null)},{parentId:"/application",id:"/application/todo-ist",title:"Todoist",icon:"./themes/Yaru/apps/todoist.png",disabled:!1,render:()=>d.createElement(he,null)},{parentId:"/application",id:"/application/about-col0ring",title:"About Col0ring",icon:"./themes/Yaru/system/user-home.png",disabled:!1},{parentId:"/application",id:"/application/vscode",title:"Visual Studio Code",icon:"./themes/Yaru/apps/vscode.png",disabled:!1,render:()=>d.createElement(xe,null)},{parentId:"/application",id:"/application/terminal",title:"Terminal",icon:"./themes/Yaru/apps/bash.png",disabled:!1},{parentId:"/application",id:"/application/music",title:"Music",icon:"./themes/Yaru/apps/vue-aplayer-round.png",disabled:!1},{parentId:"/application",id:"/application/settings",title:"Settings",icon:"./themes/Yaru/apps/gnome-control-center.png",disabled:!1,render:()=>d.createElement(we,null)},{parentId:"/application",id:"/application/trash",title:"Trash",icon:"./themes/Yaru/system/user-trash-full.png",disabled:!1,folder:!0,render:()=>d.createElement(ye,null),apps:[{parentId:"/application/trash",id:"/application/trash/index.php",icon:"./themes/filetypes/php.png",title:"php"},{parentId:"/application/trash",title:"Angular.js",id:"/application/trash/Angular.js",icon:"./themes/filetypes/js.png"}]},{parentId:"/application",id:"/application/gedit",title:"Send a Message",icon:"./themes/Yaru/apps/gedit.png",disabled:!1}]}],Ee={"wall-1":"/images/wallpapers/wall-1.jpg","wall-2":"/images/wallpapers/wall-2.png","wall-3":"/images/wallpapers/wall-3.jpg","wall-4":"/images/wallpapers/wall-4.jpg","wall-5":"/images/wallpapers/wall-5.jpg","wall-6":"/images/wallpapers/wall-6.png","wall-7":"/images/wallpapers/wall-7.png","wall-8":"/images/wallpapers/wall-8.jpg"},ke={navbar:30,sidebar:52},Ce="edit-buttons",Ae="toolbar",Ne="desktopApp",Me="sidebarApp";function Re(e,t={}){const{defaultValue:n,map:r=(e=>e)}=t,o=e[0].toUpperCase()+e.slice(1),s=`web-ubuntu-${e}-key`;return{[`set${o}`](e){localStorage.setItem(s,e)},[`get${o}`](){var e,t;return null!=(t=null!=(e=r(localStorage.getItem(s)))?e:n)?t:null},[`remove${o}`](){localStorage.removeItem(s)}}}const{setBackgroundImage:Se,getBackgroundImage:Ie}=Re("backgroundImage");var De,Te;function Pe(e,t=0){const n=p.exports.useRef(De.Free),r=p.exports.useRef(),o=p.exports.useRef(e);o.current=e;const s=p.exports.useCallback((()=>n.current),[]),a=p.exports.useCallback(((...e)=>{n.current=De.Pending,r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{n.current=De.Called,o.current(...e)}),t)}),[t]),l=p.exports.useCallback((()=>{n.current=De.Canceled,r.current&&clearTimeout(r.current)}),[]);return F(l),{currentStatus:s,run:a,cancel:l}}(Te=De||(De={})).Free="free",Te.Pending="pending",Te.Canceled="cancelled",Te.Called="called";const je=({children:e,visible:t=!1,exist:n=!1,duration:r,transitionProperty:o=["all"],leaveClassName:s="",enterClassName:a="",nodeRef:c})=>{const[u,f]=p.exports.useState(!1),{run:g,cancel:h}=Pe((e=>{f(e)}),r),b=p.exports.useRef(null),w=c||b;if(p.exports.useEffect((()=>{var e;h(),t?(null==(e=w.current)||e.scrollTop,f(t)):g(t)}),[t,g]),d.isValidElement(e)){if(d.Children.only(e)){const{props:c}=e,p=m(c.className,{hidden:n&&!(t||u),[a]:u,[s]:!t});return n||t||u?d.cloneElement(e,i(l({},c),{ref:w,style:Object.assign({},c.style,{transitionProperty:r?o.join(","):void 0,transitionDuration:`${r}ms`}),className:p})):null}return d.createElement(d.Fragment,null,d.Children.map(e,(e=>{const{props:c}=e,p=m(c.className,{hidden:n&&!(t||u),[a]:u,[s]:!t});return n||t||u?d.cloneElement(e,i(l({},c),{style:Object.assign({},c.style,{transitionProperty:r?o.join(","):void 0,transitionDuration:`${r}ms`}),className:p})):null})))}return d.createElement(d.Fragment,null,e)};const ze={"top left":"left-0 top-0","top right":"right-0 top-0","bottom left":"left-0 bottom-0","bottom right":"right-0  bottom-0"},Oe={info:"bg-ub-cool-grey",error:"bg-red-500",success:"bg-green-500",warning:"bg-yellow-500"};var Ye=p.exports.forwardRef((({duration:e=3e3,type:t="info",direction:n="top right",content:r,description:o,wrapperClassName:s},a)=>{const[l,i]=p.exports.useState(!0),{run:c,cancel:u}=Pe((()=>{i(!1)}),e),f=p.exports.useCallback((()=>{u(),i(!1)}),[i,u]);p.exports.useImperativeHandle(a,(()=>({close:f})),[f]);const g=m("message-container",{"message-left":n.includes("left"),"message-right":n.includes("right")},ze[n],Oe[t],s);return p.exports.useEffect((()=>{c()}),[]),d.createElement(je,{visible:l,duration:300,enterClassName:"message-container-show",leaveClassName:"message-container-leave"},d.createElement("div",{className:g},d.createElement("div",{className:"text-white"},r),d.createElement("div",{className:"text-xs mt-1 text-ubt-grey"},o)))}));const Fe=d.createRef(),Le=e=>{Fe.current&&Fe.current.close();const t=document.createElement("div");document.body.append(t),v.render(v.createPortal(d.createElement(Ye,l({ref:Fe},e)),document.body),t),document.body.removeChild(t)};var $e,_e;["info","error","success","warning"].forEach((e=>{Le[e]=t=>{Le(i(l({},t),{type:e}))}})),(_e=$e||($e={})).Application="/application",_e.Desktop="/desktop",_e.Settings="/application/settings";const We=d.lazy((()=>ee((()=>Promise.resolve().then((function(){return ge}))),void 0))),Ve=function e(t){const n={};return t.forEach((t=>{n[t.id]=t,de(t)&&Object.assign(n,e(t.apps||[]))})),n}(ve),[Xe,Be,qe]=u((e=>[{chooseBackgroundImage:t=>(Se(t),e.backgroundImage=t,e),setNewFolderModal:t=>(e.newFolderModal=t,e),setAllAppsScreen:t=>(e.allAppsScreen=t,e),setLockScreen:t=>(e.lockScreen=t,e),setMousePosition:t=>(e.mousePosition=t,e),resizeBrowserWindow:(t,n)=>(e.defaultAppWindow.minHeight=n/3,e.defaultAppWindow.minWidth=t/3,e),updateOpenedApp:(t,n)=>(e.openedApps=e.openedApps.map((e=>e.id===t?n:e)),e.openedAppMap[t]=n,e),addNewFolder(t,n){const r=e.appMap[$e.Desktop],o=`${$e.Desktop}/${t}`;if(r.apps.find((e=>e.id===o)))return Le.error({content:"Something Wrong",description:`The name ${t} is already in use. Please choose another name`,duration:5e3}),e;const s={id:o,title:t,parentId:$e.Desktop,folder:!0,icon:"./themes/Yaru/system/folder.png",disabled:!1,position:n,apps:[],render:e=>d.createElement(We,{id:e})};return this.setNewFolderModal(!1),r.apps.push(s),e.appMap[o]=s,e},updateFolderApp({from:t,to:n,data:r}){const o=e.appMap[t];if(e.appMap[r.id]=r,t===n)return o.apps=o.apps.map((e=>e.id===r.id?r:e)),e;{if(n===r.id)return e;const t=e.appMap[n],s=r.id.split("/"),a=`${t.id}/${s[s.length-1]}`;return me(e.appMap,{currentId:a,prevId:r.id,parentId:t.id,prevParentId:o.id}),Reflect.deleteProperty(e.openedAppMap,r.id),Reflect.deleteProperty(e.maximizedApps,r.id),Reflect.deleteProperty(e.minimizedApps,r.id),e.openedApps=e.openedApps.filter((e=>e.id!==r.id)),e}},openApp(t,n){const r=n.redirect||t;if(e.openedAppMap[r]){const t=e.openedAppMap[r];return Reflect.deleteProperty(e.minimizedApps,r),e.openedApps=[...e.openedApps.filter((e=>e.id!==r)),t],e.focusAppId=r,e}const o=i(l({},e.appMap[r]),{rect:l({},e.defaultAppWindow),windowPosition:{left:0,top:0}});return e.focusAppId=r,e.openedApps.push(o),e.openedAppMap[r]=o,e},closeApp:t=>(e.focusAppId=e.focusAppId===t?"":e.focusAppId,e.openedApps=e.openedApps.filter((e=>e.id!==t)),Reflect.deleteProperty(e.maximizedApps,t),Reflect.deleteProperty(e.minimizedApps,t),Reflect.deleteProperty(e.openedAppMap,t),e),minimizeApp:(t,n)=>(e.minimizedApps[t]?Reflect.deleteProperty(e.minimizedApps,t):e.minimizedApps[t]=n,e.focusAppId=e.focusAppId===t?"":e.focusAppId,e),maximizeApp:(t,n)=>(e.maximizedApps[t]?Reflect.deleteProperty(e.maximizedApps,t):e.maximizedApps[t]=n,e.focusAppId=t,e),clickApp(t,n){const r=e.appMap[n.parentId];return r.apps=[...r.apps.filter((e=>e.id!==t)),n],e}}]),{backgroundImage:Ie()||Ee["wall-2"],backgroundImages:Ee,mousePosition:{clientX:0,clientY:0},newFolderModal:!1,defaultAppWindow:{width:"85%",height:"80%",minWidth:window.innerWidth/3,minHeight:window.innerHeight/3},allAppsScreen:!1,lockScreen:!1,focusAppId:"",openedAppMap:{},openedApps:[],minimizedApps:{},maximizedApps:{},frequentApps:Ve[$e.Application].apps,favoriteApps:Ve[$e.Application].apps,appMap:Ve},ne),Ue=({tabs:e,onItemClick:t,stretch:n,active:r,className:o,fontSize:s,itemClassName:a})=>{const l=m("flex flex-col group  bg-transparent cursor-pointer items-center",{"flex-1":n},a),i=m("w-full flex",o);return d.createElement("div",{className:i},e.map(((e,n)=>d.createElement("div",{key:e.name,className:l,onClick:()=>null==t?void 0:t(e.name,n)},d.createElement("div",{style:{fontSize:s},className:"flex-1 flex justify-center items-center text-white",onClick:e.onClick},e.render?e.render():d.createElement("span",null,e.title||e.name)),d.createElement("div",{className:"w-full h-1 mt-1 "+(e.name===r?"bg-ub-orange":"bg-transparent group-hover:bg-white")})))))},He=({placeholder:e="Type to Search...",className:t,value:n,onChange:r})=>{const o=m("flex w-1/4 h-full items-center pl-2 pr-2 bg-white border-black border-width-2 rounded-xl overflow-hidden left",t),s=void 0===n,a=p.exports.useCallback((e=>{null==r||r(e.target.value,e)}),[r]);return d.createElement("div",{className:o},d.createElement("img",{className:"w-5 h-5",alt:"search icon",src:"/images/logos/search.png"}),d.createElement("input",{className:"w-full p-1 bg-transparent focus:outline-none",placeholder:e,value:s?void 0:n,onChange:a}))};const Je=[{name:"Frequent"},{name:"All"}],Ke=()=>{const[{appMap:e,allAppsScreen:t,frequentApps:n},r]=Xe(),[o,s]=p.exports.useState("All"),a=p.exports.useMemo((()=>e[$e.Application].apps),[e]),l=p.exports.useCallback((e=>{s(e)}),[s]),i=p.exports.useCallback(((e,t)=>{r.openApp(e,t),r.setAllAppsScreen(!1)}),[r]),c=m("all-apps-screen absolute h-full w-full left-0 top-0 z-30 justify-center border-black border-opacity-60 bg-black bg-opacity-70");return d.createElement(je,{duration:200,enterClassName:"all-apps-screen-show",leaveClassName:"all-apps-screen-leave",exist:!0,visible:t},d.createElement("div",{style:{paddingRight:ke.sidebar},className:c},d.createElement("div",{style:{paddingTop:ke.navbar},className:"relative w-full h-full"},d.createElement("div",{className:"flex p-5 align-center justify-center"},d.createElement(He,{placeholder:"Type to Search..."})),d.createElement("div",{className:"flex flex-wrap"},"Frequent"===o?n.map((e=>d.createElement(oe,{key:e.id,onOpen:i,app:e}))):a.map((e=>d.createElement(oe,{key:e.id,onOpen:i,app:e})))),d.createElement("div",{className:"flex items-center p-2 justify-center absolute left-0 bottom-0 mb-15 w-full"},d.createElement("div",{className:"w-1/2"},d.createElement(Ue,{active:o,onItemClick:l,fontSize:16,stretch:!0,tabs:Je}))))))};function Ge(e){return e<10?`0${e}`:`${e}`}const Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ze=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],et=({className:e,type:t="default",showSeconds:n,delay:r=1e3,hour12:o=!0})=>{const[s,a]=p.exports.useState((()=>new Date)),l=p.exports.useMemo((()=>{const e=Ze[s.getDay()];let r=s.getHours();const a=Ge(s.getMinutes()),l=Ge(s.getSeconds()),i=n?`:${l}`:"",c=Qe[s.getMonth()],p=s.getDate(),u=r<12?"AM":"PM";switch(o&&r>12&&(r-=12),t){case"date":return`${e} ${c} ${p}`;case"time":return`${r}:${a}${i} ${u}`;case"default":default:return`${e} ${c} ${p} ${r}:${a}${i} ${u}`}}),[s,t]),i=m(e);return q((()=>{a(new Date)}),r),d.createElement("span",{className:i},l)},tt=({className:e,children:t,color:n,onClick:r})=>{const o=m("pl-2 pr-2 outline-none transition duration-100 ease-in-out border-b-2 border-transparent focus:border-ubb-orange py-1",e);return d.createElement("div",{tabIndex:0,style:{borderColor:n},className:o,onClick:r},t)},{setBrightness:nt,getBrightness:rt}=Re("brightness",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),{setSound:ot,getSound:st}=Re("sound",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),[at,lt]=u((e=>({setUbuntuInstance:t=>i(l({},e),{ubuntu:t}),setBrightness:t=>(nt(`${t}`),i(l({},e),{config:i(l({},e.config),{brightness:t})})),setSound:t=>(ot(`${t}`),i(l({},e),{config:i(l({},e.config),{sound:t})})),setTitle:t=>i(l({},e),{title:`Web Ubuntu - ${t}`})})),{title:"Web Ubuntu",ubuntu:{current:null},config:{brightness:rt(),sound:st()}});const it={up:"Bottom",down:"Top",left:"Right",right:"Left"},ct=({direction:e,className:t,size:n,color:r})=>{const o=m(`arrow-custom-${e} inline-block`,t);return d.createElement("i",{style:{borderWidth:n,[`border${it[e]}Color`]:r},className:o})};const pt=({className:e,min:t=0,max:n=100,step:r=1,value:o,onChange:s})=>{const a=m("ubuntu-slider",e),l=void 0===o,i=p.exports.useCallback((e=>{null==s||s(+e.target.value,e)}),[s]);return d.createElement("input",{type:"range",min:`${t}`,max:`${n}`,step:`${r}`,defaultValue:l?"0":void 0,value:l?void 0:`${o}`,onChange:i,className:a})},ut=({icons:e})=>d.createElement("div",{className:"flex justify-center items-center"},e.map((({name:e,icon:t})=>d.createElement("img",{className:"mx-1.5",key:e,src:t,alt:e}))),d.createElement("span",{className:"mx-1"},d.createElement(ct,{direction:"down"}))),dt=["click"];function mt(e,t,n=dt){const r=p.exports.useRef(t);r.current=t,p.exports.useEffect((()=>{const t=t=>{const n=S(e);n&&!n.contains(t.target)&&r.current(t)};for(const e of n)document.addEventListener(e,t);return()=>{for(const e of n)document.removeEventListener(e,t)}}),[n,e])}const ft=({children:e,image:t,imageAlt:n,onClick:r,name:o})=>d.createElement("div",{onClick:r,className:"w-64 py-1.5 flex items-center justify-center bg-ub-cool-grey hover:bg-ub-warm-grey hover:bg-opacity-20"},d.createElement("div",{className:"w-8"},d.createElement("img",{src:t,alt:n||o})),e||d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,o))),gt=()=>d.createElement("div",{className:"w-64 flex content-center justify-center"},d.createElement("i",{className:"w-2/4 border-black border-opacity-50 border-b my-2 border-solid"}));const ht=({menus:e,onClickAway:t,visible:n})=>{const r=p.exports.useRef(null),o=m("absolute bg-ub-cool-grey rounded-md py-4 top-9 right-3 shadow border-black border border-opacity-20 status-menu");return d.createElement(je,{enterClassName:"status-menu-show",leaveClassName:"status-menu-leave",duration:200,nodeRef:r,visible:n},d.createElement("div",{ref:r,className:o},d.createElement("i",{className:"absolute w-0 h-0 -top-2 right-6 top-arrow-up inline-block"}),e.map(((t,n)=>d.createElement(d.Fragment,{key:n},t.map((e=>{var t=e,{render:n}=t,r=c(t,["render"]);return d.createElement(ft,l({key:r.image},r),null==n?void 0:n())})),n!==e.length-1&&d.createElement(gt,null)))),d.createElement(bt,{statusMenuRef:r,onClickAway:t})))},bt=({statusMenuRef:e,onClickAway:t})=>(mt(e,(e=>{null==t||t(e)})),null),{setToken:wt,getToken:yt,removeToken:xt}=Re("token"),vt=yt(),[Et,kt]=u((e=>({login:t=>(wt(t),i(l({},e),{token:t,isLogin:!0})),setUser:t=>i(l({},e),{user:t}),logout:()=>(xt(),i(l({},e),{user:null,token:null,isLogin:!1}))})),{user:null,token:vt,isLogin:!!vt}),Ct=()=>{const[e,t]=p.exports.useState(!1),[,n]=Et(),[r,o]=at(),[{appMap:s},a]=Xe(),{config:{sound:l,brightness:i}}=r,c=p.exports.useCallback((e=>{o.setSound(e)}),[o]),u=p.exports.useCallback((e=>{o.setBrightness(e)}),[o]),m=p.exports.useCallback((()=>{t(!0)}),[t]),f=p.exports.useCallback((()=>{t(!1)}),[t]),g=p.exports.useMemo((()=>[{icon:"/themes/Yaru/status/network-wireless-signal-good-symbolic.svg",name:"ubuntu wifi"},{icon:"/themes/Yaru/status/audio-volume-medium-symbolic.svg",name:"ubuntu sound"},{icon:"/themes/Yaru/status/battery-good-symbolic.svg",name:"ubuntu battry"}]),[]),h=p.exports.useMemo((()=>[[{image:"/themes/Yaru/status/audio-headphones-symbolic.svg",imageAlt:"ubuntu headphone",render:()=>d.createElement(pt,{onChange:c,className:"ubuntu-slider w-2/3",value:l})},{image:"/themes/Yaru/status/display-brightness-symbolic.svg",imageAlt:"ubuntu brightness",render:()=>d.createElement(pt,{onChange:u,className:"ubuntu-slider w-2/3",value:i})}],[{image:"/themes/Yaru/status/network-wireless-signal-good-symbolic.svg",imageAlt:"ubuntu wifi",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"OnePlus 8 Pro"),d.createElement(ct,{direction:"right"}))},{image:"/themes/Yaru/status/battery-good-symbolic.svg",imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"Off"),d.createElement(ct,{direction:"right"}))},{image:"/themes/Yaru/status/bluetooth-symbolic.svg",imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"2:40 Remaining (75%)"),d.createElement(ct,{direction:"right"}))}],[{image:"/themes/Yaru/status/emblem-system-symbolic.svg",imageAlt:"ubuntu settings",name:"Settings",onClick:()=>{a.openApp($e.Settings,s[$e.Settings])}},{image:"/themes/Yaru/status/changes-prevent-symbolic.svg",imageAlt:"ubuntu lock",name:"Lock",onClick:()=>{a.setLockScreen(!0)}},{image:"/themes/Yaru/status/system-shutdown-symbolic.svg",imageAlt:"ubuntu power",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,"Power Off / Log Out"),d.createElement(ct,{direction:"right"})),onClick:()=>{n.logout()}}]]),[l,i,c,u,s,n]);return d.createElement("div",{className:"absolute top-0 left-0 w-full shadow-md flex flex-nowrap justify-between items-center bg-ub-grey text-ubt-grey text-sm select-none z-60"},d.createElement(tt,null,"Activities"),d.createElement(tt,{className:"text-xs md:text-sm"},d.createElement(et,null)),d.createElement(tt,{className:"relative",onClick:m},d.createElement(ut,{icons:g}),d.createElement(ht,{visible:e,menus:h,onClickAway:f})))};function At(e,t={}){const{onEnter:n,onLeave:r}=t,[o,s]=p.exports.useState(!1);return T(e,"mouseenter",(()=>{null==n||n(),s(!0)})),T(e,"mouseleave",(()=>{null==r||r(),s(!1)})),o}const Nt={top:"mb-1.5 bottom-full left-1/2 transform  -translate-x-1/2",bottom:"mt-1.5 top-full left-1/2 transform  -translate-x-1/2",left:"mr-1.5 top-1/2 transform -translate-y-1/2 right-full",right:"ml-1.5 top-1/2 transform -translate-y-1/2 left-full","top left":"mb-0.5 right-full mr-0.5 bottom-full","top right":"mb-0.5 left-full ml-0.5 bottom-full","bottom left":"mt-0.5 right-full mr-0.5 top-full","bottom right":"mt-0.5 left-full ml-0.5 top-full"},Mt=({title:e,direction:t="right",children:n,className:r})=>{const o=p.exports.useRef(null),s=At(o),a=m("relative",r),l=m("whitespace-nowrap py-0.5 px-1.5 absolute  text-ubt-grey text-opacity-90 text-sm bg-ub-grey bg-opacity-70 border-gray-400 border border-opacity-40 rounded-md",Nt[t]);return d.createElement("div",{ref:o,className:a},n,s&&d.createElement("div",{className:l},e))};const Rt=({onClick:e,isOpen:t,app:n,isMinimized:r})=>{const o=p.exports.useRef(null),[s,a]=p.exports.useState(!1),{run:l}=Pe((()=>{a(!1)}),1e3),i=m("w-auto p-2 outline-none relative transition hover:bg-white hover:bg-opacity-10 rounded",{"bg-white bg-opacity-10":t}),c=p.exports.useCallback((()=>{r||t||(a(!0),l()),null==e||e(n.id,n)}),[e,n.id,n,r,t]);return d.createElement(Mt,{className:"m-1",title:n.title,direction:"left"},d.createElement("div",{"data-target":Me,tabIndex:0,ref:o,onClick:c,className:i,id:`sidebar-app-${n.id}`},"string"==typeof n.icon?d.createElement(d.Fragment,null,d.createElement("img",{className:"w-7",src:n.icon,alt:n.title}),s&&d.createElement("img",{className:"scalable-app-icon w-7 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:n.icon,alt:n.title})):n.icon,t&&d.createElement("div",{className:"w-1 h-1 absolute left-0 top-1/2 bg-ub-orange rounded-sm"})))},St=({onEnter:e,onLeave:t,children:n})=>{const r=p.exports.useRef(null);return At(r,{onEnter:e,onLeave:t}),d.createElement("div",{ref:r,style:{width:ke.sidebar},className:"h-full absolute top-0 right-0  z-40"},n)},It=({onClick:e})=>d.createElement("div",{className:"absolute bottom-0"},d.createElement(Mt,{title:"Show Applications"},d.createElement("div",{className:"w-10 h-10 rounded m-1 hover:bg-white hover:bg-opacity-10 flex items-center justify-center",onClick:e},d.createElement("img",{className:"w-7",src:"/themes/Yaru/system/view-app-grid-symbolic.svg",alt:"Ubuntu view app"}))));const Dt=()=>{const[{favoriteApps:e,openedAppMap:t,openedApps:n,minimizedApps:r,allAppsScreen:o},s]=Xe(),[a,i]=p.exports.useState(!1),c=m("desktop-sidebar select-none h-full pt-7 flex flex-col justify-start items-center border-black border-opacity-60 bg-black bg-opacity-50"),u=p.exports.useMemo((()=>{return(t=r,Object.keys(t).map((e=>t[e]))).filter((t=>!e.find((e=>e.id===t.id))));var t}),[r]),f=p.exports.useCallback(((e,t)=>{s.openApp(e,t)}),[s]),g=p.exports.useCallback((()=>{s.setAllAppsScreen(!o)}),[o]),h=p.exports.useMemo((()=>({onEnter:()=>{i(!0)},onLeave:()=>{i(!1)}})),[i]),b=p.exports.useMemo((()=>n.every((e=>{if(!e||r[e.id])return!0;const t="number"==typeof e.rect.width?e.rect.width:window.innerWidth*Number.parseFloat(`${e.rect.width}`)/100;return("number"==typeof e.windowPosition.left?e.windowPosition.left:window.innerWidth*Number.parseFloat(`${e.windowPosition.left}`)/100)<window.innerWidth-t-ke.sidebar}))),[n,r]);return d.createElement(St,l({},h),d.createElement(je,{duration:500,enterClassName:"desktop-sidebar-show",leaveClassName:"desktop-sidebar-leave",exist:!0,visible:a||b},d.createElement("div",{className:c},e.map((e=>d.createElement(Rt,{isOpen:!!t[e.id],isMinimized:!!r[e.id],onClick:f,key:e.id,app:e}))),u.map((e=>d.createElement(Rt,{isOpen:!!t[e.id],isMinimized:!!r[e.id],onClick:f,key:e.id,app:e}))),d.createElement(It,{onClick:g}))))},Tt={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const Pt=(e,t)=>{const n=function(){const e=p.exports.useRef(!0);return e.current?(e.current=!1,!0):e.current}();p.exports.useEffect((()=>{if(!n)return e()}),t)};const jt=()=>d.createElement("div",{className:"w-full flex justify-center"},d.createElement("div",{className:"border-t border-gray-900 py-1 w-4/5"}));const zt=({children:e,className:t,menus:n,onItemClick:r,contextmenuOptionsRewrite:o,rewriteVisible:s,rewritePosition:a})=>{const[l,i]=p.exports.useState({left:0,top:0}),[u,f]=p.exports.useState(!1),g=p.exports.useRef(null),h=m("relative",t),b=o||{},{onClick:w}=b,y=c(b,["onClick"]),x=w||(()=>{f(!1)});return function(e,{onClick:t,onContextMenu:n,onClickAway:r}={}){T(e,"contextmenu",(e=>{e.preventDefault(),null==n||n(e)})),T(e,"click",(e=>{e.preventDefault(),null==t||t(e)})),mt(e,(e=>{null==r||r(e)}),["click","contextmenu"])}(g,o?y:{onContextMenu(e){f(!0);const{left:t,top:n}=e.currentTarget.getBoundingClientRect();i({left:e.clientX-t,top:e.clientY-n})},onClickAway(){f(!1)}}),d.createElement("div",{ref:g,onClick:x,className:h},e,(s||u)&&d.createElement("div",{className:"context-menu-bg whitespace-nowrap border font-light border-gray-900 rounded text-white py-4 absolute text-sm",style:{zIndex:1e5,left:(null==a?void 0:a.left)||l.left,top:(null==a?void 0:a.top)||l.top}},n.map((({key:e,title:t,render:n,onClick:o,icon:s,disabled:a})=>d.createElement("div",{key:e,onClick:t=>{null==o||o(t),null==r||r(e,t)}},n?n():d.createElement("div",{className:"px-6 py-0.5 hover:bg-ub-warm-grey hover:bg-opacity-20 mb-1.5 "+(a?"text-gray-400":"")},s,d.createElement("span",null,t)),d.createElement(jt,null))))))},Ot=e=>{var t,n;const[,r]=Xe(),o=p.exports.useRef(null),[s,a]=p.exports.useState(!1),[c,u]=p.exports.useState(!1),[f,g]=p.exports.useState({left:(null==(t=e.app.position)?void 0:t.left)||0,top:(null==(n=e.app.position)?void 0:n.top)||0}),h=p.exports.useMemo((()=>{var t,n;return c||!(!(null==(t=e.app.position)?void 0:t.left)&&!(null==(n=e.app.position)?void 0:n.top))}),[c,e.app.position]),b=m("hover:z-20 focus:z-20 z-10",{"z-20":s}),w=function(e,t){const[n,r]=p.exports.useState(Tt);return p.exports.useEffect((()=>{if(!e.current)return;const t=e.current.getBoundingClientRect(),{x:n,y:o,width:s,height:a,top:l,left:i,bottom:c,right:p}=t;r({x:n,y:o,width:s,height:a,top:l,left:i,bottom:c,right:p})}),t),n}(o,[]);Pt((()=>{o.current&&!c&&requestAnimationFrame((()=>{if(o.current){const e=o.current.offsetLeft,t=o.current.offsetTop;g({left:e,top:t}),requestAnimationFrame((()=>{o.current.scrollTop,u(!0)}))}}))}),[w]),p.exports.useEffect((()=>{c&&r.updateFolderApp({from:e.app.parentId,to:e.app.parentId,data:i(l({},e.app),{position:f})})}),[c,e.app.position,f]),mt(o,(()=>{a(!1)})),T(o,"click",(()=>{r.clickApp(e.app.id,e.app),a(!0)}));const y=p.exports.useCallback(((e,t)=>{const n=t.currentTarget;t.dataTransfer.setData("domOffset",JSON.stringify(R({clientX:t.clientX,clientY:t.clientY},n)))}),[]);T(p.exports.useRef(document),"dragover",(e=>{e.preventDefault()}));const x=p.exports.useMemo((()=>({left:"string"==typeof f.left?f.left:f.left/window.innerWidth*100+"%",top:"string"==typeof f.top?f.top:f.top/window.innerHeight*100+"%"})),[f]),v=p.exports.useMemo((()=>[{key:"New Folder",title:"New Folder"},{key:"Paste",title:"Paste",disabled:!0},{key:"Show Desktop in Files",title:"Show Desktop in Files",disabled:!0}]),[]),E=p.exports.useMemo((()=>({from:$e.Desktop,app:e.app})),[e.app]);return d.createElement(pe,{nodeRef:o,style:{position:h?"absolute":"relative"},className:b,data:E,defaultPosition:x,onDragStart:y},d.createElement("div",{"data-target":Ne},d.createElement(zt,{menus:v},d.createElement(oe,l({},e)))))};const Yt=()=>{const[{backgroundImage:e,lockScreen:t},n]=Xe(),r=p.exports.useCallback((()=>{n.setLockScreen(!1)}),[n]);return d.createElement(je,{visible:t,duration:200,enterClassName:"lock-screen-show",leaveClassName:"lock-screen-leave"},d.createElement("div",{style:{backgroundImage:`url(${e})`},onClick:r,onKeyPress:r,className:"lock-screen absolute w-full h-full outline-none select-none top-0 right-0 overflow-hidden m-0 p-0 bg-opacity-50"},d.createElement("div",{className:"lock-screen-content flex flex-col justify-center items-center text-white"},d.createElement("div",{className:"text-7xl"},d.createElement(et,{type:"time"})),d.createElement("div",{className:"mt-4 text-xl font-medium"},d.createElement(et,{type:"date"})),d.createElement("div",{className:" mt-16 text-base"},"Click or Press a key to unlock"))))},Ft=({isMaximized:e,onMaximize:t,onMinimize:n,onClose:r,className:o})=>{const s=p.exports.useCallback((n=>{null==t||t(!e,n)}),[t,e]),a=m(o,"flex justify-center items-center");return d.createElement("div",{onClick:N,"data-target":Ce,className:a},d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center h-5 w-5 items-center",onClick:n},d.createElement("img",{draggable:!1,src:"./themes/Yaru/window/window-minimize-symbolic.svg",alt:"ubuntu window minimize"})),d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center  h-5 w-5 items-center",onClick:s},e?d.createElement("img",{draggable:!1,src:"./themes/Yaru/window/window-restore-symbolic.svg",alt:"ubuntu window restore"}):d.createElement("img",{draggable:!1,src:"./themes/Yaru/window/window-maximize-symbolic.svg",alt:"ubuntu window maximize"})),d.createElement("button",{className:"mx-1.5 focus:outline-none cursor-default bg-ub-orange bg-opacity-90 hover:bg-opacity-100 rounded-full flex justify-center h-5 w-5 items-center",onClick:r},d.createElement("img",{draggable:!1,src:"/themes/Yaru/window/window-close-symbolic.svg",alt:"ubuntu window close"})))},Lt=e=>{var t=e,{title:n,className:r}=t,o=c(t,["title","className"]);const s=m("bg-ub-window-title border-white border-opacity-5 py-1.5 text-white w-full select-none flex  justify-center items-center",r),a=p.exports.useCallback((e=>{var t;null==(t=o.onMaximize)||t.call(o,!o.isMaximized,e)}),[o.onMaximize,o.isMaximized]);return d.createElement("div",{"data-target":Ae,onDoubleClick:a,style:{paddingLeft:100,paddingRight:100},className:s},d.createElement("div",{className:"flex justify-center text-sm font-bold"},n),d.createElement(Ft,l({className:"absolute top-1 right-1"},o)))};const $t=({children:e,className:t})=>{const n=m("w-full flex-grow z-20 max-h-full overflow-y-auto window-main-view bg-ub-cool-grey",t);return d.createElement("div",{className:n},e)};function _t(e,{filterMoving:t,onMoveStart:n,onMoving:r,onMoveEnd:o}={}){T(e,"mousedown",p.exports.useCallback((e=>{if(t&&!t(e))return;null==n||n(e);const{width:s,left:a,top:l,height:i}=e.currentTarget.getBoundingClientRect(),c=e.clientX,p=e.clientY,u=e=>{const t=e.clientX,n=e.clientY,o=t-c,u=n-p;null==r||r({moveX:t,moveY:n,offsetX:o,offsetY:u,left:a+o,top:l+u,width:s,height:i},e)},d=e=>{null==o||o(e),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}),[]))}var Wt=p.exports.forwardRef(((e,t)=>{var n=e,{children:r,onMoveStart:o,onMoveEnd:s,onMoving:a,filterMoving:i,className:u,style:m}=n,f=c(n,["children","onMoveStart","onMoveEnd","onMoving","filterMoving","className","style"]);const g=p.exports.useRef(null);return _t(t||g,{onMoveStart:o,onMoveEnd:s,onMoving:a,filterMoving:i}),d.createElement("div",l({ref:t||g,style:m,className:u},f),r)}));const Vt=["t","r","b","l","lt","lb","rb","rt"],Xt=Vt.map((e=>{const t=e.includes("l"),n=e.includes("r"),r=e.includes("t"),o=e.includes("b");return{className:m("absolute transform z-60 cursor-move",{"left-0 -translate-x-1/2":t,"top-0 -translate-y-1/2":r,"right-0 translate-x-1/2":n,"bottom-0 translate-y-1/2":o,"h-full":1===e.length&&(t||n),"h-5":e.includes("t")||e.includes("b"),"w-full":1===e.length&&(r||o),"w-5":e.includes("l")||e.includes("r")}),direction:e}}));var Bt=p.exports.forwardRef((({children:e,className:t,style:n,onMoving:r,onMoveEnd:o,onMoveStart:s,disabled:a=!1},l)=>{const i=p.exports.useRef(null),c=p.exports.useRef(),u=m("relative",t);return _t(l||i,{filterMoving:e=>{const t=e.target;return!(!t.dataset.direction||!Vt.includes(t.dataset.direction))&&(c.current=t.dataset.direction,!0)},onMoveStart:s,onMoving:(e,t)=>{null==r||r(c.current,e,t)},onMoveEnd:o}),d.createElement("div",{ref:l||i,className:u,style:n},!a&&Xt.map((({direction:e,className:t})=>d.createElement("div",{key:e,"data-direction":e,className:t}))),e)}));const qt=({app:e,isMaximized:t,isMinimized:n,isFocus:r})=>{const[o,s]=Xe(),{defaultAppWindow:a}=o,c=p.exports.useRef(a);c.current=a;const[u,f]=p.exports.useState({left:e.windowPosition.left,top:e.windowPosition.top}),[g,h]=p.exports.useState({width:e.rect.width,height:e.rect.height}),[b,w]=p.exports.useState(!0);p.exports.useRef(g).current=g;const y=function(e,t=0){const[n,r]=p.exports.useState(e),{run:o,cancel:s}=Pe((e=>{r(e)}),t);return p.exports.useEffect((()=>{s(),o(e)}),[e]),n}(t,300),x=p.exports.useRef(null),v=m("m-auto overflow-hidden max-w-full max-h-full absolute window-shadow border-black border-opacity-40 border border-t-0 bg-ub-window-title app-window",t?"z-60 rounded-none":"rounded-lg rounded-b-none",{"not-focus":!r,"z-10 not-focus":!r&&!t,"z-30":r&&!t}),E=p.exports.useMemo((()=>({filterMoving:e=>{const t=e.target;return!!I(t,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===Ae}))&&!I(t,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===Ce}))},onMoving:({left:e,top:t})=>{t<ke.navbar&&(t=ke.navbar+1),f({left:e,top:t})},onClick:()=>{s.openApp(e.id,e)}})),[f,ke,e,s]),k=p.exports.useMemo((()=>{const e=t?"100%":g.width||a.width,n=t?"100%":g.height||a.height,r=t?0:"number"==typeof u.left?u.left/window.innerWidth*100+"%":u.left,o=u.left?void 0:"0%";return{width:e,height:n,left:r,top:t?0:"number"==typeof u.top?u.top/window.innerHeight*100+"%":u.top,right:o,bottom:u.top?void 0:"0%",minWidth:a.minWidth,minHeight:a.minHeight,position:"absolute"}}),[u,t,g,s,a]);Pt((()=>{t||s.updateOpenedApp(e.id,i(l({},e),{rect:{width:k.width,height:k.height},windowPosition:{left:k.left,top:k.top}}))}),[k,t]);const C=p.exports.useMemo((()=>({onClose:()=>{s.closeApp(e.id)},onMaximize:()=>{s.maximizeApp(e.id,e)},onMinimize:()=>{s.minimizeApp(e.id,e)}})),[s,e]),A=p.exports.useMemo((()=>({l:({width:e,offsetX:t,left:n})=>{e-t<c.current.minWidth||(h((n=>({width:e-t,height:n.height}))),f((e=>({top:e.top,left:n}))))},r:({width:e,offsetX:t})=>{h((n=>({width:e+t,height:n.height})))},t:({height:e,offsetY:t,top:n})=>{e-t<c.current.minHeight||(h((n=>({width:n.width,height:e-t}))),f((e=>({top:n,left:e.left}))))},b:({height:e,offsetY:t})=>{h((n=>({width:n.width,height:e+t})))},lb:({width:e,left:t,height:n,offsetX:r,offsetY:o})=>{e-r<c.current.minWidth||(h({width:e-r,height:n+o}),f((e=>({top:e.top,left:t}))))},rb:({width:e,height:t,offsetX:n,offsetY:r})=>{h({width:e+n,height:t+r})},lt:({width:e,height:t,offsetX:n,offsetY:r,top:o,left:s})=>{t-r<c.current.minHeight||e-n<c.current.minWidth||(h({width:e-n,height:t-r}),f({top:o,left:s}))},rt:({width:e,height:t,offsetX:n,offsetY:r,top:o})=>{t-r<c.current.minHeight||(h({width:e+n,height:t-r}),f((e=>({top:o,left:e.left}))))}})),[h,g,f]),N=p.exports.useMemo((()=>({onMoveStart:e=>{const{left:t,top:n}=e.currentTarget.getBoundingClientRect();f((e=>e.left===t&&e.top===n?e:{top:n,left:t}))},onMoving:(e,t)=>{A[e](t)}})),[h,f,A]);p.exports.useEffect((()=>{w(!n)}),[n]);const M=p.exports.useMemo((()=>t||y||n?300:0),[t,y,n]);return d.createElement(je,{transitionProperty:["width","height","left","top","opacity"],nodeRef:x,enterClassName:"app-window-show",leaveClassName:"app-window-leave",duration:M,visible:b,exist:!0},d.createElement(Bt,l({disabled:t,className:v,ref:x,style:k},N),d.createElement(Wt,i(l({},E),{className:"flex flex-col w-full h-full"}),d.createElement(Lt,i(l({},C),{title:e.title})),d.createElement($t,null,d.createElement(J,null,"function"==typeof e.render?e.render(e.id):e.component?d.createElement(e.component):null)))))},Ut=({children:e})=>{const[{appMap:t},n]=Xe(),[r,o]=p.exports.useState(!1),[s,a]=p.exports.useState({left:0,top:0}),l=p.exports.useMemo((()=>[{key:"New Folder",title:"New Folder",onClick(){n.setNewFolderModal(!0)}},{key:"Paste",title:"Paste",disabled:!0},{key:"Show Desktop in Files",title:"Show Desktop in Files",disabled:!0},{key:"Open in Terminal",title:"Open in Terminal"},{key:"Change Background...",title:"Change Background...",onClick(){const e=t[$e.Settings];e&&n.openApp(e.id,e)}},{key:"Display Settings",title:"Display Settings",disabled:!0},{key:"Settings",title:"Settings",onClick(){const e=t[$e.Settings];e&&n.openApp(e.id,e)}}]),[]),i=p.exports.useMemo((()=>({onContextMenu(e){if(I(e.target,(e=>{var t;const n=null==(t=e.dataset)?void 0:t.target;return n===Ne||n===Me})))return o(!1);o(!0),n.setMousePosition({clientX:e.clientX,clientY:e.clientY});const{left:t,top:r}=e.currentTarget.getBoundingClientRect(),s=e.clientX-t,l=e.clientY-r;a({left:s,top:l})},onClick(){o(!1)},onClickAway(){o(!1)}})),[o,a,n]);return d.createElement(zt,{rewritePosition:s,rewriteVisible:r,contextmenuOptionsRewrite:i,className:"h-full w-full flex flex-col justify-start content-start flex-wrap  pt-8 bg-transparent relative overflow-hidden overscroll-none",menus:l},e)},Ht={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Jt={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Kt={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function Gt(e,t){if(!e.key)return!1;if("number"==typeof t)return e.keyCode===t;const n=t.split(".");let r=0;for(const o of n){const t=Kt[o],n=Jt[o],s=Ht[o];(t&&t(e)||(n&&Array.isArray(n)?n.includes(e.key):n===e.key)||(s&&Array.isArray(s)?s.includes(e.keyCode):s===e.keyCode)||e.key.toUpperCase()===o.toUpperCase())&&r++}return r===n.length}const Qt="keydown";function Zt(e,t=A,n={}){const{event:r=Qt,target:o}=n;T(o||document,r,(n=>{if(function(e){return"function"==typeof e?e:"string"==typeof e||"number"==typeof e?t=>Gt(t,e):Array.isArray(e)?t=>e.some((e=>Gt(t,e))):e?()=>!0:()=>!1}(e)(n))return t(n)}))}const en=()=>{const e=p.exports.useRef(null),[t,n]=p.exports.useState(""),[r,o]=Xe(),s=p.exports.useCallback((e=>{n(e.target.value)}),[n]),a=p.exports.useCallback((e=>{e.trim()&&o.addNewFolder(e,{left:r.mousePosition.clientX,top:r.mousePosition.clientY})}),[o,r]),l=p.exports.useCallback((()=>{a(t)}),[t]),i=p.exports.useCallback((()=>{o.setNewFolderModal(!1)}),[o]);return Zt("enter",(()=>{a(t)}),{target:e}),d.createElement("div",{className:"absolute rounded-md top-1/2 left-1/2 text-center text-white font-light text-sm bg-ub-cool-grey transform -translate-y-1/2 -translate-x-1/2 sm:w-96 w-3/4 z-50"},d.createElement("div",{className:"w-full flex flex-col justify-around items-start px-6 pb-8 pt-6"},d.createElement("span",null,"New folder name"),d.createElement("input",{ref:e,value:t,onChange:s,className:"outline-none mt-4 px-1 w-full  context-menu-bg border-2 border-yellow-700 rounded py-0.5",type:"text",autoComplete:"off",spellCheck:"false",autoFocus:!0})),d.createElement("div",{className:"flex"},d.createElement("div",{onClick:l,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 border-r-0 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Create"),d.createElement("div",{onClick:i,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Cancel")))};const tn=[{title:"desktop",path:"/desktop",keepAlive:{cacheId:"desktop-page"},exact:!0,component:qe((()=>{const[e,t]=Xe(),n=p.exports.useCallback(((e,n)=>{t.openApp(e,n)}),[t]),r=p.exports.useMemo((()=>e.appMap[$e.Desktop].apps.map((t=>e.appMap[t.id]))),[e.appMap]);return T(window,"resize",(()=>{t.resizeBrowserWindow(window.innerWidth,window.innerHeight)})),d.createElement(Ut,null,d.createElement(te,{src:e.backgroundImage}),d.createElement(ce,null,r.map((e=>d.createElement(Ot,{onOpen:n,app:e,key:e.id})))),d.createElement(Ct,null),d.createElement(Dt,null),e.openedApps.map((t=>d.createElement(qt,{isFocus:e.focusAppId===t.id,isMaximized:!!e.maximizedApps[t.id],isMinimized:!!e.minimizedApps[t.id],key:t.id,app:t}))),d.createElement(Ke,null),d.createElement(Yt,null),e.newFolderModal&&d.createElement(en,null))}))},{redirect:"/desktop"}],nn=[{title:"login",path:"/login",exact:!0,component:d.lazy((()=>ee((()=>import("./index.c735c416.js")),["assets/index.c735c416.js","assets/vendor.b2c3c829.js"])))}],[rn,on]=u((e=>({pushRoutes:t=>i(l({},e),{routes:[...e.routes,...Array.isArray(t)?t:[t]]}),setMatchedRoutes:(t,n)=>i(l({},e),{matchedRoutes:t,currentRoute:n}),reset:()=>({currentRoute:{},routes:nn,matchedRoutes:[]})})),{routes:nn,currentRoute:{},matchedRoutes:[]}),sn=({children:e})=>d.createElement(E,null,e,d.createElement(ln,null)),an=()=>{const[e]=rn(),{routes:t}=e,n=p.exports.useMemo((()=>G(t)),[t]);return d.createElement(J,{fallback:d.createElement(H,{loading:!0,loadingClassName:"bg-black"})},n)},ln=()=>{const[e,t]=rn(),[,n]=at(),{routes:r}=e,{pathname:o}=k();return p.exports.useEffect((()=>{const e=Q(r,o).map((e=>e.route)),s=e[e.length-1];t.setMatchedRoutes(e,s);const a=null==s?void 0:s.title;a&&n.setTitle(a)}),[o,r,t]),null},cn=({children:e})=>d.createElement(lt,null,d.createElement(kt,null,d.createElement($,null,d.createElement(on,null,e)))),pn=C.create({timeout:26e3,baseURL:"/mock"});function un(e){const{config:t}=e;return t.headers.noRetry?Promise.reject(e):t.headers.retryCount<=3?pn(t):Promise.reject(e)}function dn(e,t){e>3&&Le.error({content:t})}let mn,fn;const gn=e=>{var t=e,{loadingClassName:n}=t,r=c(t,["loadingClassName"]);const o=m("bg-black",n);return d.createElement(H,l({loadingClassName:o},r))};function hn(e,t=[],n={}){const r=p.exports.useMemo((()=>({loading:n.loading||!1,err:n.err||null,data:void 0})),[]),o=p.exports.useRef(0),s=function(){const e=p.exports.useRef(!1),t=p.exports.useCallback((()=>e.current),[]);return p.exports.useEffect((()=>(e.current=!0,()=>{e.current=!1})),[]),t}(),[a,c]=p.exports.useState(r);return[a,p.exports.useCallback(((...t)=>(c((e=>i(l({},e),{loading:!0}))),o.current++,e(...t).finally((()=>{o.current--})).then((e=>(0===o.current&&s()&&c((t=>i(l({},t),{data:e,loading:!1}))),[null,e])),(e=>(0===o.current&&s()&&c((t=>i(l({},t),{err:e,loading:!1}))),[e,null]))))),t)]}async function bn(e){return{data:{token:"this is a token"}}}async function wn(){var e;return await(e=1e3,new Promise((t=>{setTimeout((()=>{t()}),e)}))),{data:{username:"Col0ring",email:"xylCol0ring@gmail.com"}}}const yn=["/login"],xn=["/login"],vn=({children:e})=>{const[t,n]=Et(),[,r]=rn(),{pathname:o}=k(),[,s]=hn(wn,[]),{isLogin:a}=t;return p.exports.useEffect((()=>{a?r.pushRoutes(tn):r.reset()}),[a,r]),p.exports.useEffect((()=>{!function([e,t]){pn.interceptors.request.eject(mn),pn.interceptors.response.eject(fn),mn=pn.interceptors.request.use((t=>{const n=l({},t);if(window.axiosPromiseArr&&Array.isArray(window.axiosPromiseArr)){const e=window.axiosPromiseArr.findIndex((e=>e.url===n.url)),t=window.axiosPromiseArr[e];t&&(t.cancel(),window.axiosPromiseArr.splice(e,1))}return n.cancelToken=new C.CancelToken((e=>{window.axiosPromiseArr=window.axiosPromiseArr||[],window.axiosPromiseArr.push({url:n.url,cancel:e})})),n.headers.token=e.token,"number"==typeof n.headers.retryCount?n.headers.retryCount++:n.headers.retryCount=0,n}),(e=>(dn(e.config.headers.retryCount,e.message),un(e.config)))),fn=pn.interceptors.response.use((e=>{const{data:t}=e;return t}),(e=>{if(C.isCancel(e))return Promise.reject(e);const{response:n}=e,{status:r,data:o}=n;return 400===r?(Le.error({content:o.message}),Promise.reject(e)):401===r?(t.logout(),Le.error({content:o.message}),Promise.reject(e)):(e.message.includes("timeout")&&(e.message=""),dn(e.config.headers.retryCount,e.message),un(e))}))}([t,n])}),[t,n]),p.exports.useEffect((()=>{(async()=>{if(t.isLogin&&!t.user){const[,e]=await s();e&&n.setUser(e.data)}})()}),[t,n,s]),a?xn.includes(o)?d.createElement(g,{to:"/desktop"}):d.createElement(gn,{loading:!t.isLogin||!t.user},e):yn.includes(o)?d.createElement(d.Fragment,null,e):d.createElement(g,{to:"/login"})};const En=({children:e})=>{const t=p.exports.useRef(null),[n,r]=at();return function(e,t){const n=p.exports.useRef(document.title);document.title=e,p.exports.useEffect((()=>{if(t&&t.restoreOnUnmount)return()=>{document.title=n.current}}),[])}(n.title),p.exports.useEffect((()=>{r.setUbuntuInstance(t)}),[]),p.exports.useEffect((()=>{t.current.style.filter=`brightness(${3/400*n.config.brightness+.25})`}),[n.config.brightness]),d.createElement("div",{ref:t,id:"web-ubuntu"},e)};v.render(d.createElement(d.StrictMode,null,d.createElement(V,null,d.createElement(cn,null,d.createElement(En,null,d.createElement(sn,null,d.createElement(vn,null,d.createElement(an,null))))))),document.getElementById("root"));export{fe as F,Et as a,Xe as b,bn as r,hn as u};
