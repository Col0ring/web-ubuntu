var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&s(e,r,t[r]);return e},i=(e,n)=>t(e,r(n)),c=("undefined"!=typeof require&&require,(e,t)=>{var r={};for(var s in e)o.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&a.call(e,s)&&(r[s]=e[s]);return r});import{r as p,O as u,R as d,c as m,S as f,a as g,b as h,m as b,d as w,w as y,e as v,f as x,B as E,u as k,g as A}from"./vendor.11d3daa3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const C={},N=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`https://col0ring.github.io/web-ubuntu/${e}`)in C)return;C[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},M=/macintosh|mac os x/i.test(navigator.userAgent);function I(){}function R(e){e.stopPropagation()}function S(e){return+e.slice(0,e.length-1)/100}function D(e){let{offsetTop:t,offsetLeft:r}=e,n=e.offsetParent;for(;n;)t+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent;return{offsetTop:t,offsetLeft:r}}function P(e){return(t=e)&&"object"==typeof t&&Object.keys(t).includes("current")?e.current:e;var t}function T(e,t){let r=e;for(;r;){if(t(r))return r;r=r.parentNode}return null}function j(e,t){try{return JSON.parse(e)}catch(r){return t}}function z(e,t,r,n={}){const o=p.exports.useRef();o.current=r,p.exports.useEffect((()=>{const r=P(e);if(!r)return;const a=e=>{var t;return null==(t=o.current)?void 0:t.call(o,e)};return r.addEventListener(t,a,{capture:n.capture,once:n.once,passive:n.passive}),()=>{r.removeEventListener(t,a,{capture:n.capture})}}),[e,t,...Object.values(n)])}var O,F;(F=O||(O={})).CREATE="CREATE",F.CREATED="CREATED",F.ACTIVE="ACTIVE",F.ACTIVATED="ACTIVATED",F.DEACTIVATED="DEACTIVATED",F.DESTROY="DESTROY";const[Y,L,$]=u((e=>({addCacheElement(t,r){const n=e[t];if(n){if(n.status===O.DESTROY){const{doms:o}=n;return o.forEach((e=>{var t;null==(t=e.parentNode)||t.removeChild(e)})),i(l({},e),{[t]:{cacheId:t,doms:[],scrolls:{x:0,y:0},element:r,status:O.CREATE}})}return e}return i(l({},e),{[t]:{cacheId:t,doms:[],element:r,scrolls:{x:0,y:0},status:O.CREATE}})},addCacheDoms:(t,r)=>e[t]?i(l({},e),{[t]:i(l({},e[t]),{doms:r,status:O.CREATED})}):e,renderCacheDoms(t,{scroll:r,parentNode:n}){const o=e[t],{doms:a}=o,{scrolls:s}=o;return a.forEach((e=>n.appendChild(e))),r&&n.scrollTo(s.x,s.y),i(l({},e),{[t]:i(l({},o),{status:O.ACTIVE})})},cacheScroll(t,r){const n=r.target;return i(l({},e),{[t]:i(l({},e[t]),{scrolls:{x:n.scrollLeft,y:n.scrollTop}})})},activate:t=>i(l({},e),{[t]:i(l({},e[t]),{status:O.ACTIVATED})}),deactivate:t=>i(l({},e),{[t]:i(l({},e[t]),{status:O.DEACTIVATED})}),refresh:t=>i(l({},e),{[t]:i(l({},e[t]),{status:O.DESTROY})}),clear:()=>Object.keys(e).reduce(((t,r)=>(t[r]=i(l({},e[r]),{status:O.DESTROY}),t)),{})})),{});function _(e){const t=p.exports.useRef(e);t.current=e,p.exports.useEffect((()=>t.current),[])}const W=({children:e,cacheId:t,className:r,style:n,scroll:o=!1})=>{const[a,s]=Y(),l=p.exports.useRef(null);z(l,"scroll",(e=>{s.cacheScroll(t,e)}));const i=a[t],c=null==i?void 0:i.status,u=null==i?void 0:i.doms;return p.exports.useEffect((()=>{!u||c!==O.CREATED&&c!==O.ACTIVATED?c&&c!==O.DESTROY||s.addCacheElement(t,d.createElement(d.Fragment,null,e)):s.renderCacheDoms(t,{scroll:o,parentNode:l.current})}),[u,c,s,t,o,e]),p.exports.useEffect((()=>{(null==i?void 0:i.status)===O.DEACTIVATED&&s.activate(t)}),[c,t,s]),_((()=>{s.deactivate(t)})),d.createElement("div",{id:`keepalive-cache-${t}`,ref:l,className:r,style:n})};var V=$((({children:e})=>{const[t,r]=Y(),n=p.exports.useMemo((()=>Object.values(t).filter((e=>e&&e.status!==O.DESTROY))),[t]);return d.createElement(d.Fragment,null,e,n.map((({cacheId:e,doms:t,element:n})=>d.createElement("div",{id:`element-cache-${e}`,key:e,ref:n=>{if(n&&0===t.length){const t=[...n.childNodes];r.addCacheDoms(e,t)}}},n))))}));const X=({title:e,message:t})=>d.createElement("div",{className:"p-5 w-full h-full flex flex-col items-center justify-center bg-ub-cool-grey"},d.createElement("p",{className:"text-red-500 text-xl"},e),d.createElement("p",{className:"text-ubt-grey mt-3 text-sm"},t)),B={hasError:!1,error:null};class U extends d.Component{constructor(){var e;super(...arguments),s(this,"symbol"!=typeof(e="state")?e+"":e,B)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{fallback:e,showError:t,children:r}=this.props,{error:n,hasError:o}=this.state,a=t?null==n?void 0:n.message:"Something Wrong!",s=t?null==n?void 0:n.stack:"it looks like there are some problems, please try again later.";return o?e||d.createElement(X,{title:a,message:s}):r}}const H="https://col0ring.github.io/web-ubuntu/";function q(e){return e.startsWith(".")?e:`/${`${H}${e}`.split("/").filter(Boolean).join("/")}`}var J,K;function G(e,t=0,...r){const n=function(e,t=0){const r=p.exports.useRef(J.Free),n=p.exports.useRef(),o=p.exports.useRef(e),a=p.exports.useCallback((()=>r.current),[]),s=p.exports.useCallback(((...e)=>{r.current=J.Pending,n.current&&clearInterval(n.current),n.current=setInterval((()=>{r.current=J.Calling,o.current(...e)}),t)}),[t]),l=p.exports.useCallback((()=>{r.current=J.Canceled,n.current&&clearInterval(n.current)}),[]);return p.exports.useEffect((()=>{o.current=e}),[e]),_(l),{currentStatus:a,run:s,cancel:l}}(e,t);return p.exports.useEffect((()=>{n.run(...r)}),[t]),n}(K=J||(J={})).Free="free",K.Pending="pending",K.Canceled="cancelled",K.Calling="calling";const Q=({children:e,delay:t=500,dotNumber:r=3,className:n})=>{const[o,a]=p.exports.useState("");G((()=>{a((e=>e===".".repeat(r)?"":`${e}.`))}),t);const s=m("ml-1",n);return d.createElement(d.Fragment,null,e,d.createElement("span",{className:s},o))},Z=({tips:e="loading",loading:t,children:r,className:n,loadingClassName:o})=>{const a=m("relative w-full h-full",n),s=m("absolute top-0 left-0 w-full h-full flex flex-col items-center justify-center",o);return d.createElement("div",{className:a},t&&d.createElement("div",{style:{zIndex:1e4},className:s},d.createElement("img",{className:"animate-spin w-20",src:q("/themes/Yaru/status/process-working-symbolic.svg"),alt:"Loading Spinner"}),d.createElement("p",{className:"text-white"},d.createElement(Q,null,e))),r)},ee=({children:e,fallback:t})=>d.createElement(U,null,d.createElement(p.exports.Suspense,{fallback:t||d.createElement(Z,{loading:!0})},e)),te=({children:e})=>d.createElement(d.Fragment,null,e);function re(e,t,r){return e?d.createElement(f,l({},r),e.map(((e,n)=>e.redirect?d.createElement(g,{key:e.key||n,to:e.redirect}):d.createElement(h,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:n=>{let o;e.routes&&(o=d.createElement(ee,null,re(e.routes,t,r)));const a=()=>e.render?e.render(i(l(l({},n),t),{children:o,route:e})):d.createElement(e.component||te,e.component?i(l(l({},n),t),{route:e}):null,o);return e.keepAlive?d.createElement(W,i(l({},e.keepAlive),{style:{width:"100%",height:"100%"}}),a()):a()}})))):null}function ne(e,t){const r=[];return e.some((e=>{const n=e.path?b(t,e):r.length?r[r.length-1].match:w.computeRootMatch(t);return n&&(r.push({route:e,match:n}),e.routes&&r.push(...ne(e.routes,t))),n})),r}const oe=({src:e})=>d.createElement("div",{style:{backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center"},className:"absolute top-0 right-0 overflow-hidden h-full w-full -z-10"}),ae=y({reducerMapper:v}),se=({title:e,icon:t,img:r})=>d.createElement("div",{className:"flex-grow flex flex-col justify-center items-center h-full w-full"},d.createElement("div",{className:"w-24"},t||d.createElement("img",{className:"w-full",src:r||q("/themes/Yaru/status/empty-folder.svg"),alt:"ubuntu-empty"})),d.createElement("span",{className:"font-bold mt-4 text-xl px-1 text-gray-400"},e)),le=["click"];function ie(e,t,r=le){const n=p.exports.useRef(t);n.current=t,p.exports.useEffect((()=>{const t=t=>{const r=P(e);r&&!r.contains(t.target)&&n.current(t)};for(const e of r)document.addEventListener(e,t);return()=>{for(const e of r)document.removeEventListener(e,t)}}),[r,e])}const ce={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},pe={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},ue={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function de(e,t){if(!e.key)return!1;if("number"==typeof t)return e.keyCode===t;const r=t.split(".");let n=0;for(const o of r){const t=ue[o],r=pe[o],a=ce[o];(t&&t(e)||(r&&Array.isArray(r)?r.includes(e.key):r===e.key)||(a&&Array.isArray(a)?a.includes(e.keyCode):a===e.keyCode)||e.key.toUpperCase()===o.toUpperCase())&&n++}return n===r.length}const me="keydown";function fe(e,t=I,r={}){const{event:n=me,target:o}=r;z(o||document,n,(r=>{if(function(e){return"function"==typeof e?e:"string"==typeof e||"number"==typeof e?t=>de(t,e):Array.isArray(e)?t=>e.some((e=>de(t,e))):e?()=>!0:()=>!1}(e)(r))return t(r)}))}const ge=({className:e,app:t,onOpen:r,onPaste:n,onCopy:o})=>{const a=m("p-1 m-px z-10 bg-white bg-opacity-0 hover:bg-opacity-20 focus:bg-ub-orange focus:bg-opacity-50 focus:border-yellow-700 focus:border-opacity-100 border border-transparent outline-none rounded select-none w-24 flex flex-col  items-center text-center text-xs font-normal text-white",e),s=p.exports.useRef(null),l=p.exports.useCallback((()=>{null==r||r(t.id,t)}),[r,t.id,t]);return fe("enter",(()=>{null==r||r(t.id,t)}),{target:s}),fe(M?"meta.c":"ctrl.c",(()=>{null==o||o(t.id,t)}),{target:s}),fe(M?"meta.v":"ctrl.v",(()=>{null==n||n(t.id,t)}),{target:s}),d.createElement("div",{ref:s,tabIndex:0,className:a,onDoubleClick:l},d.createElement("img",{className:"mb-1 w-10",src:t.icon,alt:t.title}),d.createElement("span",{className:"mt-1"},t.title))};(async()=>{window.ResizeObserver||(window.ResizeObserver=(await N((()=>import("./ResizeObserver.es.1591e951.js")),[])).default)})();const he={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const[be,we,ye]=u((e=>({setDragArea:t=>i(l({},e),{dragArea:t})})),{dragArea:{width:0,height:0,limitRange:{x:[0,0],y:[0,0]}}});function ve(){const e=p.exports.useRef(!1),t=p.exports.useCallback((()=>e.current),[]);return p.exports.useEffect((()=>(e.current=!0,()=>{e.current=!1})),[]),t}var xe=ye((e=>{var t=e,{children:r,limitRange:n,className:o}=t,a=c(t,["children","limitRange","className"]);const[,s]=be(),i=p.exports.useRef(null),{width:u,height:f}=function(e){const[t,r]=p.exports.useState(he);return p.exports.useEffect((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0];if(!t)return;const{x:n,y:o,width:a,height:s,top:l,left:i,bottom:c,right:p}=t.contentRect;r({x:n,y:o,width:a,height:s,top:l,left:i,bottom:c,right:p})}));return t.observe(e.current),()=>{t.disconnect()}}),[e.current]),t}(i),g=m("relative w-full h-full left-0 top-0",o),[h]=function(e={}){const t=p.exports.useRef(e);t.current=e;const[r,n]=p.exports.useState(!1),o=p.exports.useCallback((e=>({onDragOver:e=>{var r,n;e.preventDefault(),null==(n=(r=t.current).onDragOver)||n.call(r,e)},onDragEnter:e=>{var r,o;e.preventDefault(),n(!0),null==(o=(r=t.current).onDragEnter)||o.call(r,e)},onDragLeave:e=>{var r,o;e.preventDefault(),n(!1),null==(o=(r=t.current).onDragLeave)||o.call(r,e)},onDrop:r=>{var o,a;r.preventDefault(),r.persist(),n(!1),null==(a=(o=t.current).onDrop)||a.call(o,r),e(r.dataTransfer,r)},onPaste:r=>{var n,o;r.persist(),null==(o=(n=t.current).onPaste)||o.call(n,r),e(r.clipboardData,r)}})),[n]),a=ve(),s=p.exports.useCallback(((e,r)=>{const n=e.getData("text/uri-list"),o=e.getData("custom");if(o&&t.current.onDom){let e=o;try{e=JSON.parse(o)}catch(s){e=o}t.current.onDom(e,r)}else n&&t.current.onUri?t.current.onUri(n,r):e.files&&e.files.length&&t.current.onFiles?t.current.onFiles(Array.from(e.files),r):e.items&&e.items.length&&t.current.onText&&e.items[0].getAsString((e=>{a()&&t.current.onText(e,r)}))}),[a]);return[p.exports.useMemo((()=>o(s)),[s]),{isHovering:r}]}(a);return p.exports.useEffect((()=>{s.setDragArea({width:u,height:f,limitRange:n||{x:[0,u],y:[0,f]}})}),[u,n,f,s]),d.createElement("div",l({ref:i,className:g},h),r)}));const Ee=({data:e,children:t,onDragEnd:r,onDragStart:n,onDrag:o,onValid:a,className:s,style:c,nodeRef:u,defaultPosition:f,onPositionChange:g})=>{const[h]=be(),{dragArea:b}=h,w=p.exports.useRef(g);w.current=g;const y=p.exports.useRef(null),v=u||y,[x,E]=p.exports.useState(f||{left:0,top:0}),[k,A]=p.exports.useState({left:0,top:0}),C=p.exports.useCallback(((e,t)=>{const r=t.currentTarget;A({left:t.clientX-r.offsetLeft,top:t.clientY-r.offsetTop}),null==n||n(e,t)}),[n,A]),N=p.exports.useCallback((async(e,t)=>{let r=t.clientX-k.left,n=t.clientY-k.top;const{x:o,y:s}=b.limitRange,l=v.current.getBoundingClientRect();await(null==a?void 0:a(e,t))&&(r<o[0]&&(r=0),r>o[1]-l.width&&(r=o[1]-l.width),n>s[1]-l.height&&(n=s[1]-l.height),n<s[0]&&(n=s[0]),E({left:r,top:n}))}),[r,E,k,b.limitRange]),M=p.exports.useCallback(((e,t)=>{null==o||o(e,t)}),[o,E,k,b.limitRange]),[,I]=function(e){const[t,r]=p.exports.useState(!1);return[t,p.exports.useCallback((t=>({draggable:"true",onDragStart:n=>{var o;r(!0),null==(o=null==e?void 0:e.onDragStart)||o.call(e,t,n),n.dataTransfer.setData("custom",JSON.stringify(t)),(null==e?void 0:e.customDragData)&&"object"==typeof e.customDragData&&Object.keys(e.customDragData).forEach((t=>{n.dataTransfer.setData(t,e.customDragData[t])}))},onDrag:r=>{var n;null==(n=null==e?void 0:e.onDrag)||n.call(e,t,r)},onDragEnd:n=>{var o;r(!1),null==(o=null==e?void 0:e.onDragEnd)||o.call(e,t,n)}})),[Object.values(e||{}),r])]}({onDragStart:C,onDragEnd:N,onDrag:M}),R=m(s,"absolute"),S=p.exports.useMemo((()=>{const{x:e,y:t}=b.limitRange;return l({left:"string"==typeof x.left?x.left:x.left/e[1]*100+"%",top:"string"==typeof x.top?x.top:x.top/t[1]*100+"%"},c)}),[c,x,b.limitRange]);p.exports.useEffect((()=>{var e;null==(e=w.current)||e.call(w,x)}),[x]),p.exports.useEffect((()=>{f&&E(f)}),[null==f?void 0:f.top,null==f?void 0:f.left]);const D=p.exports.useMemo((()=>e),[e]);return d.createElement("div",i(l({ref:v},I(D)),{style:S,className:R}),t)};const ke=()=>d.createElement("div",{className:"w-full flex justify-center"},d.createElement("div",{className:"border-t border-gray-900 py-1 w-4/5"}));const Ae=({children:e,className:t,menus:r,onItemClick:n,contextmenuOptionsRewrite:o,rewriteVisible:a,rewritePosition:s})=>{const[l,i]=p.exports.useState({left:0,top:0}),[u,f]=p.exports.useState(!1),g=p.exports.useRef(null),h=m("relative",t),b=o||{},{onClick:w}=b,y=c(b,["onClick"]),v=w||(()=>{f(!1)});return function(e,{onClick:t,onContextMenu:r,onClickAway:n}={}){z(e,"contextmenu",(e=>{e.preventDefault(),null==r||r(e)})),z(e,"click",(e=>{e.preventDefault(),null==t||t(e)})),ie(e,(e=>{null==n||n(e)}),["click","contextmenu"])}(g,o?y:{onContextMenu(e){f(!0);const t=e.currentTarget,{offsetLeft:r,offsetTop:n}=D(t);i({left:e.clientX-r,top:e.clientY-n})},onClickAway(){f(!1)}}),d.createElement("div",{ref:g,onClick:v,className:h},e,(a||u)&&d.createElement("div",{className:"context-menu-bg whitespace-nowrap border font-light border-gray-900 rounded text-white py-4 absolute text-sm",style:{zIndex:1e5,left:(null==s?void 0:s.left)||l.left,top:(null==s?void 0:s.top)||l.top}},r.map((({key:e,title:t,render:r,onClick:o,icon:a,disabled:s})=>d.createElement("div",{key:e,onClick:t=>{s||(null==o||o(t),null==n||n(e,t))}},r?r():d.createElement("div",{className:"px-6 py-0.5 hover:bg-ub-warm-grey hover:bg-opacity-20 mb-1.5 "+(s?"text-gray-400":"")},a,d.createElement("span",null,t)),d.createElement(ke,null))))))},Ce={"wall-1":q("/images/wallpapers/wall-1.jpg"),"wall-2":q("/images/wallpapers/wall-2.png"),"wall-3":q("/images/wallpapers/wall-3.jpg"),"wall-4":q("/images/wallpapers/wall-4.jpg"),"wall-5":q("/images/wallpapers/wall-5.jpg"),"wall-6":q("/images/wallpapers/wall-6.png"),"wall-7":q("/images/wallpapers/wall-7.png"),"wall-8":q("/images/wallpapers/wall-8.jpg")},Ne={navbar:30,sidebar:52},Me="edit-buttons",Ie="toolbar",Re="folderApp",Se="sidebarApp";const De=(e,t)=>{const r=function(){const e=p.exports.useRef(!0);return e.current?(e.current=!1,!0):e.current}();p.exports.useEffect((()=>{if(!r)return e()}),t)};function Pe(e,t={}){const{defaultValue:r,map:n=(e=>e)}=t,o=e[0].toUpperCase()+e.slice(1),a=`web-ubuntu-${e}-key`;return{[`set${o}`](e){localStorage.setItem(a,e)},[`get${o}`](){var e,t;return null!=(t=null!=(e=n(localStorage.getItem(a)))?e:r)?t:null},[`remove${o}`](){localStorage.removeItem(a)}}}const{setFolderDragTarget:Te,removeFolderDragTarget:je,getFolderDragTarget:ze}=Pe("folderDragTarget",{defaultValue:""}),{setBackgroundImage:Oe,getBackgroundImage:Fe}=Pe("backgroundImage");function Ye(e,{currentId:t,prevId:r,parentId:n,prevParentId:o}){const a=e.appMap[r],s=e.appMap[n],c=e.appMap[o];a.parentId=n,a.id=t,Reflect.deleteProperty(e.appMap,r),Reflect.deleteProperty(e.openedAppMap,r),Reflect.deleteProperty(e.maximizedApps,r),Reflect.deleteProperty(e.minimizedApps,r),e.openedApps=e.openedApps.filter((e=>e.id!==r)),e.appMap[t]=a,c.apps=c.apps.filter((e=>e.id!==r)),s.apps.push(a),$e(a)&&(a.apps=a.apps.map((r=>{const n=r.id,o=n.split("/"),a=`${t}/${o[o.length-1]}`;return Ye(e,{currentId:a,prevId:n,parentId:t,prevParentId:t}),i(l({},r),{id:a,parentId:t})})))}function Le(e,t,r){if(t===r)return!1;if($e(e[t])){let n=e[r];for(;n;){if(n.parentId===t)return!1;n=e[n.parentId]}return!0}return!0}function $e(e){return!!e&&(Array.isArray(e.apps)||!!e.folder)}const _e=e=>{const t=p.exports.useRef(!(!e.app.position||!e.app.position.left&&!e.app.position.top)),[{appMap:r,copiedAppId:n}]=ut(),[{dragArea:o}]=be(),[a,s]=p.exports.useState(!1),[c,u]=p.exports.useState(!1),f=p.exports.useMemo((()=>{var r,n;return t.current||!(!(null==(r=e.app.position)?void 0:r.left)&&!(null==(n=e.app.position)?void 0:n.top))}),[e.app.position]),g=p.exports.useRef(null),h=m("hover:z-20 focus:z-20 z-10",{"z-20":c}),[,b]=ut(),w=p.exports.useMemo((()=>({from:e.folderId,app:e.app})),[e.app,e.folderId]),y=p.exports.useCallback(((e,t)=>{const r=t.currentTarget;t.dataTransfer.setData("domOffset",JSON.stringify(l({},function({clientX:e,clientY:t},r){const{offsetLeft:n,offsetTop:o}=D(r);return{left:e-n,top:t-o}}({clientX:t.clientX,clientY:t.clientY},r))))}),[]),v=p.exports.useCallback((()=>{const t=ze();return je(),Le(r,e.app.id,t)}),[e.app]),x=p.exports.useMemo((()=>{const t=e.app.position||{left:0,top:0};return{left:0===o.width||"string"==typeof t.left?t.left:t.left/o.width*100+"%",top:0===o.height||"string"==typeof t.top?t.top:t.top/o.height*100+"%"}}),[e.app.position,o]),E=p.exports.useMemo((()=>[{key:"Open",title:"Open",onClick:()=>{b.openApp(e.app.id,e.app)}},{key:"Copy",title:"Copy",onClick:()=>{var t;return null==(t=e.onCopy)?void 0:t.call(e,e.app.id,e.app)}},{key:"Paste",title:"Paste",disabled:!Le(r,n,e.app.id)||!$e(e.app),onClick:()=>{var t;return null==(t=e.onPaste)?void 0:t.call(e,e.app.id,e.app)}}]),[e.app,r,e.onCopy,n,e.onPaste,b]);De((()=>{if(g.current&&a&&!t.current){const r=g.current.offsetLeft,n=g.current.offsetTop;requestAnimationFrame((()=>{t.current=!0,b.updateFolderApp({from:e.folderId,to:e.folderId,data:i(l({},e.app),{position:{left:r,top:n}})})}))}}),[a]),p.exports.useEffect((()=>{s(!0)}),[]),ie(g,(()=>{u(!1)})),z(g,"click",(()=>{b.clickApp(e.app.id,e.app),u(!0)}));const k=p.exports.useCallback((t=>{var r,n;f&&(null==(r=e.app.position)?void 0:r.left)!==t.left&&(null==(n=e.app.position)?void 0:n.top)!==t.top&&b.updateFolderApp({from:e.folderId,to:e.folderId,data:i(l({},e.app),{position:t})})}),[e.app,e.folderId,f,b]);return d.createElement(Ee,{onDragStart:y,nodeRef:g,defaultPosition:x,onPositionChange:k,className:h,data:w,style:{position:f?"absolute":"static"},onValid:v},d.createElement("div",{"data-target":Re},d.createElement(Ae,{menus:E},d.createElement(ge,l({},e)))))};var We,Ve;(Ve=We||(We={})).Application="/application",Ve.Desktop="/desktop",Ve.Settings="/application/settings";const Xe=({children:e,folderId:t,className:r})=>{const[{appMap:n},o]=ut(),[a,s]=p.exports.useState(!1),[l,i]=p.exports.useState({left:0,top:0}),c=m(r,"h-full w-full flex flex-col justify-start content-start flex-wrap bg-transparent relative overflow-hidden overscroll-none"),u=p.exports.useMemo((()=>[{key:"New Folder",title:"New Folder",onClick(){o.setNewFolderModalFolderId(t),o.setNewFolderModal(!0)}},{key:"Paste",title:"Paste",disabled:!0},{key:"Show Desktop in Files",title:"Show Desktop in Files",disabled:!0},{key:"Open in Terminal",title:"Open in Terminal"},{key:"Change Background...",title:"Change Background...",onClick(){const e=n[We.Settings];e&&o.openApp(e.id,e)}},{key:"Display Settings",title:"Display Settings",disabled:!0},{key:"Settings",title:"Settings",onClick(){const e=n[We.Settings];e&&o.openApp(e.id,e)}}]),[]),f=p.exports.useMemo((()=>({onContextMenu(e){if(T(e.target,(e=>{var t;const r=null==(t=e.dataset)?void 0:t.target;return r===Re||r===Se})))return s(!1);s(!0),o.setMousePosition({clientX:e.clientX,clientY:e.clientY});const t=e.currentTarget,{offsetLeft:r,offsetTop:n}=D(t),a=e.clientX-r,l=e.clientY-n;i({left:a,top:l})},onClick(){s(!1)},onClickAway(){s(!1)}})),[s,i,o]);return d.createElement(Ae,{rewritePosition:l,rewriteVisible:a,contextmenuOptionsRewrite:f,className:c,menus:u},e)};var Be,Ue;function He(e,t=0){const r=p.exports.useRef(Be.Free),n=p.exports.useRef(),o=p.exports.useRef(e);o.current=e;const a=p.exports.useCallback((()=>r.current),[]),s=p.exports.useCallback(((...e)=>{r.current=Be.Pending,n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{r.current=Be.Called,o.current(...e)}),t)}),[t]),l=p.exports.useCallback((()=>{r.current=Be.Canceled,n.current&&clearTimeout(n.current)}),[]);return _(l),{currentStatus:a,run:s,cancel:l}}(Ue=Be||(Be={})).Free="free",Ue.Pending="pending",Ue.Canceled="cancelled",Ue.Called="called";const qe=({children:e,visible:t=!1,exist:r=!1,duration:n,transitionProperty:o=["all"],leaveClassName:a="",enterClassName:s="",nodeRef:c})=>{const[u,f]=p.exports.useState(!1),{run:g,cancel:h}=He((e=>{f(e)}),n),b=p.exports.useRef(null),w=c||b;if(p.exports.useEffect((()=>{var e;h(),t?(null==(e=w.current)||e.scrollTop,f(t)):g(t)}),[t,g]),d.isValidElement(e)){if(d.Children.only(e)){const{props:c}=e,p=m(c.className,{hidden:r&&!(t||u),[s]:u,[a]:!t});return r||t||u?d.cloneElement(e,i(l({},c),{ref:w,style:Object.assign({},c.style,{transitionProperty:n?o.join(","):void 0,transitionDuration:`${n}ms`}),className:p})):null}return d.createElement(d.Fragment,null,d.Children.map(e,(e=>{const{props:c}=e,p=m(c.className,{hidden:r&&!(t||u),[s]:u,[a]:!t});return r||t||u?d.cloneElement(e,i(l({},c),{style:Object.assign({},c.style,{transitionProperty:n?o.join(","):void 0,transitionDuration:`${n}ms`}),className:p})):null})))}return d.createElement(d.Fragment,null,e)};const Je={"top left":"left-0 top-0","top right":"right-0 top-0","bottom left":"left-0 bottom-0","bottom right":"right-0  bottom-0"},Ke={info:"bg-ub-cool-grey",error:"bg-red-500",success:"bg-green-500",warning:"bg-yellow-500"};var Ge=p.exports.forwardRef((({duration:e=3e3,type:t="info",direction:r="top right",content:n,description:o,wrapperClassName:a},s)=>{const[l,i]=p.exports.useState(!0),{run:c,cancel:u}=He((()=>{i(!1)}),e),f=p.exports.useCallback((()=>{u(),i(!1)}),[i,u]);p.exports.useImperativeHandle(s,(()=>({close:f})),[f]);const g=m("message-container",{"message-left":r.includes("left"),"message-right":r.includes("right")},Je[r],Ke[t],a);return p.exports.useEffect((()=>{c()}),[]),d.createElement(qe,{visible:l,duration:300,enterClassName:"message-container-show",leaveClassName:"message-container-leave"},d.createElement("div",{className:g},d.createElement("div",{className:"text-white"},n),d.createElement("div",{className:"text-xs mt-1 text-ubt-grey"},o)))}));const Qe=d.createRef(),Ze=e=>{Qe.current&&Qe.current.close();const t=document.createElement("div");document.body.append(t),x.render(x.createPortal(d.createElement(Ge,l({ref:Qe},e)),document.body),t),document.body.removeChild(t)};["info","error","success","warning"].forEach((e=>{Ze[e]=t=>{Ze(i(l({},t),{type:e}))}}));const et=({id:e,emptyProps:t,showEmpty:r=!0,wrapperClassName:n,className:o})=>{const[{appMap:a,copiedAppId:s},c]=ut(),u=p.exports.useMemo((()=>{const t=a[e];return $e(t)?t.apps.map((e=>a[e.id])):[]}),[a]),f=p.exports.useCallback(((e,t)=>{c.openApp(e,t)}),[c]),g=p.exports.useCallback((e=>{c.setCopiedAppId(e)}),[c]),h=p.exports.useCallback((e=>{const t=a[s],r=a[e];t&&($e(r)?c.updateFolderApp({from:t.parentId,to:e,data:i(l({},t),{position:{left:0,top:0}})}):Ze.error({content:"target app is not a folder"}))}),[c,s,a]),b=m("w-full h-full",n);return d.createElement(Xe,{folderId:e,className:b},d.createElement(xe,{onDragEnter:()=>{Te(e)},onDrop:t=>{t.stopPropagation();const r=j(t.dataTransfer.getData("custom"),{});if(!r.app)return void Ze.error({content:"invalid dragging element"});const n=a[r.app.id],o=j(t.dataTransfer.getData("domOffset"),{}),s=t.currentTarget,{offsetLeft:p,offsetTop:u}=D(s),d=r.from===e?n.position:{left:t.clientX-p-o.left,top:t.clientY-u-o.top};c.updateFolderApp({from:r.from,to:e,data:i(l({},n),{position:d})})},className:o},u.length>0||!r?u.map((t=>d.createElement(_e,{onOpen:f,onCopy:g,onPaste:h,folderId:e,key:t.id,app:t}))):d.createElement(se,l({title:"Folder is Empty"},t))))},tt=e=>d.createElement(et,l({className:"min-h-full flex-grow flex flex-wrap items-start content-start justify-start",wrapperClassName:"w-full h-full flex flex-col bg-ub-cool-grey text-white select-none overflow-x-auto overflow-y-auto ub-scrollbar"},e));var rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tt});const nt=d.lazy((()=>N((()=>import("./todoist.35c910b3.js")),["assets/todoist.35c910b3.js","assets/vendor.11d3daa3.js"]))),ot=d.lazy((()=>N((()=>import("./firefox.288de020.js")),["assets/firefox.288de020.js","assets/vendor.11d3daa3.js"]))),at=d.lazy((()=>N((()=>import("./settings.f9b9aeee.js")),["assets/settings.f9b9aeee.js","assets/vendor.11d3daa3.js"]))),st=d.lazy((()=>N((()=>import("./trash.410775d5.js")),["assets/trash.410775d5.js","assets/vendor.11d3daa3.js"]))),lt=d.lazy((()=>N((()=>import("./vscode.98c094c0.js")),["assets/vscode.98c094c0.js","assets/vendor.11d3daa3.js"]))),it=[{parentId:"/",folder:!0,id:"/desktop",title:"Desktop",apps:[{parentId:"/desktop",id:"/desktop/Col0ring",title:"Col0ring",icon:q("/themes/Yaru/system/folder.png"),render:e=>d.createElement(tt,{id:e}),folder:!0,position:{left:0,top:1},apps:[{parentId:"/desktop/Col0ring",id:"/desktop/Col0ring/index.php",icon:q("/themes/filetypes/php.png"),title:"php"},{parentId:"/desktop/Col0ring",title:"Angular.js",id:"/desktop/Col0ring/Angular.js",icon:q("/themes/filetypes/js.png")}]},{parentId:"/desktop",id:"/desktop/222",title:"222",icon:q("/themes/Yaru/system/folder.png"),render:e=>d.createElement(tt,{id:e}),folder:!0,position:{left:0,top:76},apps:[{parentId:"/desktop/222",id:"/desktop/222/js",icon:q("/themes/filetypes/php.png"),title:"js"}]},{parentId:"/desktop",id:"/desktop/application-shortcut",title:"Applications",position:{left:0,top:151},icon:q("/themes/Yaru/system/folder.png"),redirect:"/application"},{parentId:"/desktop",id:"/desktop/firefox-shortcut",title:"Firefox Browser",position:{left:0,top:226},icon:q("/themes/Yaru/apps/firefox.svg"),redirect:"/application/firefox"},{parentId:"/desktop",id:"/application/todo-ist-shortcut",title:"Todoist",position:{left:0,top:318},icon:q("/themes/Yaru/apps/todoist.png"),redirect:"/application/todo-ist"}]},{parentId:"/",folder:!0,id:"/application",title:"Application",icon:q("/themes/Yaru/system/folder.png"),render:e=>d.createElement(tt,{id:e}),apps:[{parentId:"/application",id:"/application/firefox",title:"Firefox Browser",icon:q("/themes/Yaru/apps/firefox.svg"),disabled:!1,render:()=>d.createElement(ot,null)},{parentId:"/application",id:"/application/todo-ist",title:"Todoist",icon:q("/themes/Yaru/apps/todoist.png"),disabled:!1,render:()=>d.createElement(nt,null)},{parentId:"/application",id:"/application/about-col0ring",title:"About Col0ring",icon:q("/themes/Yaru/system/user-home.png"),disabled:!1},{parentId:"/application",id:"/application/vscode",title:"Visual Studio Code",icon:q("/themes/Yaru/apps/vscode.png"),disabled:!1,render:()=>d.createElement(lt,null)},{parentId:"/application",id:"/application/terminal",title:"Terminal",icon:q("/themes/Yaru/apps/bash.png"),disabled:!1},{parentId:"/application",id:"/application/music",title:"Music",icon:q("/themes/Yaru/apps/vue-aplayer-round.png"),disabled:!1},{parentId:"/application",id:"/application/settings",title:"Settings",icon:q("/themes/Yaru/apps/gnome-control-center.png"),disabled:!1,render:()=>d.createElement(at,null)},{parentId:"/application",id:"/application/trash",title:"Trash",icon:q("/themes/Yaru/system/user-trash-full.png"),disabled:!1,folder:!0,render:()=>d.createElement(st,null),apps:[{parentId:"/application/trash",id:"/application/trash/index.php",icon:q("/themes/filetypes/php.png"),title:"php"},{parentId:"/application/trash",title:"Angular.js",id:"/application/trash/Angular.js",icon:q("/themes/filetypes/js.png")}]},{parentId:"/application",id:"/application/gedit",title:"Send a Message",icon:q("/themes/Yaru/apps/gedit.png"),disabled:!1}]}],ct=d.lazy((()=>N((()=>Promise.resolve().then((function(){return rt}))),void 0))),pt=function e(t){const r={};return t.forEach((t=>{r[t.id]=t,$e(t)&&Object.assign(r,e(t.apps||[]))})),r}(it),[ut,dt,mt]=u((e=>[{chooseBackgroundImage:t=>(Oe(t),e.backgroundImage=t,e),setCopiedAppId:t=>(e.copiedAppId=t,e),setNewFolderModal:t=>(e.newFolderModal=t,e),setNewFolderModalFolderId:t=>(e.newFolderModalFolderId=t,e),setAllAppsScreen:t=>(e.allAppsScreen=t,e),setLockScreen:t=>(e.lockScreen=t,e),setMousePosition:t=>(e.mousePosition=t,e),resizeBrowserWindow:(t,r)=>(e.defaultAppWindow.minHeight=r/3,e.defaultAppWindow.minWidth=t/3,e),updateOpenedApp:(t,r)=>(e.openedApps=e.openedApps.map((e=>e.id===t?r:e)),e.openedAppMap[t]=r,e),addNewFolder(t,r,n){const o=e.appMap[t],a=`${t}/${r}`;if(o.apps.find((e=>e.id===a)))return Ze.error({content:"Something Wrong",description:`The name ${r} is already in use. Please choose another name`,duration:5e3}),e;const s={id:a,title:r,parentId:t,folder:!0,icon:q("/themes/Yaru/system/folder.png"),disabled:!1,position:n,apps:[],render:e=>d.createElement(ct,{id:e})};return this.setNewFolderModal(!1),o.apps.push(s),e.appMap[a]=s,e},updateFolderApp({from:t,to:r,data:n}){if(!Le(e.appMap,n.id,r))return Ze.error({content:"Something Wrong",description:"can not move itself or parent folder to the directory"}),e;const o=e.appMap[t];if(e.appMap[n.id]=n,t===r){const r=e.openedAppMap[t];return r&&(r.apps=r.apps.map((e=>e.id===n.id?n:e)),e.openedApps=e.openedApps.map((e=>e.id===t?r:e))),o.apps=o.apps.map((e=>e.id===n.id?n:e)),e}{const t=e.appMap[r],a=n.id.split("/"),s=`${t.id}/${a[a.length-1]}`;return Ye(e,{currentId:s,prevId:n.id,parentId:t.id,prevParentId:o.id}),e}},openApp(t,r){const n=r.redirect||t;if(e.openedAppMap[n]){const t=e.openedAppMap[n];return Reflect.deleteProperty(e.minimizedApps,n),e.openedApps=[...e.openedApps.filter((e=>e.id!==n)),t],e.focusAppId=n,e}const o=i(l({},e.appMap[n]),{rect:l({},e.defaultAppWindow),windowPosition:{left:0,top:0}});return e.focusAppId=n,e.openedApps.push(o),e.openedAppMap[n]=o,e},closeApp:t=>(e.focusAppId=e.focusAppId===t?"":e.focusAppId,e.openedApps=e.openedApps.filter((e=>e.id!==t)),Reflect.deleteProperty(e.maximizedApps,t),Reflect.deleteProperty(e.minimizedApps,t),Reflect.deleteProperty(e.openedAppMap,t),e),minimizeApp:(t,r)=>(e.minimizedApps[t]?Reflect.deleteProperty(e.minimizedApps,t):e.minimizedApps[t]=r,e.focusAppId=e.focusAppId===t?"":e.focusAppId,e),maximizeApp:(t,r)=>(e.maximizedApps[t]?Reflect.deleteProperty(e.maximizedApps,t):e.maximizedApps[t]=r,e.focusAppId=t,e),clickApp(t,r){const n=e.appMap[r.parentId];return n.apps=[...n.apps.filter((e=>e.id!==t)),r],e}}]),{backgroundImage:Fe()||Ce["wall-2"],backgroundImages:Ce,mousePosition:{clientX:0,clientY:0},newFolderModal:!1,newFolderModalFolderId:"",defaultAppWindow:{width:"85%",height:"80%",minWidth:window.innerWidth/3,minHeight:window.innerHeight/3},allAppsScreen:!1,lockScreen:!1,focusAppId:"",copiedAppId:"",openedAppMap:{},openedApps:[],minimizedApps:{},maximizedApps:{},frequentApps:pt[We.Application].apps,favoriteApps:pt[We.Application].apps,appMap:pt},ae),ft=({tabs:e,onItemClick:t,stretch:r,active:n,className:o,fontSize:a,itemClassName:s})=>{const l=m("flex flex-col group  bg-transparent cursor-pointer items-center",{"flex-1":r},s),i=m("w-full flex",o);return d.createElement("div",{className:i},e.map(((e,r)=>d.createElement("div",{key:e.name,className:l,onClick:()=>null==t?void 0:t(e.name,r)},d.createElement("div",{style:{fontSize:a},className:"flex-1 flex justify-center items-center text-white",onClick:e.onClick},e.render?e.render():d.createElement("span",null,e.title||e.name)),d.createElement("div",{className:"w-full h-1 mt-1 "+(e.name===n?"bg-ub-orange":"bg-transparent group-hover:bg-white")})))))},gt=({placeholder:e="Type to Search...",className:t,value:r,onChange:n})=>{const o=m("flex w-1/4 h-full items-center pl-2 pr-2 bg-white border-black border-width-2 rounded-xl overflow-hidden left",t),a=void 0===r,s=p.exports.useCallback((e=>{null==n||n(e.target.value,e)}),[n]);return d.createElement("div",{className:o},d.createElement("img",{className:"w-5 h-5",alt:"search icon",src:q("/images/logos/search.png")}),d.createElement("input",{className:"w-full p-1 bg-transparent focus:outline-none",placeholder:e,value:a?void 0:r,onChange:s}))};const ht=[{name:"Frequent"},{name:"All"}],bt=()=>{const[{appMap:e,allAppsScreen:t,frequentApps:r},n]=ut(),[o,a]=p.exports.useState("All"),s=p.exports.useMemo((()=>e[We.Application].apps),[e]),l=p.exports.useCallback((e=>{a(e)}),[a]),i=p.exports.useCallback(((e,t)=>{n.openApp(e,t),n.setAllAppsScreen(!1)}),[n]),c=m("all-apps-screen absolute h-full w-full left-0 top-0 z-30 justify-center border-black border-opacity-60 bg-black bg-opacity-70");return d.createElement(qe,{duration:200,enterClassName:"all-apps-screen-show",leaveClassName:"all-apps-screen-leave",exist:!0,visible:t},d.createElement("div",{style:{paddingRight:Ne.sidebar},className:c},d.createElement("div",{style:{paddingTop:Ne.navbar},className:"relative w-full h-full"},d.createElement("div",{className:"flex p-5 align-center justify-center"},d.createElement(gt,{placeholder:"Type to Search..."})),d.createElement("div",{className:"flex flex-wrap"},"Frequent"===o?r.map((e=>d.createElement(ge,{key:e.id,onOpen:i,app:e}))):s.map((e=>d.createElement(ge,{key:e.id,onOpen:i,app:e})))),d.createElement("div",{className:"flex items-center p-2 justify-center absolute left-0 bottom-0 mb-15 w-full"},d.createElement("div",{className:"w-1/2"},d.createElement(ft,{active:o,onItemClick:l,fontSize:16,stretch:!0,tabs:ht}))))))};function wt(e){return e<10?`0${e}`:`${e}`}const yt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xt=({className:e,type:t="default",showSeconds:r,delay:n=1e3,hour12:o=!0})=>{const[a,s]=p.exports.useState((()=>new Date)),l=p.exports.useMemo((()=>{const e=vt[a.getDay()];let n=a.getHours();const s=wt(a.getMinutes()),l=wt(a.getSeconds()),i=r?`:${l}`:"",c=yt[a.getMonth()],p=a.getDate(),u=n<12?"AM":"PM";switch(o&&n>12&&(n-=12),t){case"date":return`${e} ${c} ${p}`;case"time":return`${n}:${s}${i} ${u}`;case"default":default:return`${e} ${c} ${p} ${n}:${s}${i} ${u}`}}),[a,t]),i=m(e);return G((()=>{s(new Date)}),n),d.createElement("span",{className:i},l)},Et=({className:e,children:t,color:r,onClick:n})=>{const o=m("pl-2 pr-2 outline-none transition duration-100 ease-in-out border-b-2 border-transparent focus:border-ubb-orange py-1",e);return d.createElement("div",{tabIndex:0,style:{borderColor:r},className:o,onClick:n},t)},{setBrightness:kt,getBrightness:At}=Pe("brightness",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),{setSound:Ct,getSound:Nt}=Pe("sound",{defaultValue:100,map:e=>"string"==typeof e?+e:100}),[Mt,It]=u((e=>({setUbuntuInstance:t=>i(l({},e),{ubuntu:t}),setBrightness:t=>(kt(`${t}`),i(l({},e),{config:i(l({},e.config),{brightness:t})})),setSound:t=>(Ct(`${t}`),i(l({},e),{config:i(l({},e.config),{sound:t})})),setTitle:t=>i(l({},e),{title:`Web Ubuntu - ${t}`})})),{title:"Web Ubuntu",ubuntu:{current:null},config:{brightness:At(),sound:Nt()}});const Rt={up:"Bottom",down:"Top",left:"Right",right:"Left"},St=({direction:e,className:t,size:r,color:n})=>{const o=m(`arrow-custom-${e} inline-block`,t);return d.createElement("i",{style:{borderWidth:r,[`border${Rt[e]}Color`]:n},className:o})};const Dt=({className:e,min:t=0,max:r=100,step:n=1,value:o,onChange:a})=>{const s=m("ubuntu-slider",e),l=void 0===o,i=p.exports.useCallback((e=>{null==a||a(+e.target.value,e)}),[a]);return d.createElement("input",{type:"range",min:`${t}`,max:`${r}`,step:`${n}`,defaultValue:l?"0":void 0,value:l?void 0:`${o}`,onChange:i,className:s})},Pt=({icons:e})=>d.createElement("div",{className:"flex justify-center items-center"},e.map((({name:e,icon:t})=>d.createElement("img",{className:"mx-1.5",key:e,src:t,alt:e}))),d.createElement("span",{className:"mx-1"},d.createElement(St,{direction:"down"}))),Tt=({children:e,image:t,imageAlt:r,onClick:n,name:o})=>d.createElement("div",{onClick:n,className:"w-64 py-1.5 flex items-center justify-center bg-ub-cool-grey hover:bg-ub-warm-grey hover:bg-opacity-20"},d.createElement("div",{className:"w-8"},d.createElement("img",{src:t,alt:r||o})),e||d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,o))),jt=()=>d.createElement("div",{className:"w-64 flex content-center justify-center"},d.createElement("i",{className:"w-2/4 border-black border-opacity-50 border-b my-2 border-solid"}));const zt=({menus:e,onClickAway:t,visible:r})=>{const n=p.exports.useRef(null),o=m("absolute bg-ub-cool-grey rounded-md py-4 top-9 right-3 shadow border-black border border-opacity-20 status-menu");return d.createElement(qe,{enterClassName:"status-menu-show",leaveClassName:"status-menu-leave",duration:200,nodeRef:n,visible:r},d.createElement("div",{ref:n,className:o},d.createElement("i",{className:"absolute w-0 h-0 -top-2 right-6 top-arrow-up inline-block"}),e.map(((t,r)=>d.createElement(d.Fragment,{key:r},t.map((e=>{var t=e,{render:r}=t,n=c(t,["render"]);return d.createElement(Tt,l({key:n.image},n),null==r?void 0:r())})),r!==e.length-1&&d.createElement(jt,null)))),d.createElement(Ot,{statusMenuRef:n,onClickAway:t})))},Ot=({statusMenuRef:e,onClickAway:t})=>(ie(e,(e=>{null==t||t(e)})),null),{setToken:Ft,getToken:Yt,removeToken:Lt}=Pe("token"),$t=Yt(),[_t,Wt]=u((e=>({login:t=>(Ft(t),i(l({},e),{token:t,isLogin:!0})),setUser:t=>i(l({},e),{user:t}),logout:()=>(Lt(),i(l({},e),{user:null,token:null,isLogin:!1}))})),{user:null,token:$t,isLogin:!!$t}),Vt=()=>{const[e,t]=p.exports.useState(!1),[,r]=_t(),[n,o]=Mt(),[{appMap:a},s]=ut(),{config:{sound:l,brightness:i}}=n,c=p.exports.useCallback((e=>{o.setSound(e)}),[o]),u=p.exports.useCallback((e=>{o.setBrightness(e)}),[o]),m=p.exports.useCallback((()=>{t(!0)}),[t]),f=p.exports.useCallback((()=>{t(!1)}),[t]),g=p.exports.useMemo((()=>[{icon:q("/themes/Yaru/status/network-wireless-signal-good-symbolic.svg"),name:"ubuntu wifi"},{icon:q("/themes/Yaru/status/audio-volume-medium-symbolic.svg"),name:"ubuntu sound"},{icon:q("/themes/Yaru/status/battery-good-symbolic.svg"),name:"ubuntu battry"}]),[]),h=p.exports.useMemo((()=>[[{image:q("/themes/Yaru/status/audio-headphones-symbolic.svg"),imageAlt:"ubuntu headphone",render:()=>d.createElement(Dt,{onChange:c,className:"ubuntu-slider w-2/3",value:l})},{image:q("/themes/Yaru/status/display-brightness-symbolic.svg"),imageAlt:"ubuntu brightness",render:()=>d.createElement(Dt,{onChange:u,className:"ubuntu-slider w-2/3",value:i})}],[{image:q("/themes/Yaru/status/network-wireless-signal-good-symbolic.svg"),imageAlt:"ubuntu wifi",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"OnePlus 8 Pro"),d.createElement(St,{direction:"right"}))},{image:q("/themes/Yaru/status/battery-good-symbolic.svg"),imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"Off"),d.createElement(St,{direction:"right"}))},{image:q("/themes/Yaru/status/bluetooth-symbolic.svg"),imageAlt:"ubuntu battery",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between text-gray-400"},d.createElement("span",null,"2:40 Remaining (75%)"),d.createElement(St,{direction:"right"}))}],[{image:q("/themes/Yaru/status/emblem-system-symbolic.svg"),imageAlt:"ubuntu settings",name:"Settings",onClick:()=>{s.openApp(We.Settings,a[We.Settings])}},{image:q("/themes/Yaru/status/changes-prevent-symbolic.svg"),imageAlt:"ubuntu lock",name:"Lock",onClick:()=>{s.setLockScreen(!0)}},{image:q("/themes/Yaru/status/system-shutdown-symbolic.svg"),imageAlt:"ubuntu power",render:()=>d.createElement("div",{className:"w-2/3 flex items-center justify-between"},d.createElement("span",null,"Power Off / Log Out"),d.createElement(St,{direction:"right"})),onClick:()=>{r.logout()}}]]),[l,i,c,u,a,r]);return d.createElement("div",{className:"absolute top-0 left-0 w-full shadow-md flex flex-nowrap justify-between items-center bg-ub-grey text-ubt-grey text-sm select-none z-60"},d.createElement(Et,null,"Activities"),d.createElement(Et,{className:"text-xs md:text-sm"},d.createElement(xt,null)),d.createElement(Et,{className:"relative",onClick:m},d.createElement(Pt,{icons:g}),d.createElement(zt,{visible:e,menus:h,onClickAway:f})))};function Xt(e,t={}){const{onEnter:r,onLeave:n}=t,[o,a]=p.exports.useState(!1);return z(e,"mouseenter",(()=>{null==r||r(),a(!0)})),z(e,"mouseleave",(()=>{null==n||n(),a(!1)})),o}const Bt={top:"mb-1.5 bottom-full left-1/2 transform  -translate-x-1/2",bottom:"mt-1.5 top-full left-1/2 transform  -translate-x-1/2",left:"mr-1.5 top-1/2 transform -translate-y-1/2 right-full",right:"ml-1.5 top-1/2 transform -translate-y-1/2 left-full","top left":"mb-0.5 right-full mr-0.5 bottom-full","top right":"mb-0.5 left-full ml-0.5 bottom-full","bottom left":"mt-0.5 right-full mr-0.5 top-full","bottom right":"mt-0.5 left-full ml-0.5 top-full"},Ut=({title:e,direction:t="right",children:r,className:n})=>{const o=p.exports.useRef(null),a=Xt(o),s=m("relative",n),l=m("whitespace-nowrap py-0.5 px-1.5 absolute  text-ubt-grey text-opacity-90 text-sm bg-ub-grey bg-opacity-70 border-gray-400 border border-opacity-40 rounded-md",Bt[t]);return d.createElement("div",{ref:o,className:s},r,a&&d.createElement("div",{className:l},e))};const Ht=({onClick:e,isOpen:t,app:r,isMinimized:n})=>{const o=p.exports.useRef(null),[a,s]=p.exports.useState(!1),{run:l}=He((()=>{s(!1)}),1e3),i=m("w-auto p-2 outline-none relative transition hover:bg-white hover:bg-opacity-10 rounded",{"bg-white bg-opacity-10":t}),c=p.exports.useCallback((()=>{n||t||(s(!0),l()),null==e||e(r.id,r)}),[e,r.id,r,n,t]);return d.createElement(Ut,{className:"m-1",title:r.title,direction:"left"},d.createElement("div",{"data-target":Se,tabIndex:0,ref:o,onClick:c,className:i,id:`sidebar-app-${r.id}`},"string"==typeof r.icon?d.createElement(d.Fragment,null,d.createElement("img",{className:"w-7",src:r.icon,alt:r.title}),a&&d.createElement("img",{className:"scalable-app-icon w-7 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:r.icon,alt:r.title})):r.icon,t&&d.createElement("div",{className:"w-1 h-1 absolute left-0 top-1/2 bg-ub-orange rounded-sm"})))},qt=({onEnter:e,onLeave:t,children:r})=>{const n=p.exports.useRef(null);return Xt(n,{onEnter:e,onLeave:t}),d.createElement("div",{ref:n,style:{width:Ne.sidebar},className:"h-full absolute top-0 right-0  z-40"},r)},Jt=({onClick:e})=>d.createElement("div",{className:"absolute bottom-0"},d.createElement(Ut,{title:"Show Applications"},d.createElement("div",{className:"w-10 h-10 rounded m-1 hover:bg-white hover:bg-opacity-10 flex items-center justify-center",onClick:e},d.createElement("img",{className:"w-7",src:q("/themes/Yaru/system/view-app-grid-symbolic.svg"),alt:"Ubuntu view app"}))));const Kt=()=>{const[{favoriteApps:e,appMap:t,openedAppMap:r,openedApps:n,minimizedApps:o,allAppsScreen:a},s]=ut(),[i,c]=p.exports.useState(!1),u=m("desktop-sidebar select-none h-full pt-7 flex flex-col justify-start items-center border-black border-opacity-60 bg-black bg-opacity-50"),f=p.exports.useMemo((()=>Object.keys(o).map((e=>t[e])).filter((t=>!e.find((e=>e.id===t.id))))),[o]),g=p.exports.useCallback(((e,t)=>{s.openApp(e,t)}),[s]),h=p.exports.useCallback((()=>{s.setAllAppsScreen(!a)}),[a]),b=p.exports.useMemo((()=>({onEnter:()=>{c(!0)},onLeave:()=>{c(!1)}})),[c]),w=p.exports.useMemo((()=>n.every((e=>{if(!e||o[e.id])return!0;const t="number"==typeof e.rect.width?e.rect.width:window.innerWidth*Number.parseFloat(`${e.rect.width}`)/100;return("number"==typeof e.windowPosition.left?e.windowPosition.left:window.innerWidth*Number.parseFloat(`${e.windowPosition.left}`)/100)<window.innerWidth-t-Ne.sidebar}))),[n,o]);return d.createElement(qt,l({},b),d.createElement(qe,{duration:500,enterClassName:"desktop-sidebar-show",leaveClassName:"desktop-sidebar-leave",exist:!0,visible:i||w},d.createElement("div",{className:u},e.map((e=>d.createElement(Ht,{isOpen:!!r[e.id],isMinimized:!!o[e.id],onClick:g,key:e.id,app:e}))),f.map((e=>d.createElement(Ht,{isOpen:!!r[e.id],isMinimized:!!o[e.id],onClick:g,key:e.id,app:e}))),d.createElement(Jt,{onClick:h}))))};const Gt=()=>{const[{backgroundImage:e,lockScreen:t},r]=ut(),n=p.exports.useCallback((()=>{r.setLockScreen(!1)}),[r]);return d.createElement(qe,{visible:t,duration:200,enterClassName:"lock-screen-show",leaveClassName:"lock-screen-leave"},d.createElement("div",{style:{backgroundImage:`url(${e})`},onClick:n,onKeyPress:n,className:"lock-screen absolute w-full h-full outline-none select-none top-0 right-0 overflow-hidden m-0 p-0 bg-opacity-50"},d.createElement("div",{className:"lock-screen-content flex flex-col justify-center items-center text-white"},d.createElement("div",{className:"text-7xl"},d.createElement(xt,{type:"time"})),d.createElement("div",{className:"mt-4 text-xl font-medium"},d.createElement(xt,{type:"date"})),d.createElement("div",{className:" mt-16 text-base"},"Click or Press a key to unlock"))))},Qt=({isMaximized:e,onMaximize:t,onMinimize:r,onClose:n,className:o})=>{const a=p.exports.useCallback((r=>{null==t||t(!e,r)}),[t,e]),s=m(o,"flex justify-center items-center");return d.createElement("div",{onClick:R,"data-target":Me,className:s},d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center h-5 w-5 items-center",onClick:r},d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-minimize-symbolic.svg"),alt:"ubuntu window minimize"})),d.createElement("button",{className:"focus:outline-none cursor-default mx-1.5 bg-white bg-opacity-0 hover:bg-opacity-10 rounded-full flex justify-center  h-5 w-5 items-center",onClick:a},e?d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-restore-symbolic.svg"),alt:"ubuntu window restore"}):d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-maximize-symbolic.svg"),alt:"ubuntu window maximize"})),d.createElement("button",{className:"mx-1.5 focus:outline-none cursor-default bg-ub-orange bg-opacity-90 hover:bg-opacity-100 rounded-full flex justify-center h-5 w-5 items-center",onClick:n},d.createElement("img",{draggable:!1,src:q("/themes/Yaru/window/window-close-symbolic.svg"),alt:"ubuntu window close"})))},Zt=e=>{var t=e,{title:r,className:n}=t,o=c(t,["title","className"]);const a=m("bg-ub-window-title border-white border-opacity-5 py-1.5 text-white w-full select-none flex  justify-center items-center",n),s=p.exports.useCallback((e=>{var t;null==(t=o.onMaximize)||t.call(o,!o.isMaximized,e)}),[o.onMaximize,o.isMaximized]);return d.createElement("div",{"data-target":Ie,onDoubleClick:s,style:{paddingLeft:100,paddingRight:100},className:a},d.createElement("div",{className:"flex justify-center text-sm font-bold"},r),d.createElement(Qt,l({className:"absolute top-1 right-1"},o)))};const er=({children:e,className:t})=>{const r=m("w-full flex-grow z-20 max-h-full overflow-y-auto window-main-view bg-ub-cool-grey",t);return d.createElement("div",{className:r},e)};function tr(e,{filterMoving:t,onMoveStart:r,onMoving:n,onMoveEnd:o}={}){z(e,"mousedown",p.exports.useCallback((e=>{if(t&&!t(e))return;null==r||r(e);const{width:a,left:s,top:l,height:i}=e.currentTarget.getBoundingClientRect(),c=e.clientX,p=e.clientY,u=e=>{const t=e.clientX,r=e.clientY,o=t-c,u=r-p;null==n||n({moveX:t,moveY:r,offsetX:o,offsetY:u,left:s+o,top:l+u,width:a,height:i},e)},d=e=>{null==o||o(e),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}),[]))}var rr=p.exports.forwardRef(((e,t)=>{var r=e,{children:n,onMoveStart:o,onMoveEnd:a,onMoving:s,filterMoving:i,className:u,style:m}=r,f=c(r,["children","onMoveStart","onMoveEnd","onMoving","filterMoving","className","style"]);const g=p.exports.useRef(null);return tr(t||g,{onMoveStart:o,onMoveEnd:a,onMoving:s,filterMoving:i}),d.createElement("div",l({ref:t||g,style:m,className:u},f),n)}));const nr=["t","r","b","l","lt","lb","rb","rt"],or=nr.map((e=>{const t=e.includes("l"),r=e.includes("r"),n=e.includes("t"),o=e.includes("b");return{className:m("absolute transform z-60 cursor-move",{"left-0 -translate-x-1/2":t,"top-0 -translate-y-1/2":n,"right-0 translate-x-1/2":r,"bottom-0 translate-y-1/2":o,"h-full":1===e.length&&(t||r),"h-5":e.includes("t")||e.includes("b"),"w-full":1===e.length&&(n||o),"w-5":e.includes("l")||e.includes("r")}),direction:e}}));var ar=p.exports.forwardRef((({children:e,className:t,style:r,onMoving:n,onMoveEnd:o,onMoveStart:a,disabled:s=!1},l)=>{const i=p.exports.useRef(null),c=p.exports.useRef(),u=m("relative",t);return tr(l||i,{filterMoving:e=>{const t=e.target;return!(!t.dataset.direction||!nr.includes(t.dataset.direction))&&(c.current=t.dataset.direction,!0)},onMoveStart:a,onMoving:(e,t)=>{null==n||n(c.current,e,t)},onMoveEnd:o}),d.createElement("div",{ref:l||i,className:u,style:r},!s&&or.map((({direction:e,className:t})=>d.createElement("div",{key:e,"data-direction":e,className:t}))),e)}));function sr(e){const t=p.exports.useRef(0),[r,n]=p.exports.useState(e),o=p.exports.useCallback((e=>{cancelAnimationFrame(t.current),t.current=requestAnimationFrame((()=>{n(e)}))}),[]);return _((()=>{cancelAnimationFrame(t.current)})),[r,o]}const lr=({app:e,isMaximized:t,isMinimized:r,isFocus:n})=>{const[o,a]=ut(),{defaultAppWindow:s}=o,c=p.exports.useRef(s);c.current=s;const[u,f]=sr((()=>({left:e.windowPosition.left,top:e.windowPosition.top}))),[g,h]=sr((()=>({width:e.rect.width,height:e.rect.height}))),[b,w]=p.exports.useState(!0);p.exports.useRef(g).current=g;const y=function(e,t=0){const[r,n]=p.exports.useState(e),{run:o,cancel:a}=He((e=>{n(e)}),t);return p.exports.useEffect((()=>{a(),o(e)}),[e]),r}(t,300),v=p.exports.useRef(null),x=m("m-auto overflow-hidden max-w-full max-h-full absolute window-shadow border-black border-opacity-40 border border-t-0 bg-ub-window-title app-window",t?"z-60 rounded-none":"rounded-lg rounded-b-none",{"not-focus":!n,"z-20 not-focus":!n&&!t,"z-30":n&&!t}),E=p.exports.useMemo((()=>({filterMoving:e=>{const t=e.target;return!!T(t,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===Ie}))&&!T(t,(e=>{var t;return(null==(t=e.dataset)?void 0:t.target)===Me}))},onMoving:({left:e,top:t})=>{t<Ne.navbar&&(t=Ne.navbar+1),f({left:e,top:t})},onClick:()=>{a.openApp(e.id,e)}})),[f,Ne,e,a]),k=p.exports.useMemo((()=>{const e=t?"100%":g.width||s.width,r=t?"100%":g.height||s.height,n=t?0:u.left&&"number"==typeof u.left?u.left/window.innerWidth*100+"%":u.left,o=t?0:u.top&&"number"==typeof u.top?u.top/window.innerHeight*100+"%":u.top,a="string"==typeof e?window.innerWidth*S(e):e,c=(window.innerWidth-a)/2,p="string"==typeof r?window.innerHeight*S(r):r,d=(window.innerHeight-p)/2;return i(l({width:e,height:r},0===n&&0===o?{left:c,top:d}:{left:n,top:o}),{minWidth:s.minWidth,minHeight:s.minHeight,position:"absolute"})}),[u,t,g,a,s]);p.exports.useEffect((()=>{t||a.updateOpenedApp(e.id,i(l({},e),{rect:{width:k.width,height:k.height},windowPosition:{left:k.left,top:k.top}}))}),[k,t]);const A=p.exports.useMemo((()=>({onClose:()=>{a.closeApp(e.id)},onMaximize:()=>{a.maximizeApp(e.id,e)},onMinimize:()=>{a.minimizeApp(e.id,e)}})),[a,e]),C=p.exports.useMemo((()=>({l:({width:e,offsetX:t,left:r})=>{e-t<c.current.minWidth||(h((r=>({width:e-t,height:r.height}))),f((e=>({top:e.top,left:r}))))},r:({width:e,offsetX:t})=>{h((r=>({width:e+t,height:r.height})))},t:({height:e,offsetY:t,top:r})=>{e-t<c.current.minHeight||(h((r=>({width:r.width,height:e-t}))),f((e=>({top:r,left:e.left}))))},b:({height:e,offsetY:t})=>{h((r=>({width:r.width,height:e+t})))},lb:({width:e,left:t,height:r,offsetX:n,offsetY:o})=>{e-n<c.current.minWidth||(h({width:e-n,height:r+o}),f((e=>({top:e.top,left:t}))))},rb:({width:e,height:t,offsetX:r,offsetY:n})=>{h({width:e+r,height:t+n})},lt:({width:e,height:t,offsetX:r,offsetY:n,top:o,left:a})=>{t-n<c.current.minHeight||e-r<c.current.minWidth||(h({width:e-r,height:t-n}),f({top:o,left:a}))},rt:({width:e,height:t,offsetX:r,offsetY:n,top:o})=>{t-n<c.current.minHeight||(h({width:e+r,height:t-n}),f((e=>({top:o,left:e.left}))))}})),[h,g,f]),N=p.exports.useMemo((()=>({onMoveStart:e=>{const{left:t,top:r}=e.currentTarget.getBoundingClientRect();f((e=>e.left===t&&e.top===r?e:{top:r,left:t}))},onMoving:(e,t)=>{C[e](t)}})),[h,f,C]);p.exports.useEffect((()=>{w(!r)}),[r]);const M=p.exports.useMemo((()=>t||y||r?300:0),[t,y,r]);return d.createElement(qe,{transitionProperty:["width","height","left","top","opacity"],nodeRef:v,enterClassName:"app-window-show",leaveClassName:"app-window-leave",duration:M,visible:b,exist:!0},d.createElement(ar,l({disabled:t,className:x,ref:v,style:k},N),d.createElement(rr,i(l({},E),{className:"flex flex-col w-full h-full"}),d.createElement(Zt,i(l({},A),{title:e.title})),d.createElement(er,null,d.createElement(ee,null,"function"==typeof e.render?e.render(e.id):e.component?d.createElement(e.component):null)))))},ir=()=>{const e=p.exports.useRef(null),[t,r]=p.exports.useState(""),[n,o]=ut(),a=p.exports.useCallback((e=>{r(e.target.value)}),[r]),s=p.exports.useCallback((e=>{if(!e.trim())return;if(n.newFolderModalFolderId===We.Desktop)return void o.addNewFolder(n.newFolderModalFolderId,e,{left:n.mousePosition.clientX,top:n.mousePosition.clientY});const t=n.openedAppMap[n.newFolderModalFolderId],r="string"==typeof t.windowPosition.left?window.innerWidth*S(t.windowPosition.left):t.windowPosition.left,a="string"==typeof t.windowPosition.top?window.innerWidth*S(t.windowPosition.top):t.windowPosition.top;o.addNewFolder(n.newFolderModalFolderId,e,{left:n.mousePosition.clientX-r,top:n.mousePosition.clientY-a})}),[o,n]),l=p.exports.useCallback((()=>{s(t)}),[t]),i=p.exports.useCallback((()=>{o.setNewFolderModal(!1)}),[o]);return fe("enter",(()=>{s(t)}),{target:e}),d.createElement("div",{className:"absolute rounded-md top-1/2 left-1/2 text-center text-white font-light text-sm bg-ub-cool-grey transform -translate-y-1/2 -translate-x-1/2 sm:w-96 w-3/4 z-60"},d.createElement("div",{className:"w-full flex flex-col justify-around items-start px-6 pb-8 pt-6"},d.createElement("span",null,"New folder name"),d.createElement("input",{ref:e,value:t,onChange:a,className:"outline-none mt-4 px-1 w-full  context-menu-bg border-2 border-yellow-700 rounded py-0.5",type:"text",autoComplete:"off",spellCheck:"false",autoFocus:!0})),d.createElement("div",{className:"flex"},d.createElement("div",{onClick:l,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 border-r-0 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Create"),d.createElement("div",{onClick:i,className:"w-1/2 px-4 py-2 border border-gray-900 border-opacity-50 hover:bg-ub-warm-grey hover:bg-opacity-10 hover:border-opacity-50"},"Cancel")))},cr=We.Desktop,pr=()=>d.createElement(et,{id:cr,wrapperClassName:"pt-8",showEmpty:!1});const ur=[{title:"desktop",path:"/desktop",keepAlive:{cacheId:"desktop-page"},exact:!0,component:mt((()=>{const[e,t]=ut();return z(window,"resize",(()=>{t.resizeBrowserWindow(window.innerWidth,window.innerHeight)})),d.createElement("div",{className:"w-full h-full relative left-0 top-0 overflow-hidden"},d.createElement(oe,{src:e.backgroundImage}),d.createElement(pr,null),d.createElement(Vt,null),d.createElement(Kt,null),e.openedApps.map((t=>d.createElement(lr,{isFocus:e.focusAppId===t.id,isMaximized:!!e.maximizedApps[t.id],isMinimized:!!e.minimizedApps[t.id],key:t.id,app:t}))),d.createElement(bt,null),d.createElement(Gt,null),e.newFolderModal&&d.createElement(ir,null))}))},{redirect:"/desktop"}],dr=[{title:"login",path:"/login",exact:!0,component:d.lazy((()=>N((()=>import("./index.3f7434d1.js")),["assets/index.3f7434d1.js","assets/vendor.11d3daa3.js"])))}],[mr,fr]=u((e=>({pushRoutes:t=>i(l({},e),{routes:[...e.routes,...Array.isArray(t)?t:[t]]}),setMatchedRoutes:(t,r)=>i(l({},e),{matchedRoutes:t,currentRoute:r}),reset:()=>({currentRoute:{},routes:dr,matchedRoutes:[]})})),{routes:dr,currentRoute:{},matchedRoutes:[]}),gr=({children:e})=>d.createElement(E,{basename:H},e,d.createElement(br,null)),hr=()=>{const[e]=mr(),{routes:t}=e,r=p.exports.useMemo((()=>re(t)),[t]);return d.createElement(ee,{fallback:d.createElement(Z,{loading:!0,loadingClassName:"bg-black"})},r)},br=()=>{const[e,t]=mr(),[,r]=Mt(),{routes:n}=e,{pathname:o}=k();return p.exports.useEffect((()=>{const e=ne(n,o).map((e=>e.route)),a=e[e.length-1];t.setMatchedRoutes(e,a);const s=null==a?void 0:a.title;s&&r.setTitle(s)}),[o,n,t]),null},wr=({children:e})=>d.createElement(It,null,d.createElement(Wt,null,d.createElement(V,null,d.createElement(fr,null,e)))),yr=A.create({timeout:26e3,baseURL:"/mock"});function vr(e){const{config:t}=e;return t.headers.noRetry?Promise.reject(e):t.headers.retryCount<=3?yr(t):Promise.reject(e)}function xr(e,t){e>3&&Ze.error({content:t})}let Er,kr;const Ar=e=>{var t=e,{loadingClassName:r}=t,n=c(t,["loadingClassName"]);const o=m("bg-black",r);return d.createElement(Z,l({loadingClassName:o},n))};function Cr(e,t=[],r={}){const n=p.exports.useMemo((()=>({loading:r.loading||!1,err:r.err||null,data:void 0})),[]),o=p.exports.useRef(0),a=ve(),[s,c]=p.exports.useState(n);return[s,p.exports.useCallback(((...t)=>(c((e=>i(l({},e),{loading:!0}))),o.current++,e(...t).finally((()=>{o.current--})).then((e=>(0===o.current&&a()&&c((t=>i(l({},t),{data:e,loading:!1}))),[null,e])),(e=>(0===o.current&&a()&&c((t=>i(l({},t),{err:e,loading:!1}))),[e,null]))))),t)]}function Nr(e){return yr({url:"/user/login",method:"post",data:e})}function Mr(){return yr({url:"/user/getUserInfo",method:"get"})}const Ir=["/login"],Rr=["/login"],Sr=({children:e})=>{const[t,r]=_t(),[,n]=mr(),{pathname:o}=k(),[,a]=Cr(Mr,[]),{isLogin:s}=t;return p.exports.useEffect((()=>{s?n.pushRoutes(ur):n.reset()}),[s,n]),p.exports.useEffect((()=>{!function([e,t]){yr.interceptors.request.eject(Er),yr.interceptors.response.eject(kr),Er=yr.interceptors.request.use((t=>{const r=l({},t);if(window.axiosPromiseArr&&Array.isArray(window.axiosPromiseArr)){const e=window.axiosPromiseArr.findIndex((e=>e.url===r.url)),t=window.axiosPromiseArr[e];t&&(t.cancel(),window.axiosPromiseArr.splice(e,1))}return r.cancelToken=new A.CancelToken((e=>{window.axiosPromiseArr=window.axiosPromiseArr||[],window.axiosPromiseArr.push({url:r.url,cancel:e})})),r.headers.token=e.token,"number"==typeof r.headers.retryCount?r.headers.retryCount++:r.headers.retryCount=0,r}),(e=>(xr(e.config.headers.retryCount,e.message),vr(e.config)))),kr=yr.interceptors.response.use((e=>{const{data:t}=e;return t}),(e=>{if(A.isCancel(e))return Promise.reject(e);const{response:r}=e,{status:n,data:o}=r;return 400===n?(Ze.error({content:o.message}),Promise.reject(e)):401===n?(t.logout(),Ze.error({content:o.message}),Promise.reject(e)):(e.message.includes("timeout")&&(e.message=""),xr(e.config.headers.retryCount,e.message),vr(e))}))}([t,r])}),[t,r]),p.exports.useEffect((()=>{(async()=>{if(t.isLogin&&!t.user){const[,e]=await a();e&&r.setUser(e.data)}})()}),[t,r,a]),s?Rr.includes(o)?d.createElement(g,{to:"/desktop"}):d.createElement(Ar,{loading:!t.isLogin||!t.user},e):Ir.includes(o)?d.createElement(d.Fragment,null,e):d.createElement(g,{to:"/login"})};const Dr=({children:e})=>{const t=p.exports.useRef(null),[r,n]=Mt();return function(e,t){const r=p.exports.useRef(document.title);document.title=e,p.exports.useEffect((()=>{if(t&&t.restoreOnUnmount)return()=>{document.title=r.current}}),[])}(r.title),p.exports.useEffect((()=>{n.setUbuntuInstance(t)}),[]),p.exports.useEffect((()=>{t.current.style.filter=`brightness(${3/400*r.config.brightness+.25})`}),[r.config.brightness]),d.createElement("div",{ref:t,id:"web-ubuntu"},e)};N((()=>import("./mock.1e4cf456.js")),["assets/mock.1e4cf456.js","assets/vendor.11d3daa3.js"]).then((()=>{x.render(d.createElement(d.StrictMode,null,d.createElement(U,null,d.createElement(wr,null,d.createElement(Dr,null,d.createElement(gr,null,d.createElement(Sr,null,d.createElement(hr,null))))))),document.getElementById("root"))}));export{tt as F,q as a,_t as b,fe as c,ut as d,Nr as r,Cr as u};
